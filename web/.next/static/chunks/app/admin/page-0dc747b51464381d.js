(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{2751:function(e,s,a){Promise.resolve().then(a.bind(a,2598))},2598:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return u}});var t=a(7437),i=a(2265),n=a(9376),l=a(3113),d=a(5110),r=a(935),c=a(9596),o=a(7586);let m=[{id:"waitlist",label:"Waitlist"},{id:"invites",label:"Invites"},{id:"users",label:"Users"},{id:"login-ips",label:"Login IPs"},{id:"usage",label:"Usage"}];function h(e){let{status:s}=e;return(0,t.jsx)("span",{className:"badge ".concat({pending:"badge-warn",approved:"badge-ok",rejected:"badge-danger",active:"badge-ok",disabled:"badge-danger",accepted:"badge-ok",revoked:"badge-danger"}[s]||"badge-brand"),children:s})}function u(){let e=(0,n.useRouter)(),s=(0,d.p)(),[a,u]=(0,i.useState)("waitlist"),[p,g]=(0,i.useState)(!0),[j,y]=(0,i.useState)([]),[v,b]=(0,i.useState)([]),[f,N]=(0,i.useState)([]),[S,w]=(0,i.useState)([]),[k,_]=(0,i.useState)(""),[C,L]=(0,i.useState)(""),[P,T]=(0,i.useState)(!1),[z,A]=(0,i.useState)(""),[E,I]=(0,i.useState)("all"),[F,M]=(0,i.useState)(""),[O,U]=(0,i.useState)("all"),[R,W]=(0,i.useState)(""),[D,B]=(0,i.useState)("all"),[G,H]=(0,i.useState)(null),[V,q]=(0,i.useState)(""),[J,K]=(0,i.useState)([]),[Q,X]=(0,i.useState)(!1),[Y,Z]=(0,i.useState)({}),[$,ee]=(0,i.useState)({});function es(a){if(a instanceof l.MS){if("auth"===a.kind){e.replace("/auth?reason=expired");return}if("forbidden"===a.kind){e.replace("/app");return}}s.error(a.message||"Something went wrong.")}async function ea(){var a,t,i,n;g(!0);try{if(!(await (0,l.SC)("/auth/me")).is_admin){e.replace("/app");return}}catch(e){es(e),g(!1);return}let[d,r,c,o]=await Promise.allSettled([(0,l.SC)("/admin/waitlist"),(0,l.SC)("/admin/invites"),(0,l.SC)("/admin/users"),(0,l.SC)("/admin/usage")]);"fulfilled"===d.status?y(d.value):s.error("Waitlist: ".concat((null===(a=d.reason)||void 0===a?void 0:a.message)||"failed to load")),"fulfilled"===r.status?b(r.value):s.error("Invites: ".concat((null===(t=r.reason)||void 0===t?void 0:t.message)||"failed to load")),"fulfilled"===c.status?N(c.value):s.error("Users: ".concat((null===(i=c.reason)||void 0===i?void 0:i.message)||"failed to load")),"fulfilled"===o.status?w(o.value):s.error("Usage: ".concat((null===(n=o.reason)||void 0===n?void 0:n.message)||"failed to load")),g(!1)}async function et(e,a){try{await (0,l.SC)("/admin/waitlist/".concat(e,"/approve"),{method:"POST"}),s.success("".concat(a," approved — invite created.")),await ea()}catch(e){es(e)}}async function ei(e,a){try{await (0,l.SC)("/admin/waitlist/".concat(e,"/reject"),{method:"POST"}),s.info("".concat(a," rejected.")),await ea()}catch(e){es(e)}}async function en(e){if(e.preventDefault(),!P){T(!0);try{await (0,l.SC)("/admin/invites",{method:"POST",body:JSON.stringify({email:k.trim(),notes:C})}),s.success("Invite sent to ".concat(k.trim())),_(""),L(""),await ea()}catch(e){es(e)}finally{T(!1)}}}async function el(e,a){try{await (0,l.SC)("/admin/invites/".concat(e,"/revoke"),{method:"POST"}),s.success("Invite for ".concat(a," revoked.")),await ea()}catch(e){es(e)}}async function ed(e,a){try{await (0,l.SC)("/admin/users/".concat(e,"/").concat(a?"disable":"enable"),{method:"POST"}),s.success(a?"User disabled.":"User enabled."),await ea()}catch(e){es(e)}}async function er(e,a){try{await (0,l.SC)("/admin/users/".concat(e,"/revoke-sessions"),{method:"POST"}),s.success("Sessions for ".concat(a," revoked.")),await ea()}catch(e){es(e)}}async function ec(e,a,t){try{await (0,l.SC)("/admin/users/".concat(e,"/").concat(t?"grant-admin":"revoke-admin"),{method:"POST"}),s.success("".concat(a," ").concat(t?"granted":"revoked"," admin.")),await ea()}catch(e){es(e)}}async function eo(e,a){try{await (0,l.SC)("/admin/users/".concat(e,"/set-unlimited?unlimited=").concat(a),{method:"POST"}),s.success(a?"User marked as unlimited.":"Unlimited removed."),await ea()}catch(e){es(e)}}async function em(e){ee(s=>({...s,[e]:!0}));try{let s=await (0,l.SC)("/admin/users/".concat(e,"/stats"));Z(a=>({...a,[e]:s}))}catch(e){s.error("Stats: ".concat(e.message||"failed"))}finally{ee(s=>({...s,[e]:!1}))}}async function eh(e,a){H(e),q(a),X(!0),K([]);try{let s=await (0,l.SC)("/admin/users/".concat(e,"/login-events"));K(s||[])}catch(e){s.error("Login IPs: ".concat(e.message||"failed to load"))}finally{X(!1)}}(0,i.useEffect)(()=>{ea()},[]);let[eu,ex]=(0,i.useState)(1),[ep,eg]=(0,i.useState)(1),[ej,ey]=(0,i.useState)(1),ev=(0,i.useCallback)(e=>{A(e),ex(1)},[]),eb=(0,i.useCallback)(e=>{M(e),eg(1)},[]),ef=(0,i.useCallback)(e=>{W(e),ey(1)},[]),eN=(0,i.useMemo)(()=>j.filter(e=>{let s=!z||e.email.toLowerCase().includes(z.toLowerCase()),a="all"===E||e.status===E;return s&&a}),[j,z,E]),eS=(0,i.useMemo)(()=>v.filter(e=>{let s=!F||e.email.toLowerCase().includes(F.toLowerCase()),a=e.revoked_at?"revoked":e.accepted_at?"accepted":"pending",t="all"===O||a===O;return s&&t}),[v,F,O]),ew=(0,i.useMemo)(()=>f.filter(e=>{let s=!R||e.email.toLowerCase().includes(R.toLowerCase());return"all"===D?s:"disabled"===D?s&&e.is_disabled:"active"===D?s&&!e.is_disabled:"admin"===D?s&&e.is_admin:"unlimited"===D?s&&e.is_unlimited:s}),[f,R,D]),ek=(0,i.useMemo)(()=>eN.slice((eu-1)*20,20*eu),[eN,eu]),e_=(0,i.useMemo)(()=>eS.slice((ep-1)*20,20*ep),[eS,ep]),eC=(0,i.useMemo)(()=>ew.slice((ej-1)*20,20*ej),[ew,ej]),eL=Math.max(...S.map(e=>e.count||0),1),eP=j.filter(e=>"pending"===e.status).length;return p?(0,t.jsxs)("div",{className:"stack-lg",children:[(0,t.jsx)(r.A,{rows:2}),(0,t.jsx)(r.A,{rows:5}),(0,t.jsx)(r.A,{rows:5})]}):(0,t.jsxs)("div",{className:"stack-lg",children:[(0,t.jsx)("section",{className:"card",children:(0,t.jsxs)("div",{className:"row spread",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"row",style:{gap:8,marginBottom:4},children:[(0,t.jsx)("h1",{style:{margin:0,fontSize:"1.4rem"},children:"Admin"}),(0,t.jsx)("span",{className:"badge badge-warn",children:"Alpha controls"})]}),(0,t.jsx)("p",{className:"muted",children:"Manage waitlist, invitations, users, and usage."})]}),(0,t.jsxs)("div",{className:"row",style:{flexWrap:"wrap",gap:6},children:[eP>0&&(0,t.jsxs)("span",{className:"badge badge-warn",children:[eP," pending"]}),(0,t.jsxs)("span",{className:"badge badge-brand",children:[f.length," users"]}),(0,t.jsxs)("span",{className:"badge badge-ok",children:[v.filter(e=>e.accepted_at&&!e.revoked_at).length," accepted"]})]})]})}),(0,t.jsx)("div",{className:"tab-bar",role:"tablist",children:m.map(e=>{let{id:s,label:i}=e;return(0,t.jsxs)("button",{role:"tab","aria-selected":a===s,className:"tab".concat(a===s?" active":""),onClick:()=>u(s),style:{position:"relative"},children:[i,"waitlist"===s&&eP>0&&(0,t.jsx)("span",{className:"badge badge-warn",style:{marginLeft:6,fontSize:"0.65rem",padding:"1px 6px"},children:eP}),a===s&&(0,t.jsx)(c.E.div,{layoutId:"activeTabIndicator",style:{position:"absolute",bottom:-2,left:0,right:0,height:2,backgroundColor:"var(--brand)",borderRadius:"2px 2px 0 0"},transition:{type:"spring",stiffness:300,damping:30}})]},s)})}),(0,t.jsxs)(o.M,{mode:"wait",children:["waitlist"===a&&(0,t.jsxs)(c.E.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h2",{style:{margin:0},children:["Waitlist",(0,t.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:eN.length})]}),(0,t.jsxs)("div",{className:"row",style:{gap:8},children:[(0,t.jsx)("input",{placeholder:"Filter by email…",value:z,onChange:e=>ev(e.target.value),style:{maxWidth:220},"aria-label":"Filter waitlist by email"}),(0,t.jsxs)("select",{value:E,onChange:e=>{I(e.target.value),ex(1)},style:{width:140},"aria-label":"Filter waitlist by status",children:[(0,t.jsx)("option",{value:"all",children:"all"}),(0,t.jsx)("option",{value:"pending",children:"pending"}),(0,t.jsx)("option",{value:"approved",children:"approved"}),(0,t.jsx)("option",{value:"rejected",children:"rejected"})]})]})]}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Submitted"}),(0,t.jsx)("th",{children:"Notes"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsxs)("tbody",{children:[0===eN.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{textAlign:"center",color:"var(--muted)",padding:20},children:z?"No entries match.":"Waitlist is empty."})}),ek.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsx)("td",{children:(0,t.jsx)(h,{status:e.status})}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.82rem"},children:e.notes||"—"}),(0,t.jsx)("td",{children:"pending"===e.status&&(0,t.jsxs)("div",{className:"td-actions",children:[(0,t.jsx)("button",{className:"btn primary sm",onClick:()=>et(e.id,e.email),children:"Approve"}),(0,t.jsx)("button",{className:"btn danger sm",onClick:()=>ei(e.id,e.email),children:"Reject"})]})})]},e.id))]})]})}),(0,t.jsx)(x,{total:eN.length,page:eu,pageSize:20,onPage:ex})]},"waitlist"),"invites"===a&&(0,t.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack-lg",children:[(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("h2",{style:{marginBottom:14},children:"Send invitation"}),(0,t.jsxs)("form",{onSubmit:en,className:"grid-2",style:{alignItems:"end"},children:[(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"inv-email",children:"Email address"}),(0,t.jsx)("input",{id:"inv-email",type:"email",required:!0,placeholder:"user@company.com",value:k,onChange:e=>_(e.target.value),disabled:P})]}),(0,t.jsxs)("div",{className:"field",children:[(0,t.jsxs)("label",{htmlFor:"inv-notes",children:["Notes ",(0,t.jsx)("span",{className:"muted",children:"(optional)"})]}),(0,t.jsx)("input",{id:"inv-notes",placeholder:"e.g. From waitlist, referral",value:C,onChange:e=>L(e.target.value),disabled:P})]}),(0,t.jsx)("div",{style:{paddingBottom:1},children:(0,t.jsxs)("button",{type:"submit",className:"btn primary",disabled:P||!k.trim(),"aria-busy":P,children:[P&&(0,t.jsx)("span",{className:"spinner"}),P?"Sending…":"Send invite"]})})]})]}),(0,t.jsxs)("section",{className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h2",{style:{margin:0},children:["Invitations",(0,t.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:eS.length})]}),(0,t.jsxs)("div",{className:"row",style:{gap:8},children:[(0,t.jsx)("input",{placeholder:"Filter by email…",value:F,onChange:e=>eb(e.target.value),style:{maxWidth:220},"aria-label":"Filter invitations by email"}),(0,t.jsxs)("select",{value:O,onChange:e=>{U(e.target.value),eg(1)},style:{width:140},"aria-label":"Filter invitations by status",children:[(0,t.jsx)("option",{value:"all",children:"all"}),(0,t.jsx)("option",{value:"pending",children:"pending"}),(0,t.jsx)("option",{value:"accepted",children:"accepted"}),(0,t.jsx)("option",{value:"revoked",children:"revoked"})]})]})]}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Expires"}),(0,t.jsx)("th",{children:"Notes"}),(0,t.jsx)("th",{})]})}),(0,t.jsxs)("tbody",{children:[0===eS.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{textAlign:"center",color:"var(--muted)",padding:20},children:"No invitations found."})}),e_.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsx)("td",{children:(0,t.jsx)(h,{status:e.revoked_at?"revoked":e.accepted_at?"accepted":"pending"})}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:new Date(e.expires_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.82rem"},children:e.notes||"—"}),(0,t.jsx)("td",{children:!e.revoked_at&&!e.accepted_at&&(0,t.jsx)("button",{className:"btn danger sm",onClick:()=>el(e.id,e.email),children:"Revoke"})})]},e.id))]})]})}),(0,t.jsx)(x,{total:eS.length,page:ep,pageSize:20,onPage:eg})]})]},"invites"),"users"===a&&(0,t.jsxs)(c.E.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h2",{style:{margin:0},children:["Users",(0,t.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:ew.length})]}),(0,t.jsxs)("div",{className:"row",style:{gap:8},children:[(0,t.jsx)("input",{placeholder:"Filter by email…",value:R,onChange:e=>ef(e.target.value),style:{maxWidth:220},"aria-label":"Filter users by email"}),(0,t.jsxs)("select",{value:D,onChange:e=>{B(e.target.value),ey(1)},style:{width:140},"aria-label":"Filter users by status",children:[(0,t.jsx)("option",{value:"all",children:"all"}),(0,t.jsx)("option",{value:"active",children:"active"}),(0,t.jsx)("option",{value:"disabled",children:"disabled"}),(0,t.jsx)("option",{value:"admin",children:"admin"}),(0,t.jsx)("option",{value:"unlimited",children:"unlimited"})]})]})]}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Roles"}),(0,t.jsx)("th",{children:"Last login"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsxs)("tbody",{children:[0===ew.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{textAlign:"center",color:"var(--muted)",padding:20},children:"No users found."})}),eC.map(e=>{let s=Y[e.id],a=void 0!==s;return(0,t.jsxs)(i.Fragment,{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsxs)("td",{style:{whiteSpace:"nowrap"},children:[e.is_admin&&(0,t.jsx)("span",{className:"badge badge-brand",style:{marginRight:4},children:"admin"}),e.is_unlimited&&(0,t.jsx)("span",{className:"badge badge-ok",title:"No daily usage limits",children:"∞ unlimited"}),!e.is_admin&&!e.is_unlimited&&(0,t.jsx)("span",{className:"muted",children:"—"})]}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:e.last_login_at?new Date(e.last_login_at).toLocaleDateString():"never"}),(0,t.jsx)("td",{children:(0,t.jsx)(h,{status:e.is_disabled?"disabled":"active"})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"td-actions",style:{flexWrap:"wrap"},children:[(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>ed(e.id,!e.is_disabled),children:e.is_disabled?"Enable":"Disable"}),(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>er(e.id,e.email),children:"Revoke sessions"}),(0,t.jsx)("button",{className:"btn sm ".concat(e.is_admin?"danger":"secondary"),onClick:()=>ec(e.id,e.email,!e.is_admin),title:e.is_admin?"Remove admin privileges":"Grant admin privileges",children:e.is_admin?"Revoke admin":"Grant admin"}),(0,t.jsx)("button",{className:"btn sm ".concat(e.is_unlimited?"danger":"secondary"),onClick:()=>eo(e.id,!e.is_unlimited),title:e.is_unlimited?"Remove unlimited limits bypass":"Remove all daily usage limits for this user",children:e.is_unlimited?"Set limited":"Set unlimited"}),(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>a?Z(s=>{let a={...s};return delete a[e.id],a}):em(e.id),title:"Toggle usage stats",children:$[e.id]?"Loading…":a?"Hide stats":"Stats"})]})})]}),a&&(0,t.jsx)("tr",{style:{background:"var(--panel-2)"},children:(0,t.jsx)("td",{colSpan:5,style:{padding:"6px 12px 10px 12px"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:"1.5rem",fontSize:"0.82rem",color:"var(--ink-2)",flexWrap:"wrap"},children:[(0,t.jsxs)("span",{children:["Total memories: ",(0,t.jsx)("strong",{style:{color:"var(--brand)"},children:s.memory_count})]}),(0,t.jsxs)("span",{children:["Today memories: ",(0,t.jsx)("strong",{children:s.today_memories})]}),(0,t.jsxs)("span",{children:["Today recalls: ",(0,t.jsx)("strong",{children:s.today_recalls})]}),(0,t.jsxs)("span",{children:["Today projects: ",(0,t.jsx)("strong",{children:s.today_projects})]})]})})})]},e.id)})]})]})}),(0,t.jsx)(x,{total:ew.length,page:ej,pageSize:20,onPage:ey})]},"users"),"login-ips"===a&&(0,t.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack-lg",children:[(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("h2",{style:{marginBottom:8},children:"Login IP History"}),(0,t.jsx)("p",{className:"muted",style:{marginBottom:16,fontSize:"0.88rem"},children:"Select a user to view their last 10 login IP addresses and timestamps. IPs are stored verbatim — no tokens, cookies, or secrets are shown."}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Last login"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{})]})}),(0,t.jsxs)("tbody",{children:[0===f.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,style:{textAlign:"center",color:"var(--muted)",padding:20},children:"No users found."})}),f.map(e=>(0,t.jsxs)("tr",{style:G===e.id?{background:"var(--panel-2)"}:{},children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:e.last_login_at?new Date(e.last_login_at).toLocaleString():"never"}),(0,t.jsx)("td",{children:(0,t.jsx)(h,{status:e.is_disabled?"disabled":"active"})}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{className:"btn sm ".concat(G===e.id?"primary":"secondary"),onClick:()=>eh(e.id,e.email),"aria-pressed":G===e.id,children:G===e.id?"Viewing":"View IPs"})})]},e.id))]})]})})]}),null!==G&&(0,t.jsxs)("section",{className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h3",{style:{margin:0},children:["Login events for"," ",(0,t.jsx)("span",{className:"mono",style:{fontSize:"0.9em"},children:V})]}),(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>eh(G,V),disabled:Q,children:Q?"Loading…":"Refresh"})]}),Q?(0,t.jsx)("p",{className:"muted",children:"Loading…"}):0===J.length?(0,t.jsx)("p",{className:"muted",children:"No login events recorded for this user."}):(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"#"}),(0,t.jsx)("th",{children:"IP Address"}),(0,t.jsx)("th",{children:"Date & Time (UTC)"}),(0,t.jsx)("th",{children:"User Agent"})]})}),(0,t.jsx)("tbody",{children:J.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:s+1}),(0,t.jsx)("td",{className:"mono",style:{fontSize:"0.88rem"},children:e.ip}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:new Date(e.created_at).toUTCString()}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.75rem",maxWidth:280,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.user_agent||"",children:e.user_agent||"—"})]},e.id))})]})}),(0,t.jsx)("p",{className:"muted",style:{fontSize:"0.75rem",marginTop:10},children:"Showing up to 10 most recent login events. Older records are automatically deleted."})]})]},"login-ips"),"usage"===a&&(0,t.jsxs)(c.E.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,t.jsx)("h2",{style:{marginBottom:16},children:"Usage — last 30 days"}),0===S.length?(0,t.jsx)("p",{className:"muted",children:"No usage events recorded yet."}):(0,t.jsx)("div",{className:"usage-chart",children:S.map((e,s)=>(0,t.jsxs)("div",{className:"usage-bar-row",children:[(0,t.jsx)("span",{className:"usage-bar-label",title:"".concat(e.date," \xb7 ").concat(e.event_type),children:e.event_type}),(0,t.jsx)("div",{className:"usage-bar-track","aria-label":"".concat(e.count," events"),children:(0,t.jsx)("div",{className:"usage-bar-fill",style:{width:"".concat(Math.round(e.count/eL*100),"%")}})}),(0,t.jsx)("span",{className:"usage-bar-count",children:e.count})]},"".concat(e.date,"-").concat(s)))})]},"usage")]})]})}function x(e){let{total:s,page:a,pageSize:i,onPage:n}=e,l=Math.ceil(s/i);if(l<=1)return null;let d=Math.min(a*i,s);return(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:12,marginTop:8,borderTop:"1px solid var(--line)",fontSize:"0.8rem",color:"var(--ink-2)"},children:[(0,t.jsxs)("span",{children:[(a-1)*i+1,"–",d," of ",s]}),(0,t.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,t.jsx)("button",{className:"btn ghost sm",disabled:a<=1,onClick:()=>n(1),title:"First page",style:{padding:"2px 8px"},children:"\xab"}),(0,t.jsx)("button",{className:"btn ghost sm",disabled:a<=1,onClick:()=>n(a-1),title:"Previous page",style:{padding:"2px 8px"},children:"‹"}),(0,t.jsxs)("span",{style:{padding:"2px 8px",color:"var(--ink)",fontWeight:600},children:[a," / ",l]}),(0,t.jsx)("button",{className:"btn ghost sm",disabled:a>=l,onClick:()=>n(a+1),title:"Next page",style:{padding:"2px 8px"},children:"›"}),(0,t.jsx)("button",{className:"btn ghost sm",disabled:a>=l,onClick:()=>n(l),title:"Last page",style:{padding:"2px 8px"},children:"\xbb"})]})]})}}},function(e){e.O(0,[596,927,971,117,744],function(){return e(e.s=2751)}),_N_E=e.O()}]);