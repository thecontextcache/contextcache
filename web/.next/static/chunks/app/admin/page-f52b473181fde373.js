(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{2751:function(e,s,a){Promise.resolve().then(a.bind(a,2598))},2598:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return u}});var t=a(7437),i=a(2265),n=a(9376),l=a(3113),d=a(5110),r=a(935),c=a(9596),o=a(7586);let m=[{id:"waitlist",label:"Waitlist"},{id:"invites",label:"Invites"},{id:"users",label:"Users"},{id:"login-ips",label:"Login IPs"},{id:"usage",label:"Usage"}];function h(e){let{status:s}=e;return(0,t.jsx)("span",{className:"badge ".concat({pending:"badge-warn",approved:"badge-ok",rejected:"badge-danger",active:"badge-ok",disabled:"badge-danger",accepted:"badge-ok",revoked:"badge-danger"}[s]||"badge-brand"),children:s})}function u(){let e=(0,n.useRouter)(),s=(0,d.p)(),[a,u]=(0,i.useState)("waitlist"),[p,g]=(0,i.useState)(!1),[j,y]=(0,i.useState)(!0),[v,b]=(0,i.useState)([]),[f,N]=(0,i.useState)([]),[S,w]=(0,i.useState)([]),[k,_]=(0,i.useState)([]),[C,L]=(0,i.useState)(""),[P,T]=(0,i.useState)(""),[z,A]=(0,i.useState)(!1),[E,I]=(0,i.useState)(""),[F,M]=(0,i.useState)("all"),[O,U]=(0,i.useState)(""),[R,W]=(0,i.useState)("all"),[D,B]=(0,i.useState)(""),[G,H]=(0,i.useState)("all"),[V,q]=(0,i.useState)(null),[J,K]=(0,i.useState)(""),[Q,X]=(0,i.useState)([]),[Y,Z]=(0,i.useState)(!1),[$,ee]=(0,i.useState)({}),[es,ea]=(0,i.useState)({});function et(a){if(a instanceof l.MS){if("auth"===a.kind){e.replace("/auth?reason=expired");return}if("forbidden"===a.kind){e.replace("/app");return}}s.error(a.message||"Something went wrong.")}async function ei(){var a,t,i,n;y(!0);try{if(!(await (0,l.SC)("/auth/me")).is_admin){e.replace("/app");return}g(!0)}catch(e){et(e),e instanceof l.MS&&("auth"===e.kind||"forbidden"===e.kind)||y(!1);return}let[d,r,c,o]=await Promise.allSettled([(0,l.SC)("/admin/waitlist"),(0,l.SC)("/admin/invites"),(0,l.SC)("/admin/users"),(0,l.SC)("/admin/usage")]);"fulfilled"===d.status?b(d.value):s.error("Waitlist: ".concat((null===(a=d.reason)||void 0===a?void 0:a.message)||"failed to load")),"fulfilled"===r.status?N(r.value):s.error("Invites: ".concat((null===(t=r.reason)||void 0===t?void 0:t.message)||"failed to load")),"fulfilled"===c.status?w(c.value):s.error("Users: ".concat((null===(i=c.reason)||void 0===i?void 0:i.message)||"failed to load")),"fulfilled"===o.status?_(o.value):s.error("Usage: ".concat((null===(n=o.reason)||void 0===n?void 0:n.message)||"failed to load")),y(!1)}async function en(e,a){try{await (0,l.SC)("/admin/waitlist/".concat(e,"/approve"),{method:"POST"}),s.success("".concat(a," approved — invite created.")),await ei()}catch(e){et(e)}}async function el(e,a){try{await (0,l.SC)("/admin/waitlist/".concat(e,"/reject"),{method:"POST"}),s.info("".concat(a," rejected.")),await ei()}catch(e){et(e)}}async function ed(e){if(e.preventDefault(),!z){A(!0);try{await (0,l.SC)("/admin/invites",{method:"POST",body:JSON.stringify({email:C.trim(),notes:P})}),s.success("Invite sent to ".concat(C.trim())),L(""),T(""),await ei()}catch(e){et(e)}finally{A(!1)}}}async function er(e,a){try{await (0,l.SC)("/admin/invites/".concat(e,"/revoke"),{method:"POST"}),s.success("Invite for ".concat(a," revoked.")),await ei()}catch(e){et(e)}}async function ec(e,a){try{await (0,l.SC)("/admin/users/".concat(e,"/").concat(a?"disable":"enable"),{method:"POST"}),s.success(a?"User disabled.":"User enabled."),await ei()}catch(e){et(e)}}async function eo(e,a){try{await (0,l.SC)("/admin/users/".concat(e,"/revoke-sessions"),{method:"POST"}),s.success("Sessions for ".concat(a," revoked.")),await ei()}catch(e){et(e)}}async function em(e,a,t){try{await (0,l.SC)("/admin/users/".concat(e,"/").concat(t?"grant-admin":"revoke-admin"),{method:"POST"}),s.success("".concat(a," ").concat(t?"granted":"revoked"," admin.")),await ei()}catch(e){et(e)}}async function eh(e,a){try{await (0,l.SC)("/admin/users/".concat(e,"/set-unlimited?unlimited=").concat(a),{method:"POST"}),s.success(a?"User marked as unlimited.":"Unlimited removed."),await ei()}catch(e){et(e)}}async function eu(e){ea(s=>({...s,[e]:!0}));try{let s=await (0,l.SC)("/admin/users/".concat(e,"/stats"));ee(a=>({...a,[e]:s}))}catch(e){s.error("Stats: ".concat(e.message||"failed"))}finally{ea(s=>({...s,[e]:!1}))}}async function ex(e,a){q(e),K(a),Z(!0),X([]);try{let s=await (0,l.SC)("/admin/users/".concat(e,"/login-events"));X(s||[])}catch(e){s.error("Login IPs: ".concat(e.message||"failed to load"))}finally{Z(!1)}}(0,i.useEffect)(()=>{ei()},[]);let[ep,eg]=(0,i.useState)(1),[ej,ey]=(0,i.useState)(1),[ev,eb]=(0,i.useState)(1),ef=(0,i.useCallback)(e=>{I(e),eg(1)},[]),eN=(0,i.useCallback)(e=>{U(e),ey(1)},[]),eS=(0,i.useCallback)(e=>{B(e),eb(1)},[]),ew=(0,i.useMemo)(()=>v.filter(e=>{let s=!E||e.email.toLowerCase().includes(E.toLowerCase()),a="all"===F||e.status===F;return s&&a}),[v,E,F]),ek=(0,i.useMemo)(()=>f.filter(e=>{let s=!O||e.email.toLowerCase().includes(O.toLowerCase()),a=e.revoked_at?"revoked":e.accepted_at?"accepted":"pending",t="all"===R||a===R;return s&&t}),[f,O,R]),e_=(0,i.useMemo)(()=>S.filter(e=>{let s=!D||e.email.toLowerCase().includes(D.toLowerCase());return"all"===G?s:"disabled"===G?s&&e.is_disabled:"active"===G?s&&!e.is_disabled:"admin"===G?s&&e.is_admin:"unlimited"===G?s&&e.is_unlimited:s}),[S,D,G]),eC=(0,i.useMemo)(()=>ew.slice((ep-1)*20,20*ep),[ew,ep]),eL=(0,i.useMemo)(()=>ek.slice((ej-1)*20,20*ej),[ek,ej]),eP=(0,i.useMemo)(()=>e_.slice((ev-1)*20,20*ev),[e_,ev]),eT=Math.max(...k.map(e=>e.count||0),1),ez=v.filter(e=>"pending"===e.status).length;return j||!p?(0,t.jsxs)("div",{className:"stack-lg",children:[(0,t.jsx)(r.A,{rows:2}),(0,t.jsx)(r.A,{rows:5}),(0,t.jsx)(r.A,{rows:5})]}):(0,t.jsxs)("div",{className:"stack-lg",children:[(0,t.jsx)("section",{className:"card",children:(0,t.jsxs)("div",{className:"row spread",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"row",style:{gap:8,marginBottom:4},children:[(0,t.jsx)("h1",{style:{margin:0,fontSize:"1.4rem"},children:"Admin"}),(0,t.jsx)("span",{className:"badge badge-warn",children:"Alpha controls"})]}),(0,t.jsx)("p",{className:"muted",children:"Manage waitlist, invitations, users, and usage."})]}),(0,t.jsxs)("div",{className:"row",style:{flexWrap:"wrap",gap:6},children:[ez>0&&(0,t.jsxs)("span",{className:"badge badge-warn",children:[ez," pending"]}),(0,t.jsxs)("span",{className:"badge badge-brand",children:[S.length," users"]}),(0,t.jsxs)("span",{className:"badge badge-ok",children:[f.filter(e=>e.accepted_at&&!e.revoked_at).length," accepted"]})]})]})}),(0,t.jsx)("div",{className:"tab-bar",role:"tablist",children:m.map(e=>{let{id:s,label:i}=e;return(0,t.jsxs)("button",{role:"tab","aria-selected":a===s,className:"tab".concat(a===s?" active":""),onClick:()=>u(s),style:{position:"relative"},children:[i,"waitlist"===s&&ez>0&&(0,t.jsx)("span",{className:"badge badge-warn",style:{marginLeft:6,fontSize:"0.65rem",padding:"1px 6px"},children:ez}),a===s&&(0,t.jsx)(c.E.div,{layoutId:"activeTabIndicator",style:{position:"absolute",bottom:-2,left:0,right:0,height:2,backgroundColor:"var(--brand)",borderRadius:"2px 2px 0 0"},transition:{type:"spring",stiffness:300,damping:30}})]},s)})}),(0,t.jsxs)(o.M,{mode:"wait",children:["waitlist"===a&&(0,t.jsxs)(c.E.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h2",{style:{margin:0},children:["Waitlist",(0,t.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:ew.length})]}),(0,t.jsxs)("div",{className:"row",style:{gap:8},children:[(0,t.jsx)("input",{placeholder:"Filter by email…",value:E,onChange:e=>ef(e.target.value),style:{maxWidth:220},"aria-label":"Filter waitlist by email"}),(0,t.jsxs)("select",{value:F,onChange:e=>{M(e.target.value),eg(1)},style:{width:140},"aria-label":"Filter waitlist by status",children:[(0,t.jsx)("option",{value:"all",children:"all"}),(0,t.jsx)("option",{value:"pending",children:"pending"}),(0,t.jsx)("option",{value:"approved",children:"approved"}),(0,t.jsx)("option",{value:"rejected",children:"rejected"})]})]})]}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Submitted"}),(0,t.jsx)("th",{children:"Notes"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsxs)("tbody",{children:[0===ew.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{textAlign:"center",color:"var(--muted)",padding:20},children:E?"No entries match.":"Waitlist is empty."})}),eC.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsx)("td",{children:(0,t.jsx)(h,{status:e.status})}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.82rem"},children:e.notes||"—"}),(0,t.jsx)("td",{children:"pending"===e.status&&(0,t.jsxs)("div",{className:"td-actions",children:[(0,t.jsx)("button",{className:"btn primary sm",onClick:()=>en(e.id,e.email),children:"Approve"}),(0,t.jsx)("button",{className:"btn danger sm",onClick:()=>el(e.id,e.email),children:"Reject"})]})})]},e.id))]})]})}),(0,t.jsx)(x,{total:ew.length,page:ep,pageSize:20,onPage:eg})]},"waitlist"),"invites"===a&&(0,t.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack-lg",children:[(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("h2",{style:{marginBottom:14},children:"Send invitation"}),(0,t.jsxs)("form",{onSubmit:ed,className:"grid-2",style:{alignItems:"end"},children:[(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"inv-email",children:"Email address"}),(0,t.jsx)("input",{id:"inv-email",type:"email",required:!0,placeholder:"user@company.com",value:C,onChange:e=>L(e.target.value),disabled:z})]}),(0,t.jsxs)("div",{className:"field",children:[(0,t.jsxs)("label",{htmlFor:"inv-notes",children:["Notes ",(0,t.jsx)("span",{className:"muted",children:"(optional)"})]}),(0,t.jsx)("input",{id:"inv-notes",placeholder:"e.g. From waitlist, referral",value:P,onChange:e=>T(e.target.value),disabled:z})]}),(0,t.jsx)("div",{style:{paddingBottom:1},children:(0,t.jsxs)("button",{type:"submit",className:"btn primary",disabled:z||!C.trim(),"aria-busy":z,children:[z&&(0,t.jsx)("span",{className:"spinner"}),z?"Sending…":"Send invite"]})})]})]}),(0,t.jsxs)("section",{className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h2",{style:{margin:0},children:["Invitations",(0,t.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:ek.length})]}),(0,t.jsxs)("div",{className:"row",style:{gap:8},children:[(0,t.jsx)("input",{placeholder:"Filter by email…",value:O,onChange:e=>eN(e.target.value),style:{maxWidth:220},"aria-label":"Filter invitations by email"}),(0,t.jsxs)("select",{value:R,onChange:e=>{W(e.target.value),ey(1)},style:{width:140},"aria-label":"Filter invitations by status",children:[(0,t.jsx)("option",{value:"all",children:"all"}),(0,t.jsx)("option",{value:"pending",children:"pending"}),(0,t.jsx)("option",{value:"accepted",children:"accepted"}),(0,t.jsx)("option",{value:"revoked",children:"revoked"})]})]})]}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Expires"}),(0,t.jsx)("th",{children:"Notes"}),(0,t.jsx)("th",{})]})}),(0,t.jsxs)("tbody",{children:[0===ek.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{textAlign:"center",color:"var(--muted)",padding:20},children:"No invitations found."})}),eL.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsx)("td",{children:(0,t.jsx)(h,{status:e.revoked_at?"revoked":e.accepted_at?"accepted":"pending"})}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:new Date(e.expires_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.82rem"},children:e.notes||"—"}),(0,t.jsx)("td",{children:!e.revoked_at&&!e.accepted_at&&(0,t.jsx)("button",{className:"btn danger sm",onClick:()=>er(e.id,e.email),children:"Revoke"})})]},e.id))]})]})}),(0,t.jsx)(x,{total:ek.length,page:ej,pageSize:20,onPage:ey})]})]},"invites"),"users"===a&&(0,t.jsxs)(c.E.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h2",{style:{margin:0},children:["Users",(0,t.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:e_.length})]}),(0,t.jsxs)("div",{className:"row",style:{gap:8},children:[(0,t.jsx)("input",{placeholder:"Filter by email…",value:D,onChange:e=>eS(e.target.value),style:{maxWidth:220},"aria-label":"Filter users by email"}),(0,t.jsxs)("select",{value:G,onChange:e=>{H(e.target.value),eb(1)},style:{width:140},"aria-label":"Filter users by status",children:[(0,t.jsx)("option",{value:"all",children:"all"}),(0,t.jsx)("option",{value:"active",children:"active"}),(0,t.jsx)("option",{value:"disabled",children:"disabled"}),(0,t.jsx)("option",{value:"admin",children:"admin"}),(0,t.jsx)("option",{value:"unlimited",children:"unlimited"})]})]})]}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Roles"}),(0,t.jsx)("th",{children:"Last login"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsxs)("tbody",{children:[0===e_.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{textAlign:"center",color:"var(--muted)",padding:20},children:"No users found."})}),eP.map(e=>{let s=$[e.id],a=void 0!==s;return(0,t.jsxs)(i.Fragment,{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsxs)("td",{style:{whiteSpace:"nowrap"},children:[e.is_admin&&(0,t.jsx)("span",{className:"badge badge-brand",style:{marginRight:4},children:"admin"}),e.is_unlimited&&(0,t.jsx)("span",{className:"badge badge-ok",title:"No daily usage limits",children:"∞ unlimited"}),!e.is_admin&&!e.is_unlimited&&(0,t.jsx)("span",{className:"muted",children:"—"})]}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:e.last_login_at?new Date(e.last_login_at).toLocaleDateString():"never"}),(0,t.jsx)("td",{children:(0,t.jsx)(h,{status:e.is_disabled?"disabled":"active"})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"td-actions",style:{flexWrap:"wrap"},children:[(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>ec(e.id,!e.is_disabled),children:e.is_disabled?"Enable":"Disable"}),(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>eo(e.id,e.email),children:"Revoke sessions"}),(0,t.jsx)("button",{className:"btn sm ".concat(e.is_admin?"danger":"secondary"),onClick:()=>em(e.id,e.email,!e.is_admin),title:e.is_admin?"Remove admin privileges":"Grant admin privileges",children:e.is_admin?"Revoke admin":"Grant admin"}),(0,t.jsx)("button",{className:"btn sm ".concat(e.is_unlimited?"danger":"secondary"),onClick:()=>eh(e.id,!e.is_unlimited),title:e.is_unlimited?"Remove unlimited limits bypass":"Remove all daily usage limits for this user",children:e.is_unlimited?"Set limited":"Set unlimited"}),(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>a?ee(s=>{let a={...s};return delete a[e.id],a}):eu(e.id),title:"Toggle usage stats",children:es[e.id]?"Loading…":a?"Hide stats":"Stats"})]})})]}),a&&(0,t.jsx)("tr",{style:{background:"var(--panel-2)"},children:(0,t.jsx)("td",{colSpan:5,style:{padding:"6px 12px 10px 12px"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:"1.5rem",fontSize:"0.82rem",color:"var(--ink-2)",flexWrap:"wrap"},children:[(0,t.jsxs)("span",{children:["Total memories: ",(0,t.jsx)("strong",{style:{color:"var(--brand)"},children:s.memory_count})]}),(0,t.jsxs)("span",{children:["Today memories: ",(0,t.jsx)("strong",{children:s.today_memories})]}),(0,t.jsxs)("span",{children:["Today recalls: ",(0,t.jsx)("strong",{children:s.today_recalls})]}),(0,t.jsxs)("span",{children:["Today projects: ",(0,t.jsx)("strong",{children:s.today_projects})]})]})})})]},e.id)})]})]})}),(0,t.jsx)(x,{total:e_.length,page:ev,pageSize:20,onPage:eb})]},"users"),"login-ips"===a&&(0,t.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack-lg",children:[(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("h2",{style:{marginBottom:8},children:"Login IP History"}),(0,t.jsx)("p",{className:"muted",style:{marginBottom:16,fontSize:"0.88rem"},children:"Select a user to view their last 10 login IP addresses and timestamps. IPs are stored verbatim — no tokens, cookies, or secrets are shown."}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Last login"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{})]})}),(0,t.jsxs)("tbody",{children:[0===S.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,style:{textAlign:"center",color:"var(--muted)",padding:20},children:"No users found."})}),S.map(e=>(0,t.jsxs)("tr",{style:V===e.id?{background:"var(--panel-2)"}:{},children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:e.last_login_at?new Date(e.last_login_at).toLocaleString():"never"}),(0,t.jsx)("td",{children:(0,t.jsx)(h,{status:e.is_disabled?"disabled":"active"})}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{className:"btn sm ".concat(V===e.id?"primary":"secondary"),onClick:()=>ex(e.id,e.email),"aria-pressed":V===e.id,children:V===e.id?"Viewing":"View IPs"})})]},e.id))]})]})})]}),null!==V&&(0,t.jsxs)("section",{className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h3",{style:{margin:0},children:["Login events for"," ",(0,t.jsx)("span",{className:"mono",style:{fontSize:"0.9em"},children:J})]}),(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>ex(V,J),disabled:Y,children:Y?"Loading…":"Refresh"})]}),Y?(0,t.jsx)("p",{className:"muted",children:"Loading…"}):0===Q.length?(0,t.jsx)("p",{className:"muted",children:"No login events recorded for this user."}):(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"#"}),(0,t.jsx)("th",{children:"IP Address"}),(0,t.jsx)("th",{children:"Date & Time (UTC)"}),(0,t.jsx)("th",{children:"User Agent"})]})}),(0,t.jsx)("tbody",{children:Q.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:s+1}),(0,t.jsx)("td",{className:"mono",style:{fontSize:"0.88rem"},children:e.ip}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:new Date(e.created_at).toUTCString()}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.75rem",maxWidth:280,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.user_agent||"",children:e.user_agent||"—"})]},e.id))})]})}),(0,t.jsx)("p",{className:"muted",style:{fontSize:"0.75rem",marginTop:10},children:"Showing up to 10 most recent login events. Older records are automatically deleted."})]})]},"login-ips"),"usage"===a&&(0,t.jsxs)(c.E.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,t.jsx)("h2",{style:{marginBottom:16},children:"Usage — last 30 days"}),0===k.length?(0,t.jsx)("p",{className:"muted",children:"No usage events recorded yet."}):(0,t.jsx)("div",{className:"usage-chart",children:k.map((e,s)=>(0,t.jsxs)("div",{className:"usage-bar-row",children:[(0,t.jsx)("span",{className:"usage-bar-label",title:"".concat(e.date," \xb7 ").concat(e.event_type),children:e.event_type}),(0,t.jsx)("div",{className:"usage-bar-track","aria-label":"".concat(e.count," events"),children:(0,t.jsx)("div",{className:"usage-bar-fill",style:{width:"".concat(Math.round(e.count/eT*100),"%")}})}),(0,t.jsx)("span",{className:"usage-bar-count",children:e.count})]},"".concat(e.date,"-").concat(s)))})]},"usage")]})]})}function x(e){let{total:s,page:a,pageSize:i,onPage:n}=e,l=Math.ceil(s/i);if(l<=1)return null;let d=Math.min(a*i,s);return(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:12,marginTop:8,borderTop:"1px solid var(--line)",fontSize:"0.8rem",color:"var(--ink-2)"},children:[(0,t.jsxs)("span",{children:[(a-1)*i+1,"–",d," of ",s]}),(0,t.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,t.jsx)("button",{className:"btn ghost sm",disabled:a<=1,onClick:()=>n(1),title:"First page",style:{padding:"2px 8px"},children:"\xab"}),(0,t.jsx)("button",{className:"btn ghost sm",disabled:a<=1,onClick:()=>n(a-1),title:"Previous page",style:{padding:"2px 8px"},children:"‹"}),(0,t.jsxs)("span",{style:{padding:"2px 8px",color:"var(--ink)",fontWeight:600},children:[a," / ",l]}),(0,t.jsx)("button",{className:"btn ghost sm",disabled:a>=l,onClick:()=>n(a+1),title:"Next page",style:{padding:"2px 8px"},children:"›"}),(0,t.jsx)("button",{className:"btn ghost sm",disabled:a>=l,onClick:()=>n(l),title:"Last page",style:{padding:"2px 8px"},children:"\xbb"})]})]})}}},function(e){e.O(0,[596,927,971,117,744],function(){return e(e.s=2751)}),_N_E=e.O()}]);