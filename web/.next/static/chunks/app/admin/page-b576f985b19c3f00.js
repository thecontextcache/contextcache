(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{2751:function(e,a,s){Promise.resolve().then(s.bind(s,2598))},2598:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return x},dynamic:function(){return m}});var t=s(7437),i=s(2265),n=s(9376),l=s(3113),d=s(5110),r=s(935),c=s(4924),o=s(7586);let m="force-dynamic",h=[{id:"waitlist",label:"Waitlist"},{id:"invites",label:"Invites"},{id:"users",label:"Users"},{id:"login-ips",label:"Login IPs"},{id:"usage",label:"Usage"}];function u(e){let{status:a}=e;return(0,t.jsx)("span",{className:"badge ".concat({pending:"badge-warn",approved:"badge-ok",rejected:"badge-danger",active:"badge-ok",disabled:"badge-danger",accepted:"badge-ok",revoked:"badge-danger"}[a]||"badge-brand"),children:a})}function x(){let e=(0,n.useRouter)(),a=(0,d.p)(),[s,m]=(0,i.useState)("waitlist"),[x,g]=(0,i.useState)(!1),[j,y]=(0,i.useState)(!0),[v,b]=(0,i.useState)([]),[f,N]=(0,i.useState)([]),[S,w]=(0,i.useState)([]),[k,_]=(0,i.useState)([]),[C,L]=(0,i.useState)(""),[T,P]=(0,i.useState)(""),[z,A]=(0,i.useState)(!1),[E,I]=(0,i.useState)(""),[F,M]=(0,i.useState)("all"),[O,R]=(0,i.useState)(""),[U,W]=(0,i.useState)("all"),[D,B]=(0,i.useState)(""),[G,H]=(0,i.useState)("all"),[V,q]=(0,i.useState)(null),[J,K]=(0,i.useState)(""),[Q,X]=(0,i.useState)([]),[Y,Z]=(0,i.useState)(!1),[$,ee]=(0,i.useState)({}),[ea,es]=(0,i.useState)({});function et(s){if(s instanceof l.MS){if("auth"===s.kind){e.replace("/auth?reason=expired");return}if("forbidden"===s.kind){e.replace("/app");return}}a.error(s.message||"Something went wrong.")}async function ei(){var s,t,i,n;y(!0);try{if(!(await (0,l.SC)("/auth/me")).is_admin){e.replace("/app");return}g(!0)}catch(e){et(e),e instanceof l.MS&&("auth"===e.kind||"forbidden"===e.kind)||y(!1);return}let[d,r,c,o]=await Promise.allSettled([(0,l.SC)("/admin/waitlist"),(0,l.SC)("/admin/invites"),(0,l.SC)("/admin/users"),(0,l.SC)("/admin/usage")]);"fulfilled"===d.status?b(d.value):a.error("Waitlist: ".concat((null===(s=d.reason)||void 0===s?void 0:s.message)||"failed to load")),"fulfilled"===r.status?N(r.value):a.error("Invites: ".concat((null===(t=r.reason)||void 0===t?void 0:t.message)||"failed to load")),"fulfilled"===c.status?w(c.value):a.error("Users: ".concat((null===(i=c.reason)||void 0===i?void 0:i.message)||"failed to load")),"fulfilled"===o.status?_(o.value):a.error("Usage: ".concat((null===(n=o.reason)||void 0===n?void 0:n.message)||"failed to load")),y(!1)}async function en(e,s){try{await (0,l.SC)("/admin/waitlist/".concat(e,"/approve"),{method:"POST"}),a.success("".concat(s," approved — invite created.")),await ei()}catch(e){et(e)}}async function el(e,s){try{await (0,l.SC)("/admin/waitlist/".concat(e,"/reject"),{method:"POST"}),a.info("".concat(s," rejected.")),await ei()}catch(e){et(e)}}async function ed(e){if(e.preventDefault(),!z){A(!0);try{await (0,l.SC)("/admin/invites",{method:"POST",body:JSON.stringify({email:C.trim(),notes:T})}),a.success("Invite sent to ".concat(C.trim())),L(""),P(""),await ei()}catch(e){et(e)}finally{A(!1)}}}async function er(e,s){try{await (0,l.SC)("/admin/invites/".concat(e,"/revoke"),{method:"POST"}),a.success("Invite for ".concat(s," revoked.")),await ei()}catch(e){et(e)}}async function ec(e,s){try{await (0,l.SC)("/admin/users/".concat(e,"/").concat(s?"disable":"enable"),{method:"POST"}),a.success(s?"User disabled.":"User enabled."),await ei()}catch(e){et(e)}}async function eo(e,s){try{await (0,l.SC)("/admin/users/".concat(e,"/revoke-sessions"),{method:"POST"}),a.success("Sessions for ".concat(s," revoked.")),await ei()}catch(e){et(e)}}async function em(e,s,t){try{await (0,l.SC)("/admin/users/".concat(e,"/").concat(t?"grant-admin":"revoke-admin"),{method:"POST"}),a.success("".concat(s," ").concat(t?"granted":"revoked"," admin.")),await ei()}catch(e){et(e)}}async function eh(e,s){try{await (0,l.SC)("/admin/users/".concat(e,"/set-unlimited?unlimited=").concat(s),{method:"POST"}),a.success(s?"User marked as unlimited.":"Unlimited removed."),await ei()}catch(e){et(e)}}async function eu(e){es(a=>({...a,[e]:!0}));try{let a=await (0,l.SC)("/admin/users/".concat(e,"/stats"));ee(s=>({...s,[e]:a}))}catch(e){a.error("Stats: ".concat(e.message||"failed"))}finally{es(a=>({...a,[e]:!1}))}}async function ex(e,s){q(e),K(s),Z(!0),X([]);try{let a=await (0,l.SC)("/admin/users/".concat(e,"/login-events"));X(a||[])}catch(e){a.error("Login IPs: ".concat(e.message||"failed to load"))}finally{Z(!1)}}(0,i.useEffect)(()=>{ei()},[]);let[ep,eg]=(0,i.useState)(1),[ej,ey]=(0,i.useState)(1),[ev,eb]=(0,i.useState)(1),ef=(0,i.useCallback)(e=>{I(e),eg(1)},[]),eN=(0,i.useCallback)(e=>{R(e),ey(1)},[]),eS=(0,i.useCallback)(e=>{B(e),eb(1)},[]),ew=(0,i.useMemo)(()=>v.filter(e=>{let a=!E||e.email.toLowerCase().includes(E.toLowerCase()),s="all"===F||e.status===F;return a&&s}),[v,E,F]),ek=(0,i.useMemo)(()=>f.filter(e=>{let a=!O||e.email.toLowerCase().includes(O.toLowerCase()),s=e.revoked_at?"revoked":e.accepted_at?"accepted":"pending",t="all"===U||s===U;return a&&t}),[f,O,U]),e_=(0,i.useMemo)(()=>S.filter(e=>{let a=!D||e.email.toLowerCase().includes(D.toLowerCase());return"all"===G?a:"disabled"===G?a&&e.is_disabled:"active"===G?a&&!e.is_disabled:"admin"===G?a&&e.is_admin:"unlimited"===G?a&&e.is_unlimited:a}),[S,D,G]),eC=(0,i.useMemo)(()=>ew.slice((ep-1)*20,20*ep),[ew,ep]),eL=(0,i.useMemo)(()=>ek.slice((ej-1)*20,20*ej),[ek,ej]),eT=(0,i.useMemo)(()=>e_.slice((ev-1)*20,20*ev),[e_,ev]),eP=Math.max(...k.map(e=>e.count||0),1),ez=v.filter(e=>"pending"===e.status).length;return j||!x?(0,t.jsxs)("div",{className:"stack-lg",children:[(0,t.jsx)(r.A,{rows:2}),(0,t.jsx)(r.A,{rows:5}),(0,t.jsx)(r.A,{rows:5})]}):(0,t.jsxs)("div",{className:"stack-lg",children:[(0,t.jsx)("section",{className:"card",children:(0,t.jsxs)("div",{className:"row spread",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"row",style:{gap:8,marginBottom:4},children:[(0,t.jsx)("h1",{style:{margin:0,fontSize:"1.4rem"},children:"Admin"}),(0,t.jsx)("span",{className:"badge badge-warn",children:"Alpha controls"})]}),(0,t.jsx)("p",{className:"muted",children:"Manage waitlist, invitations, users, and usage."})]}),(0,t.jsxs)("div",{className:"row",style:{flexWrap:"wrap",gap:6},children:[ez>0&&(0,t.jsxs)("span",{className:"badge badge-warn",children:[ez," pending"]}),(0,t.jsxs)("span",{className:"badge badge-brand",children:[S.length," users"]}),(0,t.jsxs)("span",{className:"badge badge-ok",children:[f.filter(e=>e.accepted_at&&!e.revoked_at).length," accepted"]})]})]})}),(0,t.jsx)("div",{className:"tab-bar",role:"tablist",children:h.map(e=>{let{id:a,label:i}=e;return(0,t.jsxs)("button",{role:"tab","aria-selected":s===a,className:"tab".concat(s===a?" active":""),onClick:()=>m(a),style:{position:"relative"},children:[i,"waitlist"===a&&ez>0&&(0,t.jsx)("span",{className:"badge badge-warn",style:{marginLeft:6,fontSize:"0.65rem",padding:"1px 6px"},children:ez}),s===a&&(0,t.jsx)(c.E.div,{layoutId:"activeTabIndicator",style:{position:"absolute",bottom:-2,left:0,right:0,height:2,backgroundColor:"var(--brand)",borderRadius:"2px 2px 0 0"},transition:{type:"spring",stiffness:300,damping:30}})]},a)})}),(0,t.jsxs)(o.M,{mode:"wait",children:["waitlist"===s&&(0,t.jsxs)(c.E.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h2",{style:{margin:0},children:["Waitlist",(0,t.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:ew.length})]}),(0,t.jsxs)("div",{className:"row",style:{gap:8},children:[(0,t.jsx)("input",{placeholder:"Filter by email…",value:E,onChange:e=>ef(e.target.value),style:{maxWidth:220},"aria-label":"Filter waitlist by email"}),(0,t.jsxs)("select",{value:F,onChange:e=>{M(e.target.value),eg(1)},style:{width:140},"aria-label":"Filter waitlist by status",children:[(0,t.jsx)("option",{value:"all",children:"all"}),(0,t.jsx)("option",{value:"pending",children:"pending"}),(0,t.jsx)("option",{value:"approved",children:"approved"}),(0,t.jsx)("option",{value:"rejected",children:"rejected"})]})]})]}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Submitted"}),(0,t.jsx)("th",{children:"Notes"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsxs)("tbody",{children:[0===ew.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{textAlign:"center",color:"var(--muted)",padding:20},children:E?"No entries match.":"Waitlist is empty."})}),eC.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsx)("td",{children:(0,t.jsx)(u,{status:e.status})}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.82rem"},children:e.notes||"—"}),(0,t.jsx)("td",{children:"pending"===e.status&&(0,t.jsxs)("div",{className:"td-actions",children:[(0,t.jsx)("button",{className:"btn primary sm",onClick:()=>en(e.id,e.email),children:"Approve"}),(0,t.jsx)("button",{className:"btn danger sm",onClick:()=>el(e.id,e.email),children:"Reject"})]})})]},e.id))]})]})}),(0,t.jsx)(p,{total:ew.length,page:ep,pageSize:20,onPage:eg})]},"waitlist"),"invites"===s&&(0,t.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack-lg",children:[(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("h2",{style:{marginBottom:14},children:"Send invitation"}),(0,t.jsxs)("form",{onSubmit:ed,className:"grid-2",style:{alignItems:"end"},children:[(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"inv-email",children:"Email address"}),(0,t.jsx)("input",{id:"inv-email",type:"email",required:!0,placeholder:"user@company.com",value:C,onChange:e=>L(e.target.value),disabled:z})]}),(0,t.jsxs)("div",{className:"field",children:[(0,t.jsxs)("label",{htmlFor:"inv-notes",children:["Notes ",(0,t.jsx)("span",{className:"muted",children:"(optional)"})]}),(0,t.jsx)("input",{id:"inv-notes",placeholder:"e.g. From waitlist, referral",value:T,onChange:e=>P(e.target.value),disabled:z})]}),(0,t.jsx)("div",{style:{paddingBottom:1},children:(0,t.jsxs)("button",{type:"submit",className:"btn primary",disabled:z||!C.trim(),"aria-busy":z,children:[z&&(0,t.jsx)("span",{className:"spinner"}),z?"Sending…":"Send invite"]})})]})]}),(0,t.jsxs)("section",{className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h2",{style:{margin:0},children:["Invitations",(0,t.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:ek.length})]}),(0,t.jsxs)("div",{className:"row",style:{gap:8},children:[(0,t.jsx)("input",{placeholder:"Filter by email…",value:O,onChange:e=>eN(e.target.value),style:{maxWidth:220},"aria-label":"Filter invitations by email"}),(0,t.jsxs)("select",{value:U,onChange:e=>{W(e.target.value),ey(1)},style:{width:140},"aria-label":"Filter invitations by status",children:[(0,t.jsx)("option",{value:"all",children:"all"}),(0,t.jsx)("option",{value:"pending",children:"pending"}),(0,t.jsx)("option",{value:"accepted",children:"accepted"}),(0,t.jsx)("option",{value:"revoked",children:"revoked"})]})]})]}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Expires"}),(0,t.jsx)("th",{children:"Notes"}),(0,t.jsx)("th",{})]})}),(0,t.jsxs)("tbody",{children:[0===ek.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{textAlign:"center",color:"var(--muted)",padding:20},children:"No invitations found."})}),eL.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsx)("td",{children:(0,t.jsx)(u,{status:e.revoked_at?"revoked":e.accepted_at?"accepted":"pending"})}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:new Date(e.expires_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.82rem"},children:e.notes||"—"}),(0,t.jsx)("td",{children:!e.revoked_at&&!e.accepted_at&&(0,t.jsx)("button",{className:"btn danger sm",onClick:()=>er(e.id,e.email),children:"Revoke"})})]},e.id))]})]})}),(0,t.jsx)(p,{total:ek.length,page:ej,pageSize:20,onPage:ey})]})]},"invites"),"users"===s&&(0,t.jsxs)(c.E.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h2",{style:{margin:0},children:["Users",(0,t.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:e_.length})]}),(0,t.jsxs)("div",{className:"row",style:{gap:8},children:[(0,t.jsx)("input",{placeholder:"Filter by email…",value:D,onChange:e=>eS(e.target.value),style:{maxWidth:220},"aria-label":"Filter users by email"}),(0,t.jsxs)("select",{value:G,onChange:e=>{H(e.target.value),eb(1)},style:{width:140},"aria-label":"Filter users by status",children:[(0,t.jsx)("option",{value:"all",children:"all"}),(0,t.jsx)("option",{value:"active",children:"active"}),(0,t.jsx)("option",{value:"disabled",children:"disabled"}),(0,t.jsx)("option",{value:"admin",children:"admin"}),(0,t.jsx)("option",{value:"unlimited",children:"unlimited"})]})]})]}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Roles"}),(0,t.jsx)("th",{children:"Last login"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsxs)("tbody",{children:[0===e_.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{textAlign:"center",color:"var(--muted)",padding:20},children:"No users found."})}),eT.map(e=>{let a=$[e.id],s=void 0!==a;return(0,t.jsxs)(i.Fragment,{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsxs)("td",{style:{whiteSpace:"nowrap"},children:[e.is_admin&&(0,t.jsx)("span",{className:"badge badge-brand",style:{marginRight:4},children:"admin"}),e.is_unlimited&&(0,t.jsx)("span",{className:"badge badge-ok",title:"No daily usage limits",children:"∞ unlimited"}),!e.is_admin&&!e.is_unlimited&&(0,t.jsx)("span",{className:"muted",children:"—"})]}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:e.last_login_at?new Date(e.last_login_at).toLocaleDateString():"never"}),(0,t.jsx)("td",{children:(0,t.jsx)(u,{status:e.is_disabled?"disabled":"active"})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"td-actions",style:{flexWrap:"wrap"},children:[(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>ec(e.id,!e.is_disabled),children:e.is_disabled?"Enable":"Disable"}),(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>eo(e.id,e.email),children:"Revoke sessions"}),(0,t.jsx)("button",{className:"btn sm ".concat(e.is_admin?"danger":"secondary"),onClick:()=>em(e.id,e.email,!e.is_admin),title:e.is_admin?"Remove admin privileges":"Grant admin privileges",children:e.is_admin?"Revoke admin":"Grant admin"}),(0,t.jsx)("button",{className:"btn sm ".concat(e.is_unlimited?"danger":"secondary"),onClick:()=>eh(e.id,!e.is_unlimited),title:e.is_unlimited?"Remove unlimited limits bypass":"Remove all daily usage limits for this user",children:e.is_unlimited?"Set limited":"Set unlimited"}),(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>s?ee(a=>{let s={...a};return delete s[e.id],s}):eu(e.id),title:"Toggle usage stats",children:ea[e.id]?"Loading…":s?"Hide stats":"Stats"})]})})]}),s&&(0,t.jsx)("tr",{style:{background:"var(--panel-2)"},children:(0,t.jsx)("td",{colSpan:5,style:{padding:"6px 12px 10px 12px"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:"1.5rem",fontSize:"0.82rem",color:"var(--ink-2)",flexWrap:"wrap"},children:[(0,t.jsxs)("span",{children:["Total memories: ",(0,t.jsx)("strong",{style:{color:"var(--brand)"},children:a.memory_count})]}),(0,t.jsxs)("span",{children:["Today memories: ",(0,t.jsx)("strong",{children:a.today_memories})]}),(0,t.jsxs)("span",{children:["Today recalls: ",(0,t.jsx)("strong",{children:a.today_recalls})]}),(0,t.jsxs)("span",{children:["Today projects: ",(0,t.jsx)("strong",{children:a.today_projects})]})]})})})]},e.id)})]})]})}),(0,t.jsx)(p,{total:e_.length,page:ev,pageSize:20,onPage:eb})]},"users"),"login-ips"===s&&(0,t.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack-lg",children:[(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("h2",{style:{marginBottom:8},children:"Login IP History"}),(0,t.jsx)("p",{className:"muted",style:{marginBottom:16,fontSize:"0.88rem"},children:"Select a user to view their last 10 login IP addresses and timestamps. IPs are stored verbatim — no tokens, cookies, or secrets are shown."}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Last login"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{})]})}),(0,t.jsxs)("tbody",{children:[0===S.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,style:{textAlign:"center",color:"var(--muted)",padding:20},children:"No users found."})}),S.map(e=>(0,t.jsxs)("tr",{style:V===e.id?{background:"var(--panel-2)"}:{},children:[(0,t.jsx)("td",{className:"mono",children:e.email}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:e.last_login_at?new Date(e.last_login_at).toLocaleString():"never"}),(0,t.jsx)("td",{children:(0,t.jsx)(u,{status:e.is_disabled?"disabled":"active"})}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{className:"btn sm ".concat(V===e.id?"primary":"secondary"),onClick:()=>ex(e.id,e.email),"aria-pressed":V===e.id,children:V===e.id?"Viewing":"View IPs"})})]},e.id))]})]})})]}),null!==V&&(0,t.jsxs)("section",{className:"card",children:[(0,t.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,t.jsxs)("h3",{style:{margin:0},children:["Login events for"," ",(0,t.jsx)("span",{className:"mono",style:{fontSize:"0.9em"},children:J})]}),(0,t.jsx)("button",{className:"btn secondary sm",onClick:()=>ex(V,J),disabled:Y,children:Y?"Loading…":"Refresh"})]}),Y?(0,t.jsx)("p",{className:"muted",children:"Loading…"}):0===Q.length?(0,t.jsx)("p",{className:"muted",children:"No login events recorded for this user."}):(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"#"}),(0,t.jsx)("th",{children:"IP Address"}),(0,t.jsx)("th",{children:"Date & Time (UTC)"}),(0,t.jsx)("th",{children:"User Agent"})]})}),(0,t.jsx)("tbody",{children:Q.map((e,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:a+1}),(0,t.jsx)("td",{className:"mono",style:{fontSize:"0.88rem"},children:e.ip}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.8rem"},children:new Date(e.created_at).toUTCString()}),(0,t.jsx)("td",{className:"muted",style:{fontSize:"0.75rem",maxWidth:280,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.user_agent||"",children:e.user_agent||"—"})]},e.id))})]})}),(0,t.jsx)("p",{className:"muted",style:{fontSize:"0.75rem",marginTop:10},children:"Showing up to 10 most recent login events. Older records are automatically deleted."})]})]},"login-ips"),"usage"===s&&(0,t.jsxs)(c.E.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,t.jsx)("h2",{style:{marginBottom:16},children:"Usage — last 30 days"}),0===k.length?(0,t.jsx)("p",{className:"muted",children:"No usage events recorded yet."}):(0,t.jsx)("div",{className:"usage-chart",children:k.map((e,a)=>(0,t.jsxs)("div",{className:"usage-bar-row",children:[(0,t.jsx)("span",{className:"usage-bar-label",title:"".concat(e.date," \xb7 ").concat(e.event_type),children:e.event_type}),(0,t.jsx)("div",{className:"usage-bar-track","aria-label":"".concat(e.count," events"),children:(0,t.jsx)("div",{className:"usage-bar-fill",style:{width:"".concat(Math.round(e.count/eP*100),"%")}})}),(0,t.jsx)("span",{className:"usage-bar-count",children:e.count})]},"".concat(e.date,"-").concat(a)))})]},"usage")]})]})}function p(e){let{total:a,page:s,pageSize:i,onPage:n}=e,l=Math.ceil(a/i);if(l<=1)return null;let d=Math.min(s*i,a);return(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:12,marginTop:8,borderTop:"1px solid var(--line)",fontSize:"0.8rem",color:"var(--ink-2)"},children:[(0,t.jsxs)("span",{children:[(s-1)*i+1,"–",d," of ",a]}),(0,t.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,t.jsx)("button",{className:"btn ghost sm",disabled:s<=1,onClick:()=>n(1),title:"First page",style:{padding:"2px 8px"},children:"\xab"}),(0,t.jsx)("button",{className:"btn ghost sm",disabled:s<=1,onClick:()=>n(s-1),title:"Previous page",style:{padding:"2px 8px"},children:"‹"}),(0,t.jsxs)("span",{style:{padding:"2px 8px",color:"var(--ink)",fontWeight:600},children:[s," / ",l]}),(0,t.jsx)("button",{className:"btn ghost sm",disabled:s>=l,onClick:()=>n(s+1),title:"Next page",style:{padding:"2px 8px"},children:"›"}),(0,t.jsx)("button",{className:"btn ghost sm",disabled:s>=l,onClick:()=>n(l),title:"Last page",style:{padding:"2px 8px"},children:"\xbb"})]})]})}},935:function(e,a,s){"use strict";s.d(a,{A:function(){return n},O:function(){return i}});var t=s(7437);function i(e){let{height:a="1rem",width:s="100%",radius:i="8px",className:n=""}=e;return(0,t.jsx)("div",{className:"skeleton ".concat(n),style:{height:a,width:s,borderRadius:i},"aria-hidden":"true"})}function n(e){let{rows:a=3}=e;return(0,t.jsxs)("div",{className:"card","aria-busy":"true","aria-label":"Loading…",children:[(0,t.jsx)(i,{height:"1.1rem",width:"40%",radius:"6px"}),(0,t.jsx)("div",{style:{marginTop:12,display:"grid",gap:8},children:Array.from({length:a}).map((e,s)=>(0,t.jsx)(i,{height:"0.85rem",width:s===a-1?"70%":"100%"},s))})]})}}},function(e){e.O(0,[924,917,971,117,744],function(){return e(e.s=2751)}),_N_E=e.O()}]);