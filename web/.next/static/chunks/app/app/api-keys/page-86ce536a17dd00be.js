(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[291],{8469:function(e,t,r){Promise.resolve().then(r.bind(r,811))},811:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f},dynamic:function(){return c}});var n=r(7437),i=r(2265),a=r(9376);r(7648);var o=r(3113),s=r(5110),l=r(935);let c="force-dynamic";function d(e){if(!e)return"—";try{return new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"})}catch(t){return e}}function u(e){if(!e)return"—";try{let t=new Date(e),r=Date.now()-t.getTime();if(r<6e4)return"just now";if(r<36e5)return"".concat(Math.floor(r/6e4),"m ago");if(r<864e5)return"".concat(Math.floor(r/36e5),"h ago");if(r<6048e5)return"".concat(Math.floor(r/864e5),"d ago");return t.toLocaleDateString()}catch(e){return""}}function h(e){let{revoked:t}=e;return(0,n.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:5,padding:"2px 10px",borderRadius:999,fontSize:"0.72rem",fontWeight:700,letterSpacing:"0.04em",background:t?"rgba(239,68,68,0.12)":"rgba(0,229,160,0.12)",color:t?"#ef4444":"#00e5a0",border:"1px solid ".concat(t?"#ef444430":"#00e5a030")},children:[(0,n.jsx)("span",{style:{width:6,height:6,borderRadius:"50%",background:t?"#ef4444":"#00e5a0",display:"inline-block"}}),t?"Revoked":"Active"]})}function m(e){let{apiKey:t,onDismiss:r}=e,[a,o]=(0,i.useState)(!1);return(0,n.jsxs)("div",{style:{background:"rgba(0,229,160,0.08)",border:"1px solid rgba(0,229,160,0.3)",borderRadius:12,padding:"20px 24px",marginBottom:24},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:700,color:"#00e5a0",marginBottom:4},children:"✓ API Key Created — Copy it now"}),(0,n.jsx)("div",{style:{fontSize:"0.8rem",color:"var(--muted)"},children:"This is the only time the full key will be shown. Store it in a password manager or your server's .env file."})]}),(0,n.jsx)("button",{onClick:r,style:{background:"none",border:"none",color:"var(--muted)",cursor:"pointer",fontSize:18,lineHeight:1,padding:4},children:"\xd7"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"stretch"},children:[(0,n.jsx)("code",{style:{flex:1,padding:"12px 16px",borderRadius:8,background:"var(--bg)",border:"1px solid rgba(0,229,160,0.3)",fontFamily:"var(--mono)",fontSize:"0.88rem",color:"var(--ink)",wordBreak:"break-all",userSelect:"all"},children:t}),(0,n.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t),o(!0),setTimeout(()=>o(!1),2e3)},className:"btn primary sm",style:{whiteSpace:"nowrap",minWidth:90},children:a?"✓ Copied":"Copy"})]}),(0,n.jsxs)("div",{style:{marginTop:12,fontSize:"0.78rem",color:"var(--muted)"},children:["Use as: ",(0,n.jsxs)("code",{style:{fontFamily:"var(--mono)",color:"var(--ink-2)"},children:["X-API-Key: ",t]})]})]})}function p(e){let{keyName:t,keyPrefix:r,onConfirm:i,onCancel:a,loading:o}=e;return(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},children:(0,n.jsxs)("div",{style:{background:"var(--bg-2)",border:"1px solid var(--line)",borderRadius:16,padding:32,maxWidth:420,width:"90%",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[(0,n.jsx)("h3",{style:{margin:"0 0 8px",fontSize:"1.05rem",color:"var(--ink)"},children:"Revoke API Key?"}),(0,n.jsxs)("p",{style:{fontSize:"0.85rem",color:"var(--muted)",margin:"0 0 20px"},children:["Revoking ",(0,n.jsxs)("strong",{style:{color:"var(--ink)",fontFamily:"var(--mono)"},children:[r,"…"]}),t?" (".concat(t,")"):""," is permanent. Any service using this key will immediately lose access."]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,justifyContent:"flex-end"},children:[(0,n.jsx)("button",{className:"btn ghost",onClick:a,disabled:o,children:"Cancel"}),(0,n.jsx)("button",{className:"btn",style:{background:"rgba(239,68,68,0.15)",color:"#ef4444",border:"1px solid rgba(239,68,68,0.3)"},onClick:i,disabled:o,children:o?"Revoking…":"Yes, revoke it"})]})]})})}function f(){let e=(0,a.useRouter)(),t=(0,s.p)(),[r,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(""),[h,f]=(0,i.useState)(!0),[g,y]=(0,i.useState)([]),[k,w]=(0,i.useState)(!0),[S,C]=(0,i.useState)(""),[T,_]=(0,i.useState)(!1),[N,R]=(0,i.useState)(null),[I,P]=(0,i.useState)(null),[A,z]=(0,i.useState)(!1),[E,O]=(0,i.useState)([]),[W,K]=(0,i.useState)(!1),B=(0,i.useRef)(null);(0,i.useEffect)(()=>{let r=!1;return(async()=>{try{let t=await (0,o.SC)("/me/orgs");if(r)return;if(!(null==t?void 0:t.length)){e.push("/auth");return}let n=t[0];c(n.id),u(n.name),localStorage.setItem("CONTEXTCACHE_ORG_ID",String(n.id))}catch(n){if(r)return;n instanceof o.MS&&(401===n.status||403===n.status)?e.push("/auth"):t.error("Could not load your organisation.")}finally{r||f(!1)}})(),()=>{r=!0}},[]);let D=(0,i.useCallback)(async()=>{if(r){w(!0);try{let e=await (0,o.SC)("/orgs/".concat(r,"/api-keys"));y(null!=e?e:[])}catch(r){var e;t.error(null!==(e=r.message)&&void 0!==e?e:"Failed to load API keys.")}finally{w(!1)}}},[r]),F=(0,i.useCallback)(async()=>{if(r){K(!0);try{let e=await (0,o.SC)("/orgs/".concat(r,"/audit-logs?limit=50")),t=(null!=e?e:[]).filter(e=>{var t;return null===(t=e.action)||void 0===t?void 0:t.startsWith("api_key.")});O(t)}catch(e){}finally{K(!1)}}},[r]);(0,i.useEffect)(()=>{r&&(D(),F())},[r,D,F]);let L=async e=>{var n,i;if(e.preventDefault(),S.trim()&&!T){_(!0),R(null);try{let e=await (0,o.SC)("/orgs/".concat(r,"/api-keys"),{method:"POST",body:JSON.stringify({name:S.trim()})});R(e.api_key),C(""),t.success("API key created — copy it now!"),await D(),await F(),null===(n=B.current)||void 0===n||n.focus()}catch(e){t.error(null!==(i=e.message)&&void 0!==i?i:"Failed to create API key.")}finally{_(!1)}}},U=async()=>{if(I&&!A){z(!0);try{await (0,o.SC)("/orgs/".concat(r,"/api-keys/").concat(I.id,"/revoke"),{method:"POST"}),t.success('Key "'.concat(I.name||I.prefix,'" revoked.')),P(null),await D(),await F()}catch(r){var e;t.error(null!==(e=r.message)&&void 0!==e?e:"Failed to revoke key.")}finally{z(!1)}}};if(h)return(0,n.jsxs)("div",{style:{padding:"60px 24px",maxWidth:680,margin:"0 auto"},children:[(0,n.jsx)(l.O,{height:32,style:{marginBottom:16}}),(0,n.jsx)(l.O,{height:120})]});let X=g.filter(e=>!e.revoked_at),Y=g.filter(e=>e.revoked_at);return(0,n.jsxs)(n.Fragment,{children:[I&&(0,n.jsx)(p,{keyName:I.name,keyPrefix:I.prefix,onConfirm:U,onCancel:()=>P(null),loading:A}),(0,n.jsxs)("div",{style:{minHeight:"100vh",background:"var(--bg)",color:"var(--ink)"},children:[(0,n.jsxs)("div",{style:{borderBottom:"1px solid var(--line)",padding:"20px 28px",display:"flex",alignItems:"center",gap:16,flexWrap:"wrap"},children:[(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsx)("h1",{style:{margin:0,fontSize:"1.15rem",fontWeight:700},children:"API Keys"}),(0,n.jsxs)("div",{style:{fontSize:"0.78rem",color:"var(--muted)",marginTop:2},children:[d&&(0,n.jsxs)(n.Fragment,{children:[d," \xb7 "]}),X.length," active key",1!==X.length?"s":""]})]}),(0,n.jsx)("a",{href:"/api/openapi.json",target:"_blank",rel:"noreferrer",className:"btn ghost sm",children:"API Docs ↗"})]}),(0,n.jsxs)("div",{style:{maxWidth:760,margin:"0 auto",padding:"32px 24px"},children:[N&&(0,n.jsx)(m,{apiKey:N,onDismiss:()=>R(null)}),(0,n.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,n.jsx)("h2",{style:{margin:"0 0 4px",fontSize:"1rem"},children:"Create a New API Key"}),(0,n.jsxs)("p",{style:{fontSize:"0.82rem",color:"var(--muted)",margin:"0 0 16px"},children:["Give the key a descriptive name so you know where it's used — e.g. ",(0,n.jsx)("em",{children:'"Chrome Extension"'}),", ",(0,n.jsx)("em",{children:'"CI Pipeline"'}),", ",(0,n.jsx)("em",{children:'"Cursor Agent"'}),"."]}),(0,n.jsxs)("form",{onSubmit:L,style:{display:"flex",gap:10},children:[(0,n.jsx)("input",{ref:B,type:"text",value:S,onChange:e=>C(e.target.value),placeholder:"e.g. Chrome Extension",maxLength:100,disabled:T,style:{flex:1}}),(0,n.jsxs)("button",{type:"submit",className:"btn primary",disabled:!S.trim()||T,"aria-busy":T,style:{whiteSpace:"nowrap"},children:[T&&(0,n.jsx)("span",{className:"spinner"}),T?"Creating…":"Generate Key"]})]})]}),(0,n.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,n.jsxs)("h2",{style:{margin:"0 0 16px",fontSize:"1rem",display:"flex",alignItems:"center",gap:8},children:["Active Keys",!k&&(0,n.jsx)("span",{className:"badge badge-brand",children:X.length})]}),k?(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[(0,n.jsx)(l.O,{height:52}),(0,n.jsx)(l.O,{height:52})]}):0===X.length?(0,n.jsx)("div",{style:{textAlign:"center",padding:"32px 16px",color:"var(--muted)",fontSize:"0.88rem"},children:"No active API keys. Create one above."}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:X.map(e=>(0,n.jsx)(x,{apiKey:e,onRevoke:()=>P({id:e.id,name:e.name,prefix:e.prefix})},e.id))})]}),(0,n.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,n.jsx)("h2",{style:{margin:0,fontSize:"1rem"},children:"Key Activity Log"}),(0,n.jsx)("button",{className:"btn ghost sm",onClick:()=>{F(),D()},children:"↻ Refresh"})]}),W?(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,n.jsx)(l.O,{height:36}),(0,n.jsx)(l.O,{height:36}),(0,n.jsx)(l.O,{height:36})]}):0===E.length?(0,n.jsx)("div",{style:{textAlign:"center",padding:"24px 16px",color:"var(--muted)",fontSize:"0.85rem"},children:"No key-related activity yet."}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:E.map(e=>(0,n.jsx)(v,{log:e},e.id))})]}),Y.length>0&&(0,n.jsx)(b,{keys:Y}),(0,n.jsx)(j,{})]})]})]})}function x(e){var t,r;let{apiKey:i,onRevoke:a}=e;return(0,n.jsxs)("div",{style:{background:"var(--bg-2)",border:"1px solid var(--line-2)",borderRadius:10,padding:"14px 16px"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(0,n.jsxs)("div",{style:{flex:1,minWidth:160},children:[(0,n.jsx)("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"var(--ink)"},children:i.name||(0,n.jsx)("em",{style:{color:"var(--muted)"},children:"Unnamed"})}),(0,n.jsxs)("div",{style:{fontFamily:"var(--mono)",fontSize:"0.75rem",color:"var(--muted)",marginTop:2},children:[i.prefix,"••••••••••••••••"]})]}),(0,n.jsx)(h,{revoked:!!i.revoked_at}),!i.revoked_at&&(0,n.jsx)("button",{className:"btn ghost sm",onClick:a,style:{color:"var(--danger, #ef4444)",borderColor:"rgba(239,68,68,0.3)",whiteSpace:"nowrap"},children:"Revoke"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:20,marginTop:10,paddingTop:10,borderTop:"1px solid var(--line-2)",flexWrap:"wrap"},children:[(0,n.jsx)(g,{label:"Created",value:d(i.created_at)}),(0,n.jsx)(g,{label:"Last used",value:i.last_used_at?u(i.last_used_at):"Never",dim:!i.last_used_at}),(0,n.jsx)(g,{label:"Total requests",value:null!==(r=null===(t=i.use_count)||void 0===t?void 0:t.toLocaleString())&&void 0!==r?r:"0",highlight:i.use_count>0})]})]})}function g(e){let{label:t,value:r,dim:i,highlight:a}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:"0.68rem",fontWeight:700,color:"var(--muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:2},children:t}),(0,n.jsx)("div",{style:{fontSize:"0.82rem",fontWeight:600,color:i?"var(--muted)":a?"#00e5a0":"var(--ink)",fontFamily:a||"Total requests"===t?"var(--mono)":"inherit"},children:r})]})}let y={"api_key.create":{label:"Key created",color:"#00e5a0"},"api_key.revoke":{label:"Key revoked",color:"#ef4444"}};function v(e){var t,r,i,a;let{log:o}=e,s=null!==(i=y[o.action])&&void 0!==i?i:{label:o.action,color:"var(--muted)"};return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"8px 14px",borderRadius:8,background:"var(--bg-2)",border:"1px solid var(--line-2)",fontSize:"0.82rem"},children:[(0,n.jsx)("span",{style:{fontWeight:700,color:s.color,minWidth:110,fontFamily:"var(--mono)",fontSize:"0.75rem"},children:s.label}),(0,n.jsxs)("span",{style:{color:"var(--muted)",flex:1},children:[(null===(t=o.metadata)||void 0===t?void 0:t.name)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("strong",{style:{color:"var(--ink)"},children:o.metadata.name})," \xb7 "]}),"prefix: ",(0,n.jsx)("code",{style:{fontFamily:"var(--mono)"},children:null!==(a=null===(r=o.metadata)||void 0===r?void 0:r.prefix)&&void 0!==a?a:"—"})]}),(0,n.jsx)("span",{style:{color:"var(--muted)",whiteSpace:"nowrap",fontSize:"0.75rem"},children:u(o.created_at)})]})}function b(e){let{keys:t}=e,[r,a]=(0,i.useState)(!1);return(0,n.jsxs)("div",{style:{marginBottom:24},children:[(0,n.jsxs)("button",{className:"btn ghost sm",onClick:()=>a(e=>!e),style:{marginBottom:r?12:0},children:[r?"▲":"▼"," ",t.length," revoked key",1!==t.length?"s":""]}),r&&(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:t.map(e=>(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap",background:"var(--bg-2)",border:"1px solid var(--line-2)",borderRadius:10,padding:"10px 16px",opacity:.6},children:[(0,n.jsxs)("div",{style:{flex:1,minWidth:160},children:[(0,n.jsx)("div",{style:{fontWeight:600,fontSize:"0.88rem"},children:e.name||"Unnamed"}),(0,n.jsxs)("div",{style:{fontFamily:"var(--mono)",fontSize:"0.72rem",color:"var(--muted)"},children:[e.prefix,"••••••••••••••••"]})]}),(0,n.jsx)(h,{revoked:!0}),(0,n.jsxs)("span",{style:{fontSize:"0.75rem",color:"var(--muted)"},children:["Revoked ",d(e.revoked_at)]})]},e.id))})]})}function j(){let[e,t]=(0,i.useState)(null),r=(e,r)=>{navigator.clipboard.writeText(r),t(e),setTimeout(()=>t(null),2e3)};return(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h2",{style:{margin:"0 0 4px",fontSize:"1rem"},children:"How to Use Your Key"}),(0,n.jsxs)("p",{style:{fontSize:"0.82rem",color:"var(--muted)",margin:"0 0 16px"},children:["Pass the key in the ",(0,n.jsx)("code",{style:{fontFamily:"var(--mono)"},children:"X-API-Key"})," header on every request."]}),[{id:"curl",label:"curl",code:'curl -X POST "https://api.thecontextcache.com/ingest/raw" \\\n  -H "X-API-Key: YOUR_KEY_HERE" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"source":"cli","project_id":1,"payload":{"text":"Your insight here"}}\''},{id:"python",label:"Python",code:'import httpx\n\nresp = httpx.post(\n    "https://api.thecontextcache.com/ingest/raw",\n    headers={"X-API-Key": "YOUR_KEY_HERE"},\n    json={"source": "cli", "project_id": 1,\n          "payload": {"text": "Your insight here"}},\n)\nprint(resp.json())'},{id:"env",label:".env",code:"# Add to your project .env\nCC_API_KEY=YOUR_KEY_HERE\nCC_PROJECT_ID=1"}].map(t=>(0,n.jsxs)("div",{style:{marginBottom:12},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[(0,n.jsx)("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:t.label}),(0,n.jsx)("button",{className:"btn ghost sm",style:{fontSize:"0.72rem",padding:"2px 8px"},onClick:()=>r(t.id,t.code),children:e===t.id?"✓ Copied":"Copy"})]}),(0,n.jsx)("pre",{style:{background:"var(--bg-2)",border:"1px solid var(--line)",borderRadius:8,padding:"12px 16px",margin:0,fontFamily:"var(--mono)",fontSize:"0.78rem",color:"var(--ink-2)",overflowX:"auto",whiteSpace:"pre"},children:t.code})]},t.id))]})}},935:function(e,t,r){"use strict";r.d(t,{A:function(){return a},O:function(){return i}});var n=r(7437);function i(e){let{height:t="1rem",width:r="100%",radius:i="8px",className:a=""}=e;return(0,n.jsx)("div",{className:"skeleton ".concat(a),style:{height:t,width:r,borderRadius:i},"aria-hidden":"true"})}function a(e){let{rows:t=3}=e;return(0,n.jsxs)("div",{className:"card","aria-busy":"true","aria-label":"Loading…",children:[(0,n.jsx)(i,{height:"1.1rem",width:"40%",radius:"6px"}),(0,n.jsx)("div",{style:{marginTop:12,display:"grid",gap:8},children:Array.from({length:t}).map((e,r)=>(0,n.jsx)(i,{height:"0.85rem",width:r===t-1?"70%":"100%"},r))})]})}},5110:function(e,t,r){"use strict";r.d(t,{ToastProvider:function(){return s},p:function(){return l}});var n=r(7437),i=r(2265);let a=(0,i.createContext)({addToast:()=>{}}),o=0;function s(e){let{children:t}=e,[r,s]=(0,i.useState)([]),l=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,n=++o;s(r=>[...r,{id:n,message:e,variant:t,leaving:!1}]),setTimeout(()=>{s(e=>e.map(e=>e.id===n?{...e,leaving:!0}:e)),setTimeout(()=>{s(e=>e.filter(e=>e.id!==n))},300)},r)},[]),d=(0,i.useCallback)(e=>{s(t=>t.map(t=>t.id===e?{...t,leaving:!0}:t)),setTimeout(()=>{s(t=>t.filter(t=>t.id!==e))},300)},[]);return(0,n.jsxs)(a.Provider,{value:{addToast:l},children:[t,r.length>0&&(0,n.jsx)("div",{className:"toast-stack",role:"region","aria-label":"Notifications","aria-live":"polite",children:r.map(e=>(0,n.jsxs)("div",{className:"toast toast-".concat(e.variant).concat(e.leaving?" toast-leave":""),role:"alert",children:[(0,n.jsx)("span",{className:"toast-icon",children:c[e.variant]}),(0,n.jsx)("span",{className:"toast-msg",children:e.message}),(0,n.jsx)("button",{className:"toast-close",onClick:()=>d(e.id),"aria-label":"Dismiss",children:"\xd7"})]},e.id))})]})}function l(){let{addToast:e}=(0,i.useContext)(a);return{success:(t,r)=>e(t,"success",r),error:(t,r)=>e(t,"error",null!=r?r:6e3),info:(t,r)=>e(t,"info",r),warn:(t,r)=>e(t,"warn",r)}}let c={success:"✓",error:"✕",info:"ℹ",warn:"⚠"}},3113:function(e,t,r){"use strict";r.d(t,{B3:function(){return i},EN:function(){return o},MS:function(){return s},Rt:function(){return c},SC:function(){return l}});var n=r(257);function i(){return"/api"}let a="thecontextcache.com";function o(){if(n.env.NEXT_PUBLIC_DOCS_URL)return n.env.NEXT_PUBLIC_DOCS_URL.replace(/\/$/,"");{let{protocol:e,hostname:t}=window.location;if("https:"===e&&(t===a||t.endsWith(".".concat(a))))return"https://docs.".concat(a)}return"/docs"}class s extends Error{constructor(e,t,r){super(e),this.status=t,this.kind=r}}async function l(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i(),a="/api"===n?[n]:[n,"/api"],o=e.startsWith("/auth/")||"/health"===e||"/me/orgs"===e?"":(window.localStorage.getItem("CONTEXTCACHE_ORG_ID")||"").trim(),l=0,c={...r},d=c.headers||{};for(let r of(delete c.headers,a))try{t=await fetch("".concat(r).concat(e),{...c,credentials:"include",headers:{"Content-Type":"application/json",...o?{"X-Org-Id":o}:{},...d}});break}catch(e){if((l+=1)>=a.length)throw new s("Cannot reach the backend. Check your network or server status.",0,"network")}if(!t)throw new s("Cannot reach the backend. Check your network or server status.",0,"network");let u=await t.json().catch(()=>({}));if(!t.ok){let e=u.detail||"Request failed";if(401===t.status)throw new s(e,401,"auth");if(403===t.status)throw new s(e,403,"forbidden");if(429===t.status)throw new s("Too many requests — please wait a moment and try again.",429,"rate_limit");if(t.status>=500)throw new s("Server error. Please try again shortly.",t.status,"server");throw new s(e,t.status,"client")}return u}async function c(e){let t=i();for(let r of"/api"===t?[t]:[t,"/api"])try{if((await fetch("".concat(r,"/health"),{credentials:"include",signal:null!=e?e:function(e){if("undefined"!=typeof AbortSignal&&"function"==typeof AbortSignal.timeout)return AbortSignal.timeout(5e3);let t=new AbortController;return setTimeout(()=>t.abort(),5e3),t.signal}(0)})).ok)return!0}catch(e){}return!1}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return i.a}});var n=r(2972),i=r.n(n)},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},257:function(e,t,r){"use strict";var n,i;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,n,i=e.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l=[],c=!1,d=-1;function u(){c&&n&&(c=!1,n.length?l=n.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=s(u);c=!0;for(var t=l.length;t;){for(n=l,l=[];++d<t;)n&&n[d].run();d=-1,t=l.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new m(e,t)),1!==l.length||c||s(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}},o=!0;try{t[e](a,a.exports,n),o=!1}finally{o&&delete r[e]}return a.exports}n.ab="//";var i=n(229);e.exports=i}()}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=8469)}),_N_E=e.O()}]);