(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[191],{5262:function(e,t,a){Promise.resolve().then(a.bind(a,2756))},2756:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(7437),i=a(2265),n=a(9376),l=a(3113),r=a(5110),o=a(935),c=a(4924),d=a(7586);let m=["decision","finding","definition","note","link","todo","chat","doc","code"],p={decision:{color:"#00D4FF",bg:"rgba(0,212,255,0.12)"},finding:{color:"#A78BFA",bg:"rgba(167,139,250,0.12)"},definition:{color:"#00E5A0",bg:"rgba(0,229,160,0.12)"},note:{color:"#FFB800",bg:"rgba(255,184,0,0.12)"},link:{color:"#FF6B6B",bg:"rgba(255,107,107,0.12)"},todo:{color:"#F472B6",bg:"rgba(244,114,182,0.12)"}};function h(e){try{let t=new Date(e),a=Date.now()-t.getTime();if(a<6e4)return"just now";if(a<36e5)return"".concat(Math.floor(a/6e4),"m ago");if(a<864e5)return"".concat(Math.floor(a/36e5),"h ago");if(a<6048e5)return"".concat(Math.floor(a/864e5),"d ago");return t.toLocaleDateString()}catch(e){return""}}function u(e){let{type:t,size:a="sm"}=e,i=p[t]||{color:"var(--muted)",bg:"var(--panel-2)"};return(0,s.jsx)("span",{style:{color:i.color,background:i.bg,border:"1px solid ".concat(i.color,"30"),padding:"sm"===a?"1px 7px":"2px 9px",borderRadius:999,fontSize:"sm"===a?"0.7rem":"0.78rem",fontWeight:700,letterSpacing:"0.04em",fontFamily:"var(--mono)",whiteSpace:"nowrap",flexShrink:0},children:t})}let g={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},x={hidden:{opacity:0,y:15},show:{opacity:1,y:0,transition:{type:"spring",stiffness:400,damping:30}}};function y(e){var t,a,i,n,l,r,o;let{usage:c,isUnlimited:d}=e,m=null!==(t=null==c?void 0:c.limits)&&void 0!==t?t:{},p=[{label:"memories",used:null!==(a=null==c?void 0:c.memories_created)&&void 0!==a?a:0,max:null!==(i=m.memories_per_day)&&void 0!==i?i:0,color:"#00D4FF"},{label:"recalls",used:null!==(n=null==c?void 0:c.recall_queries)&&void 0!==n?n:0,max:null!==(l=m.recalls_per_day)&&void 0!==l?l:0,color:"#A78BFA"},{label:"projects",used:null!==(r=null==c?void 0:c.projects_created)&&void 0!==r?r:0,max:null!==(o=m.projects_per_day)&&void 0!==o?o:0,color:"#00E5A0"}];return(0,s.jsxs)("div",{style:{padding:"10px 12px",borderTop:"1px solid var(--line)",marginTop:"auto"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[(0,s.jsx)("span",{style:{fontSize:"0.62rem",letterSpacing:"0.1em",color:"var(--muted)",fontFamily:"var(--mono)",fontWeight:700},children:"TODAY'S USAGE"}),d&&(0,s.jsx)("span",{style:{fontSize:"0.62rem",color:"var(--ok)",fontFamily:"var(--mono)",letterSpacing:"0.06em"},children:"∞ unlimited"})]}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:p.map(e=>{let{label:t,used:a,max:i,color:n}=e,l=i>0&&!d?Math.min(100,a/i*100):0,r=l>=80,o=l>=100,c=d?"".concat(t,": ").concat(a," / unlimited"):i>0?"".concat(t,": ").concat(a," / ").concat(i):"".concat(t,": ").concat(a," (no configured limit)");return(0,s.jsxs)("div",{title:c,children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.68rem",color:"var(--ink-2)",fontFamily:"var(--mono)",marginBottom:3},children:[(0,s.jsx)("span",{children:t}),(0,s.jsx)("span",{style:{color:o?"var(--danger)":r?"var(--warn)":"var(--muted)"},children:d?"".concat(a," / ∞"):i>0?"".concat(a," / ").concat(i):"".concat(a)})]}),i>0&&!d&&(0,s.jsx)("div",{style:{height:3,borderRadius:99,background:"var(--panel-3)",overflow:"hidden"},children:(0,s.jsx)("div",{style:{height:"100%",borderRadius:99,width:"".concat(l,"%"),background:o?"#ef4444":r?"#f59e0b":"#00D4FF",transition:"width 0.4s ease"}})})]},t)})})]})}function b(){let e=(0,n.useRouter)(),t=(0,r.p)(),[a,b]=(0,i.useState)(!0),[j,v]=(0,i.useState)(null),[f,S]=(0,i.useState)(null),[N,w]=(0,i.useState)([]),[C,k]=(0,i.useState)([]),[z,_]=(0,i.useState)(""),[B,T]=(0,i.useState)(""),[A,D]=(0,i.useState)("compose"),[O,E]=(0,i.useState)(""),[F,P]=(0,i.useState)(""),[I,R]=(0,i.useState)(!1),[L,M]=(0,i.useState)(!1),[G,H]=(0,i.useState)(""),[U,W]=(0,i.useState)(!1),[q,K]=(0,i.useState)(!1),[X,J]=(0,i.useState)("decision"),[V,Y]=(0,i.useState)("manual"),[Q,Z]=(0,i.useState)(""),[$,ee]=(0,i.useState)(""),[et,ea]=(0,i.useState)(""),[es,ei]=(0,i.useState)({url:"",file_path:"",language:"",model:""}),[en,el]=(0,i.useState)(!1),[er,eo]=(0,i.useState)([]),[ec,ed]=(0,i.useState)(!1),[em,ep]=(0,i.useState)(""),[eh,eu]=(0,i.useState)([]),[eg,ex]=(0,i.useState)(""),[ey,eb]=(0,i.useState)(!1),[ej,ev]=(0,i.useState)([]),[ef,eS]=(0,i.useState)(!1),[eN,ew]=(0,i.useState)(!1),[eC,ek]=(0,i.useState)(""),[ez,e_]=(0,i.useState)("");function eB(a){if(a instanceof l.MS){if("auth"===a.kind){e.replace("/auth?reason=expired");return}if("forbidden"===a.kind){t.error("You don't have permission for this action.");return}if("rate_limit"===a.kind){t.warn("Too many requests. Please wait a moment.");return}if("network"===a.kind){t.error("Backend unreachable. Check server status.");return}}t.error(a.message||"Something went wrong.")}async function eT(){b(!0);try{var e;let a=await (0,l.SC)("/auth/me"),s=await (0,l.SC)("/me/orgs");k(s||[]);let i=(window.localStorage.getItem("CONTEXTCACHE_ORG_ID")||"").trim(),n=(s||[]).some(e=>String(e.id)===i)?i:(null==s?void 0:null===(e=s[0])||void 0===e?void 0:e.id)?String(s[0].id):"";if(n?window.localStorage.setItem("CONTEXTCACHE_ORG_ID",n):window.localStorage.removeItem("CONTEXTCACHE_ORG_ID"),_(n),v(a),!n){w([]),T(""),S(await (0,l.SC)("/me/usage").catch(()=>null)),t.warn("No organization membership found. Ask an admin to add you to an org.");return}let[r,o]=await Promise.all([(0,l.SC)("/projects"),(0,l.SC)("/me/usage").catch(()=>null)]);w(r),r.length&&T(String(r[0].id)),o&&S(o)}catch(e){eB(e)}finally{b(!1)}}async function eA(e){if(e&&e!==z){window.localStorage.setItem("CONTEXTCACHE_ORG_ID",e),_(e),T(""),w([]),eo([]),eu([]),ex(""),ep(""),D("compose");try{let[e,a]=await Promise.all([(0,l.SC)("/projects"),(0,l.SC)("/me/usage").catch(()=>null)]);w(e),e.length&&T(String(e[0].id)),a&&S(a),t.success("Switched organization.")}catch(e){z?window.localStorage.setItem("CONTEXTCACHE_ORG_ID",z):window.localStorage.removeItem("CONTEXTCACHE_ORG_ID"),_(z),eB(e)}}}async function eD(){eS(!0);try{let e=await (0,l.SC)("/orgs/".concat(z,"/api-keys"));ev(e)}catch(e){eB(e)}finally{eS(!1)}}async function eO(e){if(e.preventDefault(),z&&!eN&&ez.trim()){ew(!0),ek("");try{let e=await (0,l.SC)("/orgs/".concat(z,"/api-keys"),{method:"POST",body:JSON.stringify({name:ez.trim(),expires_in_days:90})});ek(e.api_key),e_(""),t.success("API key generated successfully."),await eD()}catch(e){eB(e)}finally{ew(!1)}}}async function eE(e){if(confirm("Are you sure you want to revoke this key? Any AI agents using it will be instantly disconnected."))try{await (0,l.SC)("/orgs/".concat(z,"/api-keys/").concat(e,"/revoke"),{method:"POST"}),t.success("API key revoked."),await eD()}catch(e){eB(e)}}async function eF(){ed(!0);try{let e=await (0,l.SC)("/projects/".concat(B,"/memories"));eo(e)}catch(e){eB(e)}finally{ed(!1)}}function eP(e){e!==B&&(T(e),D("compose"),eu([]),ex(""),ep(""),ee(""),Z(""),ea(""),ei({url:"",file_path:"",language:"",model:""}))}async function eI(e){if(e.preventDefault(),F.trim()&&!I){R(!0);try{let e=await (0,l.SC)("/projects",{method:"POST",body:JSON.stringify({name:F.trim()})});t.success('Project "'.concat(e.name,'" created.')),P(""),M(!1);let a=await (0,l.SC)("/projects");w(a),eP(String(e.id))}catch(e){eB(e)}finally{R(!1)}}}async function eR(e){if(e.preventDefault(),G.trim()&&!U){W(!0);try{let e=await (0,l.SC)("/orgs",{method:"POST",body:JSON.stringify({name:G.trim()})});t.success('Organization "'.concat(e.name,'" created.')),H(""),K(!1);let a=await (0,l.SC)("/me/orgs");k(a||[]),eA(String(e.id))}catch(e){eB(e)}finally{W(!1)}}}async function eL(e){if(e.preventDefault(),!$.trim()||!B||en)return;el(!0);let a=Object.fromEntries(Object.entries(es).filter(e=>{let[,t]=e;return t.trim()})),s=et.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean);try{await (0,l.SC)("/projects/".concat(B,"/memories"),{method:"POST",body:JSON.stringify({type:X,source:V,title:Q.trim()||null,content:$.trim(),metadata:a,tags:s})}),t.success("Memory saved."),ee(""),Z(""),ea(""),ei({url:"",file_path:"",language:"",model:""}),await eF()}catch(e){eB(e)}finally{el(!1)}}async function eM(e){if(null==e||e.preventDefault(),B&&!ey){eb(!0),eu([]),ex("");try{var a;let e=await (0,l.SC)("/projects/".concat(B,"/recall?query=").concat(encodeURIComponent(em),"&limit=10"));eu(e.items||[]),ex(e.memory_pack_text||""),(null===(a=e.items)||void 0===a?void 0:a.length)||t.info("No memories matched — showing recent instead.")}catch(e){eB(e)}finally{eb(!1)}}}async function eG(){if(eg)try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(eg);else{let e=Object.assign(document.createElement("textarea"),{value:eg,style:"position:fixed;left:-9999px;top:-9999px"});document.body.appendChild(e),e.select();let t=document.execCommand("copy");if(document.body.removeChild(e),!t)throw Error()}t.success("Memory pack copied to clipboard.")}catch(e){t.error("Copy failed — use Download instead, or switch to HTTPS.")}}(0,i.useEffect)(()=>{eT()},[]),(0,i.useEffect)(()=>{B&&eF()},[B]),(0,i.useEffect)(()=>{B&&"memories"===A&&eF()},[A]),(0,i.useEffect)(()=>{z&&"api"===A&&eD()},[A,z]);let eH=N.find(e=>String(e.id)===B),eU=N.filter(e=>!O||e.name.toLowerCase().includes(O.toLowerCase()));return a?(0,s.jsxs)("div",{className:"app-layout",children:[(0,s.jsxs)("aside",{className:"sidebar",children:[(0,s.jsx)(o.O,{height:"1rem",width:"80px",style:{marginBottom:8}}),[1,2,3].map(e=>(0,s.jsx)(o.O,{height:"36px",radius:"8px"},e))]}),(0,s.jsxs)("div",{className:"main-content",children:[(0,s.jsx)(o.A,{rows:4}),(0,s.jsx)(o.A,{rows:3})]})]}):(0,s.jsxs)("div",{className:"app-layout",children:[(0,s.jsxs)("aside",{className:"sidebar","aria-label":"Projects",children:[(0,s.jsxs)("div",{className:"sidebar-header",children:[(0,s.jsxs)("div",{style:{paddingBottom:8},children:[(0,s.jsx)("label",{htmlFor:"org-switch",style:{fontSize:"0.72rem",marginBottom:4,color:"var(--muted)"},children:"Organization Scope"}),(0,s.jsx)("select",{id:"org-switch",value:z,onChange:e=>eA(e.target.value),style:{fontSize:"0.82rem",padding:"6px 10px"},disabled:0===C.length,children:0===C.length?(0,s.jsx)("option",{value:"",children:"No organizations available"}):C.map(e=>(0,s.jsx)("option",{value:String(e.id),children:e.name},e.id))}),(0,s.jsxs)("div",{className:"muted row spread",style:{fontSize:"0.7rem",marginTop:5},children:[(0,s.jsx)("span",{children:C.length>1?"Switch org to view its projects and memories.":"Project list is scoped to this organization."}),(0,s.jsx)("button",{className:"btn text xs",style:{padding:0},onClick:()=>K(e=>!e),children:q?"Cancel":"+ New Org"})]})]}),q&&(0,s.jsxs)("form",{onSubmit:eR,className:"stack-sm",style:{paddingBottom:16},children:[(0,s.jsx)("input",{autoFocus:!0,value:G,onChange:e=>H(e.target.value),placeholder:"Organization Name",required:!0,maxLength:200,style:{fontSize:"0.85rem",padding:"7px 10px"},disabled:U}),(0,s.jsx)("button",{type:"submit",className:"btn primary sm",disabled:!G.trim()||U,"aria-busy":U,style:{width:"100%"},children:U?(0,s.jsx)("span",{className:"spinner"}):"Create Organization"})]}),(0,s.jsxs)("div",{className:"row spread",style:{paddingBottom:6},children:[(0,s.jsxs)("span",{className:"sidebar-section-label",children:["Projects",N.length>0&&(0,s.jsxs)("span",{style:{color:"var(--muted)",fontWeight:400,marginLeft:5},children:["(",N.length,")"]})]}),(0,s.jsx)("button",{className:"btn ghost sm",onClick:()=>M(e=>!e),"aria-label":L?"Cancel":"New project",title:"New project",style:{padding:"2px 10px",fontSize:"1.1rem",lineHeight:1},children:L?"\xd7":"+"})]}),L&&(0,s.jsxs)("form",{onSubmit:eI,className:"stack-sm",style:{paddingBottom:8},children:[(0,s.jsx)("input",{autoFocus:!0,value:F,onChange:e=>P(e.target.value),placeholder:"Project name",required:!0,maxLength:200,style:{fontSize:"0.85rem",padding:"7px 10px"},disabled:I}),(0,s.jsxs)("div",{className:"row",style:{gap:6},children:[(0,s.jsx)("button",{type:"submit",className:"btn primary sm",disabled:!F.trim()||I,"aria-busy":I,style:{flex:1},children:I?(0,s.jsx)("span",{className:"spinner"}):"Create"}),(0,s.jsx)("button",{type:"button",className:"btn ghost sm",onClick:()=>{M(!1),P("")},children:"Cancel"})]})]}),N.length>6&&(0,s.jsx)("div",{style:{paddingBottom:6},children:(0,s.jsx)("input",{value:O,onChange:e=>E(e.target.value),placeholder:"Filter projects…",style:{fontSize:"0.82rem",padding:"6px 10px"},"aria-label":"Filter projects"})})]}),(0,s.jsx)("div",{className:"sidebar-projects",children:0===N.length?(0,s.jsx)("p",{className:"muted",style:{fontSize:"0.82rem",padding:"8px 4px"},children:"No projects yet. Hit + to create one."}):0===eU.length?(0,s.jsxs)("p",{className:"muted",style:{fontSize:"0.82rem",padding:"8px 4px"},children:["No projects match “",O,"”."]}):eU.map(e=>(0,s.jsxs)("button",{className:"project-item".concat(String(e.id)===B?" active":""),onClick:()=>eP(String(e.id)),title:e.name,children:[(0,s.jsx)("span",{className:"proj-dot"}),(0,s.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1,textAlign:"left"},children:e.name})]},e.id))}),f&&(0,s.jsx)(y,{usage:f,isUnlimited:null==j?void 0:j.is_unlimited})]}),(0,s.jsx)("main",{className:"main-content",children:B?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"card",style:{marginBottom:14},children:(0,s.jsxs)("div",{className:"row spread",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{style:{margin:0,fontSize:"1.1rem"},children:(null==eH?void 0:eH.name)||"Project"}),(0,s.jsx)("p",{className:"muted",style:{fontSize:"0.78rem",marginTop:2},children:er.length>0?"".concat(er.length," memor").concat(1===er.length?"y":"ies"):"No memories yet"})]}),(0,s.jsx)("span",{className:"badge badge-brand",style:{fontFamily:"var(--display)",letterSpacing:"0.06em"},children:"Brain"})]})}),(0,s.jsx)("div",{className:"tab-bar",role:"tablist",children:[{id:"compose",label:"Compose"},{id:"memories",label:"Memories".concat(er.length?" (".concat(er.length,")"):"")},{id:"recall",label:"Recall"},{id:"api",label:"Integrations & API"}].map(e=>{let{id:t,label:a}=e;return(0,s.jsxs)("button",{role:"tab","aria-selected":A===t,className:"tab".concat(A===t?" active":""),onClick:()=>D(t),style:{position:"relative"},children:[a,A===t&&(0,s.jsx)(c.E.div,{layoutId:"activeAppTabIndicator",style:{position:"absolute",bottom:-2,left:0,right:0,height:2,backgroundColor:"var(--brand)",borderRadius:"2px 2px 0 0"},transition:{type:"spring",stiffness:300,damping:30}})]},t)})}),(0,s.jsxs)(d.M,{mode:"wait",children:["compose"===A&&(0,s.jsx)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,s.jsxs)("form",{onSubmit:eL,className:"stack card",style:{padding:32,background:"rgba(14, 18, 30, 0.4)",backdropFilter:"blur(40px)",borderColor:"rgba(0,229,255,0.1)",boxShadow:"0 24px 64px rgba(0,0,0,0.6)"},children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:16},children:[(0,s.jsxs)("h2",{style:{fontSize:"1.1rem",margin:0,display:"flex",alignItems:"center",gap:10},children:[(0,s.jsx)("span",{className:"brand-logo",style:{width:16,height:16},children:"⌘"}),"New Memory"]}),(0,s.jsx)("div",{className:"memory-type-grid",role:"group","aria-label":"Memory type",style:{display:"flex",gap:6},children:m.map(e=>{var t,a,i;return(0,s.jsx)("button",{type:"button",className:"type-chip".concat(X===e?" selected":""),onClick:()=>J(e),"aria-pressed":X===e,style:X===e?{background:null===(t=p[e])||void 0===t?void 0:t.bg,borderColor:null===(a=p[e])||void 0===a?void 0:a.color,color:null===(i=p[e])||void 0===i?void 0:i.color,padding:"4px 10px",fontSize:"0.75rem",borderRadius:999}:{padding:"4px 10px",fontSize:"0.75rem",borderRadius:999},children:e},e)})})]}),(0,s.jsx)("div",{className:"field",children:(0,s.jsx)("textarea",{id:"memory-content",value:$,onChange:e=>ee(e.target.value),placeholder:"What should future AI conversations remember about this project?",required:!0,disabled:en,maxLength:1e4,style:{minHeight:140,fontSize:"1.05rem",background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:12,padding:20}})}),(0,s.jsxs)("div",{className:"grid-2",style:{gap:16,marginTop:8},children:[(0,s.jsx)("div",{className:"field",style:{marginBottom:0},children:(0,s.jsx)("input",{id:"memory-title",type:"text",value:Q,onChange:e=>Z(e.target.value),placeholder:"Short title (optional)",disabled:en,maxLength:500,style:{background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)"}})}),(0,s.jsx)("div",{className:"field",style:{marginBottom:0},children:(0,s.jsx)("input",{id:"memory-tags",type:"text",value:et,onChange:e=>ea(e.target.value),placeholder:"Tags (comma-separated)",disabled:en,style:{background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)"}})})]}),(0,s.jsxs)("details",{className:"advanced-accordion",style:{background:"transparent",border:"1px solid rgba(255,255,255,0.05)",marginTop:8},children:[(0,s.jsx)("summary",{className:"advanced-summary",style:{padding:"12px 16px"},children:"Advanced metadata (URLs, Files)"}),(0,s.jsx)("div",{className:"stack-sm",style:{paddingTop:10},children:(0,s.jsxs)("div",{className:"grid-2",style:{gap:12},children:[(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[(0,s.jsx)("label",{htmlFor:"meta-url",children:"URL"}),(0,s.jsx)("input",{id:"meta-url",type:"url",value:es.url,onChange:e=>ei(t=>({...t,url:e.target.value})),placeholder:"https://…",disabled:en})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[(0,s.jsx)("label",{htmlFor:"meta-file",children:"File path"}),(0,s.jsx)("input",{id:"meta-file",type:"text",value:es.file_path,onChange:e=>ei(t=>({...t,file_path:e.target.value})),placeholder:"src/app/auth.py",disabled:en})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[(0,s.jsx)("label",{htmlFor:"meta-lang",children:"Language"}),(0,s.jsx)("input",{id:"meta-lang",type:"text",value:es.language,onChange:e=>ei(t=>({...t,language:e.target.value})),placeholder:"python, typescript…",disabled:en})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[(0,s.jsx)("label",{htmlFor:"meta-model",children:"Model / tool"}),(0,s.jsx)("input",{id:"meta-model",type:"text",value:es.model,onChange:e=>ei(t=>({...t,model:e.target.value})),placeholder:"gpt-4o, claude-3-5-sonnet…",disabled:en})]})]})})]}),(0,s.jsxs)("div",{className:"row",style:{gap:8},children:[(0,s.jsxs)("button",{type:"submit",className:"btn primary",disabled:!$.trim()||en,"aria-busy":en,children:[en&&(0,s.jsx)("span",{className:"spinner"}),en?"Saving…":"Publish memory"]}),($||Q||et)&&(0,s.jsx)("button",{type:"button",className:"btn ghost sm",onClick:()=>{ee(""),Z(""),ea(""),ei({url:"",file_path:"",language:"",model:""})},children:"Clear"})]})]})},"compose"),"memories"===A&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:14},children:[(0,s.jsxs)("h2",{style:{margin:0,fontSize:"1rem"},children:["All memories",er.length>0&&(0,s.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:er.length})]}),(0,s.jsx)("button",{className:"btn secondary sm",onClick:eF,disabled:ec,children:ec?(0,s.jsx)("span",{className:"spinner"}):"Refresh"})]}),ec?(0,s.jsx)("div",{className:"stack",children:[1,2,3].map(e=>(0,s.jsx)(o.O,{height:"64px",radius:"8px"},e))}):0===er.length?(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("span",{className:"empty-icon",children:"\uD83D\uDCAD"}),(0,s.jsx)("p",{children:"No memories yet. Go to Compose to add the first one."}),(0,s.jsx)("button",{className:"btn primary sm",onClick:()=>D("compose"),style:{marginTop:8},children:"Add memory"})]}):(0,s.jsx)(c.E.div,{className:"memory-list stack-sm",role:"list",variants:g,initial:"hidden",animate:"show",children:er.map(e=>{var t;return(0,s.jsxs)(c.E.div,{variants:x,className:"memory-row card",role:"listitem",style:{display:"flex",flexWrap:"wrap",gap:12,padding:"16px 20px",background:"rgba(20, 26, 43, 0.4)",border:"1px solid rgba(0, 229, 255, 0.05)"},children:[(0,s.jsxs)("div",{className:"row",style:{gap:8,flexShrink:0,alignItems:"flex-start",marginTop:2},children:[(0,s.jsx)(u,{type:e.type}),e.source&&"manual"!==e.source&&(0,s.jsx)("span",{style:{fontSize:"0.68rem",color:"var(--muted)",fontFamily:"var(--mono)",textTransform:"uppercase"},children:e.source})]}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0},children:[e.title&&(0,s.jsx)("p",{style:{fontSize:"0.9rem",fontWeight:600,color:"var(--ink)",margin:"0 0 6px",letterSpacing:"0.01em"},children:e.title}),(0,s.jsx)("span",{className:"memory-row-content",style:{color:"var(--ink-2)",fontSize:"0.88rem",lineHeight:1.6},children:e.content}),(null===(t=e.tags)||void 0===t?void 0:t.length)>0&&(0,s.jsx)("div",{className:"row",style:{gap:6,marginTop:10,flexWrap:"wrap"},children:e.tags.map(e=>(0,s.jsx)("span",{style:{fontSize:"0.7rem",color:"var(--brand)",background:"var(--brand-light)",border:"1px solid rgba(0,229,255,0.15)",borderRadius:999,padding:"2px 10px",fontFamily:"var(--mono)"},children:e},e))})]}),(0,s.jsx)("span",{className:"memory-row-time",title:new Date(e.created_at).toLocaleString(),style:{fontSize:"0.75rem",color:"var(--muted)",fontFamily:"var(--mono)"},children:h(e.created_at)})]},e.id)})})]},"memories"),"recall"===A&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack",children:[(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{style:{marginBottom:12,fontSize:"1rem"},children:"Recall context"}),(0,s.jsxs)("form",{onSubmit:eM,className:"stack",children:[(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{htmlFor:"recall-q",children:"What do you need context on?"}),(0,s.jsx)("input",{id:"recall-q",value:em,onChange:e=>ep(e.target.value),placeholder:"e.g. database migrations, auth model, performance…",disabled:ey,autoComplete:"off"}),(0,s.jsx)("span",{className:"field-hint",children:"Leave blank to get the most recent memories."})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("button",{type:"submit",className:"btn primary",disabled:ey,"aria-busy":ey,children:[ey&&(0,s.jsx)("span",{className:"spinner"}),ey?"Recalling…":"Run recall"]}),em&&(0,s.jsx)("button",{type:"button",className:"btn ghost sm",onClick:()=>ep(""),children:"Clear"})]})]})]}),(eh.length>0||eg)&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,s.jsxs)("h2",{style:{margin:0,fontSize:"1rem"},children:["Results",eh.length>0&&(0,s.jsx)("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:eh.length})]}),(0,s.jsxs)("div",{className:"row",style:{gap:6},children:[(0,s.jsx)("button",{className:"btn secondary sm",onClick:eG,disabled:!eg,children:"Copy"}),(0,s.jsx)("button",{className:"btn secondary sm",onClick:function(){if(!eg)return;let e=URL.createObjectURL(new Blob([eg],{type:"text/plain;charset=utf-8"}));Object.assign(document.createElement("a"),{href:e,download:"memory-pack-".concat(B,".txt")}).click(),URL.revokeObjectURL(e),t.success("Memory pack downloaded.")},disabled:!eg,children:"Download .txt"})]})]}),(0,s.jsx)("div",{className:"recall-result",style:{marginBottom:16},children:eh.map(e=>(0,s.jsxs)("div",{className:"recall-item",children:[(0,s.jsxs)("div",{className:"recall-item-header",children:[(0,s.jsx)(u,{type:e.type,size:"xs"}),null!=e.rank_score&&(0,s.jsxs)("span",{className:"recall-rank",title:"FTS relevance score",children:["★ ",e.rank_score.toFixed(3)]}),(0,s.jsx)("span",{className:"memory-row-time",title:new Date(e.created_at).toLocaleString(),children:h(e.created_at)})]}),(0,s.jsx)("p",{style:{fontSize:"0.88rem",color:"var(--ink-2)",lineHeight:1.55,margin:0},children:e.content})]},e.id))}),(0,s.jsx)("label",{className:"label",style:{marginBottom:6},children:"Memory pack (paste-ready)"}),(0,s.jsx)("pre",{className:"pre",children:eg})]})]},"recall"),"api"===A&&(0,s.jsx)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("h2",{style:{marginBottom:8,fontSize:"1.1rem",display:"flex",gap:8,alignItems:"center"},children:[(0,s.jsx)("span",{className:"badge badge-brand",children:"New"})," AI Agent Integrations"]}),(0,s.jsx)("p",{style:{fontSize:"0.85rem",color:"var(--ink-2)",marginBottom:16},children:"Connect thecontextcache™ directly to ChatGPT, Claude Desktop, and local IDEs like Cursor or VS Code."}),(0,s.jsxs)("div",{className:"grid-2",style:{gap:16,marginBottom:24},children:[(0,s.jsxs)("div",{className:"card-sm",style:{background:"var(--panel-2)",border:"1px solid var(--line)",padding:16},children:[(0,s.jsx)("h3",{style:{color:"var(--brand)",marginBottom:4},children:"\uD83E\uDDE0 ChatGPT Custom GPTs"}),(0,s.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--muted)",margin:"0 0 12px"},children:"Add the OpenAPI schema as an Action so ChatGPT can Recall project context mid-conversation."}),(0,s.jsx)("a",{href:"".concat(apiBase,"/openapi.json"),target:"_blank",className:"btn secondary sm",style:{width:"100%"},children:"View OpenAPI Schema ↗"})]}),(0,s.jsxs)("div",{className:"card-sm",style:{background:"var(--panel-2)",border:"1px solid var(--line)",padding:16},children:[(0,s.jsx)("h3",{style:{color:"var(--violet)",marginBottom:4},children:"\uD83E\uDD16 Claude MCP Server"}),(0,s.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--muted)",margin:"0 0 12px"},children:"Connect Claude Desktop using the Model Context Protocol to dynamically pull architecture docs."}),(0,s.jsx)("button",{className:"btn secondary sm",style:{width:"100%"},onClick:()=>t.info("MCP plugin coming soon."),children:"View Setup Guide →"})]})]}),(0,s.jsx)("hr",{className:"divider",style:{margin:"24px 0"}}),(0,s.jsx)("h2",{style:{marginBottom:12,fontSize:"1rem"},children:"API Keys"}),(0,s.jsx)("p",{style:{fontSize:"0.82rem",color:"var(--muted)",marginBottom:16},children:"Generate a Personal Access Token to authenticate external agents as yourself. Keep these secret."}),(0,s.jsxs)("form",{onSubmit:eO,className:"row",style:{gap:8,marginBottom:24},children:[(0,s.jsx)("div",{className:"field",style:{flex:1,marginBottom:0},children:(0,s.jsx)("input",{type:"text",value:ez,onChange:e=>e_(e.target.value),placeholder:"e.g. ChatGPT Personal Key",disabled:eN,maxLength:100})}),(0,s.jsx)("button",{type:"submit",className:"btn primary",disabled:!ez.trim()||eN,"aria-busy":eN,children:eN?(0,s.jsx)("span",{className:"spinner"}):"Generate Key"})]}),eC&&(0,s.jsxs)("div",{className:"alert ok",style:{marginBottom:24,padding:"16px 20px",display:"flex",flexDirection:"column",gap:8},children:[(0,s.jsx)("strong",{children:"Save this key now!"}),(0,s.jsx)("p",{style:{fontSize:"0.82rem",color:"var(--ink)"},children:"It will not be shown again. Use it as a Bearer token in the `X-Api-Key` or `Authorization` header."}),(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("code",{style:{flex:1,padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--ok-light)",userSelect:"all",wordBreak:"break-all"},children:eC})})]}),(0,s.jsxs)("div",{className:"stack-sm",children:[(0,s.jsxs)("label",{className:"label",children:["Active Keys for ",(null==eH?void 0:eH.name)||"this org"]}),ef?(0,s.jsx)(o.O,{height:40}):0===ej.length?(0,s.jsx)("p",{className:"muted",style:{fontSize:"0.85rem"},children:"No active API keys found."}):ej.map(e=>(0,s.jsxs)("div",{className:"row spread card-sm",style:{background:"var(--bg-2)",border:"1px solid var(--line-2)"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:"0.88rem",fontWeight:600,color:"var(--ink)"},children:e.name||"Unnamed Key"}),(0,s.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--muted)",fontFamily:"var(--mono)",marginTop:2},children:[e.prefix,"... • Expires ",new Date(e.expires_at).toLocaleDateString()]})]}),(0,s.jsx)("button",{className:"btn ghost sm",onClick:()=>eE(e.id),style:{color:"var(--danger)"},children:"Revoke"})]},e.id))]})]})},"api")]})]}):(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("span",{className:"empty-icon",children:"\uD83D\uDCC1"}),(0,s.jsx)("h2",{style:{marginBottom:6},children:"No project selected"}),(0,s.jsx)("p",{children:"Create your first project to start capturing memories."}),(0,s.jsx)("button",{className:"btn primary sm",onClick:()=>M(!0),style:{marginTop:8},children:"New project"})]})})})]})}}},function(e){e.O(0,[924,927,971,117,744],function(){return e(e.s=5262)}),_N_E=e.O()}]);