(()=>{var e={};e.id=191,e.ids=[191],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6283:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.Z,__next_app__:()=>m,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>o}),a(8893),a(643),a(9833),a(9889),a(2001),a(784),a(1888);var s=a(3191),r=a(8716),i=a(7506),n=a(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(t,l);let o=["",{children:["app",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8893)),"/Users/nd/Documents/contextcache/web/app/app/page.js"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,643)),"/Users/nd/Documents/contextcache/web/app/app/layout.js"],error:[()=>Promise.resolve().then(a.bind(a,9833)),"/Users/nd/Documents/contextcache/web/app/app/error.js"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,9889)),"/Users/nd/Documents/contextcache/web/app/layout.js"],template:[()=>Promise.resolve().then(a.bind(a,2001)),"/Users/nd/Documents/contextcache/web/app/template.js"],error:[()=>Promise.resolve().then(a.bind(a,784)),"/Users/nd/Documents/contextcache/web/app/error.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,1888)),"/Users/nd/Documents/contextcache/web/app/not-found.js"]}],d=["/Users/nd/Documents/contextcache/web/app/app/page.js"],c="/app/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/page",pathname:"/app",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8602:(e,t,a)=>{Promise.resolve().then(a.bind(a,1644)),Promise.resolve().then(a.bind(a,3633))},9631:(e,t,a)=>{Promise.resolve().then(a.bind(a,1587))},1467:(e,t,a)=>{Promise.resolve().then(a.bind(a,2362))},1644:(e,t,a)=>{"use strict";a.d(t,{ActiveLink:()=>d});var s=a(326),r=a(434),i=a(7577),n=a(5047);function l({href:e,exact:t,icon:a,label:i}){let l=(0,n.usePathname)(),o=t?l===e:l.startsWith(e);return(0,s.jsxs)(r.default,{href:e,style:{display:"flex",alignItems:"center",gap:10,padding:"8px 12px",borderRadius:8,textDecoration:"none",fontSize:"0.88rem",fontWeight:o?600:400,color:o?"var(--ink, #e2eef9)":"var(--muted, #94adc8)",background:o?"var(--panel-2, rgba(255,255,255,0.06))":"transparent",transition:"background 0.15s, color 0.15s"},children:[s.jsx("span",{style:{width:20,textAlign:"center",flexShrink:0,fontSize:"1rem"},children:a}),i]})}function o({href:e,icon:t,label:a}){return(0,s.jsxs)(r.default,{href:e,style:{display:"flex",alignItems:"center",gap:10,padding:"8px 12px",borderRadius:8,textDecoration:"none",fontSize:"0.88rem",fontWeight:400,color:"var(--muted, #94adc8)"},children:[s.jsx("span",{style:{width:20,textAlign:"center",flexShrink:0,fontSize:"1rem"},children:t}),a]})}function d({href:e,exact:t,icon:a,label:r}){return s.jsx(i.Suspense,{fallback:s.jsx(o,{href:e,icon:a,label:r}),children:s.jsx(l,{href:e,exact:t,icon:a,label:r})})}},3633:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var s=a(326),r=a(7577);function i(){let[e,t]=(0,r.useState)("");return e?(0,s.jsxs)("div",{style:{padding:"0 16px 14px",borderBottom:"1px solid var(--line, rgba(255,255,255,0.08))",marginBottom:8},children:[s.jsx("div",{style:{fontSize:"0.62rem",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",color:"var(--muted, #94adc8)",marginBottom:3},children:"Workspace"}),s.jsx("div",{style:{fontSize:"0.82rem",fontWeight:600,color:"var(--ink, #e2eef9)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e})]}):null}},1587:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(326);a(7577);var r=a(434);function i({error:e,reset:t}){return(0,s.jsxs)("div",{style:{minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 24px",textAlign:"center",gap:16},children:[s.jsx("div",{style:{fontSize:40},children:"⚠️"}),s.jsx("h2",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Something went wrong"}),s.jsx("p",{style:{margin:0,color:"var(--muted)",fontSize:"0.88rem",maxWidth:380},children:e?.message||"An unexpected error occurred in the application."}),(0,s.jsxs)("div",{style:{display:"flex",gap:10},children:[s.jsx("button",{onClick:t,className:"btn primary sm",style:{padding:"8px 20px"},children:"Try again"}),s.jsx(r.default,{href:"/",className:"btn ghost sm",style:{padding:"8px 20px"},children:"Go home"})]})]})}},2362:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b,dynamic:()=>h});var s=a(326),r=a(7577),i=a(5047),n=a(434),l=a(1207),o=a(9776),d=a(874),c=a(982),m=a(9086);let p=["decision","finding","definition","note","link","todo","chat","doc","code"],h="force-dynamic",u={decision:{color:"#00D4FF",bg:"rgba(0,212,255,0.12)"},finding:{color:"#A78BFA",bg:"rgba(167,139,250,0.12)"},definition:{color:"#00E5A0",bg:"rgba(0,229,160,0.12)"},note:{color:"#FFB800",bg:"rgba(255,184,0,0.12)"},link:{color:"#FF6B6B",bg:"rgba(255,107,107,0.12)"},todo:{color:"#F472B6",bg:"rgba(244,114,182,0.12)"}};function x({type:e,size:t="sm"}){let a=u[e]||{color:"var(--muted)",bg:"var(--panel-2)"};return s.jsx("span",{style:{color:a.color,background:a.bg,border:`1px solid ${a.color}30`,padding:"sm"===t?"1px 7px":"2px 9px",borderRadius:999,fontSize:"sm"===t?"0.7rem":"0.78rem",fontWeight:700,letterSpacing:"0.04em",fontFamily:"var(--mono)",whiteSpace:"nowrap",flexShrink:0},children:e})}let g={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},y={hidden:{opacity:0,y:15},show:{opacity:1,y:0,transition:{type:"spring",stiffness:400,damping:30}}};function f({usage:e,isUnlimited:t}){let a=e?.limits??{},r=[{label:"memories",used:e?.memories_created??0,max:a.memories_per_day??0,color:"#00D4FF"},{label:"recalls",used:e?.recall_queries??0,max:a.recalls_per_day??0,color:"#A78BFA"},{label:"projects",used:e?.projects_created??0,max:a.projects_per_day??0,color:"#00E5A0"}];return(0,s.jsxs)("div",{style:{padding:"10px 12px",borderTop:"1px solid var(--line)",marginTop:"auto"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[s.jsx("span",{style:{fontSize:"0.62rem",letterSpacing:"0.1em",color:"var(--muted)",fontFamily:"var(--mono)",fontWeight:700},children:"TODAY'S USAGE"}),t&&s.jsx("span",{style:{fontSize:"0.62rem",color:"var(--ok)",fontFamily:"var(--mono)",letterSpacing:"0.06em"},children:"∞ unlimited"})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:r.map(({label:e,used:a,max:r,color:i})=>{let n=r>0&&!t?Math.min(100,a/r*100):0,l=n>=80,o=n>=100,d=t?`${e}: ${a} / unlimited`:r>0?`${e}: ${a} / ${r}`:`${e}: ${a} (no configured limit)`;return(0,s.jsxs)("div",{title:d,children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.68rem",color:"var(--ink-2)",fontFamily:"var(--mono)",marginBottom:3},children:[s.jsx("span",{children:e}),s.jsx("span",{style:{color:o?"var(--danger)":l?"var(--warn)":"var(--muted)"},children:t?`${a} / ∞`:r>0?`${a} / ${r}`:`${a}`})]}),r>0&&!t&&s.jsx("div",{style:{height:3,borderRadius:99,background:"var(--panel-3)",overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",borderRadius:99,width:`${n}%`,background:o?"#ef4444":l?"#f59e0b":"#00D4FF",transition:"width 0.4s ease"}})})]},e)})})]})}function b(){let e=(0,i.useRouter)(),t=(0,o.p)(),[a,h]=(0,r.useState)(!0),[b,j]=(0,r.useState)(null),[v,S]=(0,r.useState)(null),[w,N]=(0,r.useState)([]),[k,C]=(0,r.useState)([]),[P,z]=(0,r.useState)(""),[D,A]=(0,r.useState)(""),[B,_]=(0,r.useState)("compose"),[R,$]=(0,r.useState)(""),[T,F]=(0,r.useState)(""),[O,E]=(0,r.useState)(!1),[I,L]=(0,r.useState)(!1),[U,W]=(0,r.useState)(""),[M,G]=(0,r.useState)(!1),[q,H]=(0,r.useState)(!1),[K,J]=(0,r.useState)("decision"),[V,X]=(0,r.useState)("manual"),[Y,Z]=(0,r.useState)(""),[Q,ee]=(0,r.useState)(""),[et,ea]=(0,r.useState)(""),[es,er]=(0,r.useState)({url:"",file_path:"",language:"",model:""}),[ei,en]=(0,r.useState)(!1),[el,eo]=(0,r.useState)([]),[ed,ec]=(0,r.useState)(!1),[em,ep]=(0,r.useState)(""),[eh,eu]=(0,r.useState)([]),[ex,eg]=(0,r.useState)(""),[ey,ef]=(0,r.useState)(!1),[eb,ej]=(0,r.useState)("text"),[ev,eS]=(0,r.useState)([]),[ew,eN]=(0,r.useState)(!1),[ek,eC]=(0,r.useState)(!1),[eP,ez]=(0,r.useState)(""),[eD,eA]=(0,r.useState)("");function eB(a){if(a instanceof l.MS){if("auth"===a.kind){e.replace("/auth?reason=expired");return}if("forbidden"===a.kind){t.error("You don't have permission for this action.");return}if("rate_limit"===a.kind){t.warn("Too many requests. Please wait a moment.");return}if("network"===a.kind){t.error("Backend unreachable. Check server status.");return}}t.error(a.message||"Something went wrong.")}async function e_(e){if(e&&e!==P){z(e),A(""),N([]),eo([]),eu([]),eg(""),ep(""),_("compose");try{let[e,a]=await Promise.all([(0,l.SC)("/projects"),(0,l.SC)("/me/usage").catch(()=>null)]);N(e),e.length&&A(String(e[0].id)),a&&S(a),t.success("Switched organization.")}catch(e){z(P),eB(e)}}}async function eR(){eN(!0);try{let e=await (0,l.SC)(`/orgs/${P}/api-keys`);eS(e)}catch(e){eB(e)}finally{eN(!1)}}async function e$(e){if(e.preventDefault(),P&&!ek&&eD.trim()){eC(!0),ez("");try{let e=await (0,l.SC)(`/orgs/${P}/api-keys`,{method:"POST",body:JSON.stringify({name:eD.trim(),expires_in_days:90})});ez(e.api_key),eA(""),t.success("API key generated successfully."),await eR()}catch(e){eB(e)}finally{eC(!1)}}}async function eT(e){if(confirm("Are you sure you want to revoke this key? Any AI agents using it will be instantly disconnected."))try{await (0,l.SC)(`/orgs/${P}/api-keys/${e}/revoke`,{method:"POST"}),t.success("API key revoked."),await eR()}catch(e){eB(e)}}async function eF(){ec(!0);try{let e=await (0,l.SC)(`/projects/${D}/memories`);eo(e)}catch(e){eB(e)}finally{ec(!1)}}function eO(e){e!==D&&(A(e),_("compose"),eu([]),eg(""),ep(""),ee(""),Z(""),ea(""),er({url:"",file_path:"",language:"",model:""}))}async function eE(e){if(e.preventDefault(),T.trim()&&!O){E(!0);try{let e=await (0,l.SC)("/projects",{method:"POST",body:JSON.stringify({name:T.trim()})});t.success(`Project "${e.name}" created.`),F(""),L(!1);let a=await (0,l.SC)("/projects");N(a),eO(String(e.id))}catch(e){eB(e)}finally{E(!1)}}}async function eI(e){if(e.preventDefault(),U.trim()&&!M){G(!0);try{let e=await (0,l.SC)("/orgs",{method:"POST",body:JSON.stringify({name:U.trim()})});t.success(`Organization "${e.name}" created.`),W(""),H(!1);let a=await (0,l.SC)("/me/orgs");C(a||[]),e_(String(e.id))}catch(e){eB(e)}finally{G(!1)}}}async function eL(e){if(e.preventDefault(),!Q.trim()||!D||ei)return;en(!0);let a=Object.fromEntries(Object.entries(es).filter(([,e])=>e.trim())),s=et.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean);try{await (0,l.SC)(`/projects/${D}/memories`,{method:"POST",body:JSON.stringify({type:K,source:V,title:Y.trim()||null,content:Q.trim(),metadata:a,tags:s})}),t.success("Memory saved."),ee(""),Z(""),ea(""),er({url:"",file_path:"",language:"",model:""}),await eF()}catch(e){eB(e)}finally{en(!1)}}async function eU(e,a){if(e?.preventDefault(),!D||ey)return;let s=a||eb||"text";ef(!0),eu([]),eg("");try{let e=await (0,l.SC)(`/projects/${D}/recall?query=${encodeURIComponent(em)}&limit=10&format=${s}`);eu(e.items||[]),eg(e.memory_pack_text||""),e.items?.length||t.info("No memories matched — showing recent instead.")}catch(e){eB(e)}finally{ef(!1)}}async function eW(){if(ex)try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(ex);else{let e=Object.assign(document.createElement("textarea"),{value:ex,style:"position:fixed;left:-9999px;top:-9999px"});document.body.appendChild(e),e.select();let t=document.execCommand("copy");if(document.body.removeChild(e),!t)throw Error()}t.success("Memory pack copied to clipboard.")}catch{t.error("Copy failed — use Download instead, or switch to HTTPS.")}}let eM=w.find(e=>String(e.id)===D),eG=w.filter(e=>!R||e.name.toLowerCase().includes(R.toLowerCase()));return a?(0,s.jsxs)("div",{className:"app-layout",children:[(0,s.jsxs)("aside",{className:"sidebar",children:[s.jsx(d.O,{height:"1rem",width:"80px",style:{marginBottom:8}}),[1,2,3].map(e=>s.jsx(d.O,{height:"36px",radius:"8px"},e))]}),(0,s.jsxs)("div",{className:"main-content",children:[s.jsx(d.A,{rows:4}),s.jsx(d.A,{rows:3})]})]}):(0,s.jsxs)("div",{className:"app-layout",children:[(0,s.jsxs)("aside",{className:"sidebar","aria-label":"Projects",children:[(0,s.jsxs)("div",{className:"sidebar-header",children:[(0,s.jsxs)("div",{style:{paddingBottom:8},children:[s.jsx("label",{htmlFor:"org-switch",style:{fontSize:"0.72rem",marginBottom:4,color:"var(--muted)"},children:"Organization Scope"}),s.jsx("select",{id:"org-switch",value:P,onChange:e=>e_(e.target.value),style:{fontSize:"0.82rem",padding:"6px 10px"},disabled:0===k.length,children:0===k.length?s.jsx("option",{value:"",children:"No organizations available"}):k.map(e=>s.jsx("option",{value:String(e.id),children:e.name},e.id))}),(0,s.jsxs)("div",{className:"muted row spread",style:{fontSize:"0.7rem",marginTop:5},children:[s.jsx("span",{children:k.length>1?"Switch org to view its projects and memories.":"Project list is scoped to this organization."}),s.jsx("button",{className:"btn text xs",style:{padding:0},onClick:()=>H(e=>!e),children:q?"Cancel":"+ New Org"})]})]}),q&&(0,s.jsxs)("form",{onSubmit:eI,className:"stack-sm",style:{paddingBottom:16},children:[s.jsx("input",{autoFocus:!0,value:U,onChange:e=>W(e.target.value),placeholder:"Organization Name",required:!0,maxLength:200,style:{fontSize:"0.85rem",padding:"7px 10px"},disabled:M}),s.jsx("button",{type:"submit",className:"btn primary sm",disabled:!U.trim()||M,"aria-busy":M,style:{width:"100%"},children:M?s.jsx("span",{className:"spinner"}):"Create Organization"})]}),(0,s.jsxs)("div",{className:"row spread",style:{paddingBottom:6},children:[(0,s.jsxs)("span",{className:"sidebar-section-label",children:["Projects",w.length>0&&(0,s.jsxs)("span",{style:{color:"var(--muted)",fontWeight:400,marginLeft:5},children:["(",w.length,")"]})]}),s.jsx("button",{className:"btn ghost sm",onClick:()=>L(e=>!e),"aria-label":I?"Cancel":"New project",title:"New project",style:{padding:"2px 10px",fontSize:"1.1rem",lineHeight:1},children:I?"\xd7":"+"})]}),I&&(0,s.jsxs)("form",{onSubmit:eE,className:"stack-sm",style:{paddingBottom:8},children:[s.jsx("input",{autoFocus:!0,value:T,onChange:e=>F(e.target.value),placeholder:"Project name",required:!0,maxLength:200,style:{fontSize:"0.85rem",padding:"7px 10px"},disabled:O}),(0,s.jsxs)("div",{className:"row",style:{gap:6},children:[s.jsx("button",{type:"submit",className:"btn primary sm",disabled:!T.trim()||O,"aria-busy":O,style:{flex:1},children:O?s.jsx("span",{className:"spinner"}):"Create"}),s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>{L(!1),F("")},children:"Cancel"})]})]}),w.length>6&&s.jsx("div",{style:{paddingBottom:6},children:s.jsx("input",{value:R,onChange:e=>$(e.target.value),placeholder:"Filter projects…",style:{fontSize:"0.82rem",padding:"6px 10px"},"aria-label":"Filter projects"})})]}),s.jsx("div",{className:"sidebar-projects",children:0===w.length?s.jsx("p",{className:"muted",style:{fontSize:"0.82rem",padding:"8px 4px"},children:"No projects yet. Hit + to create one."}):0===eG.length?(0,s.jsxs)("p",{className:"muted",style:{fontSize:"0.82rem",padding:"8px 4px"},children:["No projects match “",R,"”."]}):eG.map(e=>(0,s.jsxs)("button",{className:`project-item${String(e.id)===D?" active":""}`,onClick:()=>eO(String(e.id)),title:e.name,children:[s.jsx("span",{className:"proj-dot"}),s.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1,textAlign:"left"},children:e.name})]},e.id))}),v&&s.jsx(f,{usage:v,isUnlimited:b?.is_unlimited})]}),s.jsx("main",{className:"main-content",children:D?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"card",style:{marginBottom:14},children:(0,s.jsxs)("div",{className:"row spread",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:eM?.name||"Project"}),s.jsx("p",{className:"muted",style:{fontSize:"0.78rem",marginTop:2},children:el.length>0?`${el.length} memor${1===el.length?"y":"ies"}`:"No memories yet"})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx(n.default,{href:`/app/projects/${D}/inbox`,style:{display:"inline-flex",alignItems:"center",gap:5,padding:"4px 12px",borderRadius:8,border:"1px solid var(--border)",background:"var(--surface-1)",color:"var(--text)",fontSize:12,fontWeight:600,textDecoration:"none",whiteSpace:"nowrap"},title:"Review AI-suggested memory drafts",children:"\uD83D\uDCE5 Inbox"}),s.jsx("span",{className:"badge badge-brand",style:{fontFamily:"var(--display)",letterSpacing:"0.06em"},children:"Brain"})]})]})}),s.jsx("div",{className:"tab-bar",role:"tablist",children:[{id:"compose",label:"Compose"},{id:"memories",label:`Memories${el.length?` (${el.length})`:""}`},{id:"recall",label:"Recall"},{id:"api",label:"Integrations & API"}].map(({id:e,label:t})=>(0,s.jsxs)("button",{role:"tab","aria-selected":B===e,className:`tab${B===e?" active":""}`,onClick:()=>_(e),style:{position:"relative"},children:[t,B===e&&s.jsx(c.E.div,{layoutId:"activeAppTabIndicator",style:{position:"absolute",bottom:-2,left:0,right:0,height:2,backgroundColor:"var(--brand)",borderRadius:"2px 2px 0 0"},transition:{type:"spring",stiffness:300,damping:30}})]},e))}),(0,s.jsxs)(m.M,{mode:"wait",children:["compose"===B&&s.jsx(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,s.jsxs)("form",{onSubmit:eL,className:"stack card",style:{padding:32,background:"rgba(14, 18, 30, 0.4)",backdropFilter:"blur(40px)",borderColor:"rgba(0,229,255,0.1)",boxShadow:"0 24px 64px rgba(0,0,0,0.6)"},children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:16},children:[(0,s.jsxs)("h2",{style:{fontSize:"1.1rem",margin:0,display:"flex",alignItems:"center",gap:10},children:[s.jsx("span",{className:"brand-logo",style:{width:16,height:16},children:"⌘"}),"New Memory"]}),s.jsx("div",{className:"memory-type-grid",role:"group","aria-label":"Memory type",style:{display:"flex",gap:6},children:p.map(e=>s.jsx("button",{type:"button",className:`type-chip${K===e?" selected":""}`,onClick:()=>J(e),"aria-pressed":K===e,style:K===e?{background:u[e]?.bg,borderColor:u[e]?.color,color:u[e]?.color,padding:"4px 10px",fontSize:"0.75rem",borderRadius:999}:{padding:"4px 10px",fontSize:"0.75rem",borderRadius:999},children:e},e))})]}),s.jsx("div",{className:"field",children:s.jsx("textarea",{id:"memory-content",value:Q,onChange:e=>ee(e.target.value),placeholder:"What should future AI conversations remember about this project?",required:!0,disabled:ei,maxLength:1e4,style:{minHeight:140,fontSize:"1.05rem",background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:12,padding:20}})}),(0,s.jsxs)("div",{className:"grid-2",style:{gap:16,marginTop:8},children:[s.jsx("div",{className:"field",style:{marginBottom:0},children:s.jsx("input",{id:"memory-title",type:"text",value:Y,onChange:e=>Z(e.target.value),placeholder:"Short title (optional)",disabled:ei,maxLength:500,style:{background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)"}})}),s.jsx("div",{className:"field",style:{marginBottom:0},children:s.jsx("input",{id:"memory-tags",type:"text",value:et,onChange:e=>ea(e.target.value),placeholder:"Tags (comma-separated)",disabled:ei,style:{background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)"}})})]}),(0,s.jsxs)("details",{className:"advanced-accordion",style:{background:"transparent",border:"1px solid rgba(255,255,255,0.05)",marginTop:8},children:[s.jsx("summary",{className:"advanced-summary",style:{padding:"12px 16px"},children:"Advanced metadata (URLs, Files)"}),s.jsx("div",{className:"stack-sm",style:{paddingTop:10},children:(0,s.jsxs)("div",{className:"grid-2",style:{gap:12},children:[(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-url",children:"URL"}),s.jsx("input",{id:"meta-url",type:"url",value:es.url,onChange:e=>er(t=>({...t,url:e.target.value})),placeholder:"https://…",disabled:ei})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-file",children:"File path"}),s.jsx("input",{id:"meta-file",type:"text",value:es.file_path,onChange:e=>er(t=>({...t,file_path:e.target.value})),placeholder:"src/app/auth.py",disabled:ei})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-lang",children:"Language"}),s.jsx("input",{id:"meta-lang",type:"text",value:es.language,onChange:e=>er(t=>({...t,language:e.target.value})),placeholder:"python, typescript…",disabled:ei})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-model",children:"Model / tool"}),s.jsx("input",{id:"meta-model",type:"text",value:es.model,onChange:e=>er(t=>({...t,model:e.target.value})),placeholder:"gpt-4o, claude-3-5-sonnet…",disabled:ei})]})]})})]}),(0,s.jsxs)("div",{className:"row",style:{gap:8},children:[(0,s.jsxs)("button",{type:"submit",className:"btn primary",disabled:!Q.trim()||ei,"aria-busy":ei,children:[ei&&s.jsx("span",{className:"spinner"}),ei?"Saving…":"Publish memory"]}),(Q||Y||et)&&s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>{ee(""),Z(""),ea(""),er({url:"",file_path:"",language:"",model:""})},children:"Clear"})]})]})},"compose"),"memories"===B&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:14},children:[(0,s.jsxs)("h2",{style:{margin:0,fontSize:"1rem"},children:["All memories",el.length>0&&s.jsx("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:el.length})]}),s.jsx("button",{className:"btn secondary sm",onClick:eF,disabled:ed,children:ed?s.jsx("span",{className:"spinner"}):"Refresh"})]}),ed?s.jsx("div",{className:"stack",children:[1,2,3].map(e=>s.jsx(d.O,{height:"64px",radius:"8px"},e))}):0===el.length?(0,s.jsxs)("div",{className:"empty-state",children:[s.jsx("span",{className:"empty-icon",children:"\uD83D\uDCAD"}),s.jsx("p",{children:"No memories yet. Go to Compose to add the first one."}),s.jsx("button",{className:"btn primary sm",onClick:()=>_("compose"),style:{marginTop:8},children:"Add memory"})]}):s.jsx(c.E.div,{className:"memory-list stack-sm",role:"list",variants:g,initial:"hidden",animate:"show",children:el.map(e=>(0,s.jsxs)(c.E.div,{variants:y,className:"memory-row card",role:"listitem",style:{display:"flex",flexWrap:"wrap",gap:12,padding:"16px 20px",background:"rgba(20, 26, 43, 0.4)",border:"1px solid rgba(0, 229, 255, 0.05)"},children:[(0,s.jsxs)("div",{className:"row",style:{gap:8,flexShrink:0,alignItems:"flex-start",marginTop:2},children:[s.jsx(x,{type:e.type}),e.source&&"manual"!==e.source&&s.jsx("span",{style:{fontSize:"0.68rem",color:"var(--muted)",fontFamily:"var(--mono)",textTransform:"uppercase"},children:e.source})]}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0},children:[e.title&&s.jsx("p",{style:{fontSize:"0.9rem",fontWeight:600,color:"var(--ink)",margin:"0 0 6px",letterSpacing:"0.01em"},children:e.title}),s.jsx("span",{className:"memory-row-content",style:{color:"var(--ink-2)",fontSize:"0.88rem",lineHeight:1.6},children:e.content}),e.tags?.length>0&&s.jsx("div",{className:"row",style:{gap:6,marginTop:10,flexWrap:"wrap"},children:e.tags.map(e=>s.jsx("span",{style:{fontSize:"0.7rem",color:"var(--brand)",background:"var(--brand-light)",border:"1px solid rgba(0,229,255,0.15)",borderRadius:999,padding:"2px 10px",fontFamily:"var(--mono)"},children:e},e))})]}),s.jsx("span",{className:"memory-row-time",title:new Date(e.created_at).toLocaleString(),style:{fontSize:"0.75rem",color:"var(--muted)",fontFamily:"var(--mono)"},children:(e.created_at,"")})]},e.id))})]},"memories"),"recall"===B&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack",children:[(0,s.jsxs)("div",{className:"card",children:[s.jsx("h2",{style:{marginBottom:12,fontSize:"1rem"},children:"Recall context"}),(0,s.jsxs)("form",{onSubmit:eU,className:"stack",children:[(0,s.jsxs)("div",{className:"field",children:[s.jsx("label",{htmlFor:"recall-q",children:"What do you need context on?"}),s.jsx("input",{id:"recall-q",value:em,onChange:e=>ep(e.target.value),placeholder:"e.g. database migrations, auth model, performance…",disabled:ey,autoComplete:"off"}),s.jsx("span",{className:"field-hint",children:"Leave blank to get the most recent memories."})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[s.jsx("span",{style:{fontSize:11,fontWeight:600,color:"var(--muted)",textTransform:"uppercase",letterSpacing:.5},children:"Output format"}),[{id:"text",label:"Text",title:"Human-readable grouped format"},{id:"toon",label:"TOON",title:"Token-Oriented Object Notation — compact format for AI agents"}].map(e=>s.jsx("button",{type:"button",title:e.title,onClick:()=>ej(e.id),style:{padding:"4px 12px",borderRadius:7,border:"none",background:eb===e.id?"var(--violet)":"var(--surface-1)",color:eb===e.id?"#fff":"var(--muted)",border:eb===e.id?"none":"1px solid var(--border)",cursor:"pointer",fontSize:12,fontWeight:600},children:e.label},e.id)),"toon"===eb&&s.jsx("span",{style:{fontSize:11,color:"var(--muted-2)"},children:"~40% fewer tokens — ideal for agents"})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("button",{type:"submit",className:"btn primary",disabled:ey,"aria-busy":ey,children:[ey&&s.jsx("span",{className:"spinner"}),ey?"Recalling…":"Run recall"]}),em&&s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>ep(""),children:"Clear"})]})]})]}),(eh.length>0||ex)&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,s.jsxs)("h2",{style:{margin:0,fontSize:"1rem"},children:["Results",eh.length>0&&s.jsx("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:eh.length})]}),(0,s.jsxs)("div",{className:"row",style:{gap:6},children:[s.jsx("button",{className:"btn secondary sm",onClick:eW,disabled:!ex,children:"Copy"}),s.jsx("button",{className:"btn secondary sm",onClick:function(){if(!ex)return;let e=URL.createObjectURL(new Blob([ex],{type:"text/plain;charset=utf-8"}));Object.assign(document.createElement("a"),{href:e,download:`memory-pack-${D}.txt`}).click(),URL.revokeObjectURL(e),t.success("Memory pack downloaded.")},disabled:!ex,children:"Download .txt"})]})]}),s.jsx("div",{className:"recall-result",style:{marginBottom:16},children:eh.map(e=>(0,s.jsxs)("div",{className:"recall-item",children:[(0,s.jsxs)("div",{className:"recall-item-header",children:[s.jsx(x,{type:e.type,size:"xs"}),null!=e.rank_score&&(0,s.jsxs)("span",{className:"recall-rank",title:"FTS relevance score",children:["★ ",e.rank_score.toFixed(3)]}),s.jsx("span",{className:"memory-row-time",title:new Date(e.created_at).toLocaleString(),children:(e.created_at,"")})]}),s.jsx("p",{style:{fontSize:"0.88rem",color:"var(--ink-2)",lineHeight:1.55,margin:0},children:e.content})]},e.id))}),s.jsx("label",{className:"label",style:{marginBottom:6},children:"Memory pack (paste-ready)"}),s.jsx("pre",{className:"pre",children:ex})]})]},"recall"),"api"===B&&s.jsx(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("h2",{style:{marginBottom:8,fontSize:"1.1rem",display:"flex",gap:8,alignItems:"center"},children:[s.jsx("span",{className:"badge badge-brand",children:"New"})," AI Agent Integrations"]}),s.jsx("p",{style:{fontSize:"0.85rem",color:"var(--ink-2)",marginBottom:16},children:"Connect thecontextcache™ directly to ChatGPT, Claude Desktop, and local IDEs like Cursor or VS Code."}),(0,s.jsxs)("div",{className:"grid-2",style:{gap:16,marginBottom:24},children:[(0,s.jsxs)("div",{className:"card-sm",style:{background:"var(--panel-2)",border:"1px solid var(--line)",padding:16},children:[s.jsx("h3",{style:{color:"var(--brand)",marginBottom:4},children:"\uD83E\uDDE0 ChatGPT Custom GPTs"}),s.jsx("p",{style:{fontSize:"0.8rem",color:"var(--muted)",margin:"0 0 12px"},children:"Add the OpenAPI schema as an Action so ChatGPT can Recall project context mid-conversation."}),s.jsx("a",{href:`${apiBase}/openapi.json`,target:"_blank",className:"btn secondary sm",style:{width:"100%"},children:"View OpenAPI Schema ↗"})]}),(0,s.jsxs)("div",{className:"card-sm",style:{background:"var(--panel-2)",border:"1px solid var(--line)",padding:16},children:[s.jsx("h3",{style:{color:"var(--violet)",marginBottom:4},children:"\uD83E\uDD16 Claude MCP Server"}),s.jsx("p",{style:{fontSize:"0.8rem",color:"var(--muted)",margin:"0 0 12px"},children:"Connect Claude Desktop using the Model Context Protocol to dynamically pull architecture docs."}),s.jsx("button",{className:"btn secondary sm",style:{width:"100%"},onClick:()=>t.info("MCP plugin coming soon."),children:"View Setup Guide →"})]})]}),s.jsx("hr",{className:"divider",style:{margin:"24px 0"}}),s.jsx("h2",{style:{marginBottom:12,fontSize:"1rem"},children:"API Keys"}),s.jsx("p",{style:{fontSize:"0.82rem",color:"var(--muted)",marginBottom:16},children:"Generate a Personal Access Token to authenticate external agents as yourself. Keep these secret."}),(0,s.jsxs)("form",{onSubmit:e$,className:"row",style:{gap:8,marginBottom:24},children:[s.jsx("div",{className:"field",style:{flex:1,marginBottom:0},children:s.jsx("input",{type:"text",value:eD,onChange:e=>eA(e.target.value),placeholder:"e.g. ChatGPT Personal Key",disabled:ek,maxLength:100})}),s.jsx("button",{type:"submit",className:"btn primary",disabled:!eD.trim()||ek,"aria-busy":ek,children:ek?s.jsx("span",{className:"spinner"}):"Generate Key"})]}),eP&&(0,s.jsxs)("div",{className:"alert ok",style:{marginBottom:24,padding:"16px 20px",display:"flex",flexDirection:"column",gap:8},children:[s.jsx("strong",{children:"Save this key now!"}),s.jsx("p",{style:{fontSize:"0.82rem",color:"var(--ink)"},children:"It will not be shown again. Use it as a Bearer token in the `X-Api-Key` or `Authorization` header."}),s.jsx("div",{className:"row",children:s.jsx("code",{style:{flex:1,padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--ok-light)",userSelect:"all",wordBreak:"break-all"},children:eP})})]}),(0,s.jsxs)("div",{className:"stack-sm",children:[(0,s.jsxs)("label",{className:"label",children:["Active Keys for ",eM?.name||"this org"]}),ew?s.jsx(d.O,{height:40}):0===ev.length?s.jsx("p",{className:"muted",style:{fontSize:"0.85rem"},children:"No active API keys found."}):ev.map(e=>(0,s.jsxs)("div",{className:"row spread card-sm",style:{background:"var(--bg-2)",border:"1px solid var(--line-2)"},children:[(0,s.jsxs)("div",{children:[s.jsx("div",{style:{fontSize:"0.88rem",fontWeight:600,color:"var(--ink)"},children:e.name||"Unnamed Key"}),(0,s.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--muted)",fontFamily:"var(--mono)",marginTop:2},children:[e.prefix,"... • Expires ",e.expires_at?new Date(e.expires_at).toLocaleDateString("en-GB"):"—"]})]}),s.jsx("button",{className:"btn ghost sm",onClick:()=>eT(e.id),style:{color:"var(--danger)"},children:"Revoke"})]},e.id))]})]})},"api")]})]}):s.jsx("div",{className:"card",children:(0,s.jsxs)("div",{className:"empty-state",children:[s.jsx("span",{className:"empty-icon",children:"\uD83D\uDCC1"}),s.jsx("h2",{style:{marginBottom:6},children:"No project selected"}),s.jsx("p",{children:"Create your first project to start capturing memories."}),s.jsx("button",{className:"btn primary sm",onClick:()=>L(!0),style:{marginTop:8},children:"New project"})]})})})]})}},874:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,O:()=>r});var s=a(326);function r({height:e="1rem",width:t="100%",radius:a="8px",className:r=""}){return s.jsx("div",{className:`skeleton ${r}`,style:{height:e,width:t,borderRadius:a},"aria-hidden":"true"})}function i({rows:e=3}){return(0,s.jsxs)("div",{className:"card","aria-busy":"true","aria-label":"Loading…",children:[s.jsx(r,{height:"1.1rem",width:"40%",radius:"6px"}),s.jsx("div",{style:{marginTop:12,display:"grid",gap:8},children:Array.from({length:e}).map((t,a)=>s.jsx(r,{height:"0.85rem",width:a===e-1?"70%":"100%"},a))})]})}},9833:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/error.js#default`)},643:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(9510),r=a(8570);let i=(0,r.createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/OrgBadge.js#default`),n=(0,r.createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/ActiveLink.js#ActiveLink`),l=[{href:"/app",icon:"⬡",label:"Dashboard",exact:!0},{href:"/app/api-keys",icon:"\uD83D\uDD11",label:"API Keys"},{href:"/app/orgs",icon:"\uD83C\uDFE2",label:"Organisation"}];function o({children:e}){return(0,s.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,s.jsxs)("aside",{style:{width:200,flexShrink:0,borderRight:"1px solid var(--line, rgba(255,255,255,0.08))",display:"flex",flexDirection:"column",paddingTop:20,paddingBottom:20},children:[s.jsx(i,{}),s.jsx("nav",{style:{padding:"0 8px",display:"flex",flexDirection:"column",gap:2},children:l.map(({href:e,icon:t,label:a,exact:r})=>s.jsx(n,{href:e,exact:r,icon:t,label:a},e))})]}),s.jsx("div",{style:{flex:1,minWidth:0},children:e})]})}},8893:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i,dynamic:()=>r});var s=a(8570);let r=(0,s.createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/page.js#dynamic`),i=(0,s.createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/page.js#default`)},9086:(e,t,a)=>{"use strict";a.d(t,{M:()=>b});var s=a(326),r=a(7577),i=a(339),n=a(4749),l=a(2482),o=a(295),d=a(9539),c=a(3965);function m(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class p extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,a=(0,d.R)(e)&&e.offsetWidth||0,s=(0,d.R)(e)&&e.offsetHeight||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=a-r.width-r.left,r.bottom=s-r.height-r.top}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:t,anchorX:a,anchorY:i,root:n,pop:l}){let o=(0,r.useId)(),d=(0,r.useRef)(null),h=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=(0,r.useContext)(c._),x=function(...e){return r.useCallback(function(...e){return t=>{let a=!1,s=e.map(e=>{let s=m(e,t);return a||"function"!=typeof s||(a=!0),s});if(a)return()=>{for(let t=0;t<s.length;t++){let a=s[t];"function"==typeof a?a():m(e[t],null)}}}}(...e),e)}(d,e.props?.ref??e?.ref);return(0,r.useInsertionEffect)(()=>{let{width:e,height:s,top:r,left:c,right:m,bottom:p}=h.current;if(t||!1===l||!d.current||!e||!s)return;let x="left"===a?`left: ${c}`:`right: ${m}`,g="bottom"===i?`bottom: ${p}`:`top: ${r}`;d.current.dataset.motionPopId=o;let y=document.createElement("style");u&&(y.nonce=u);let f=n??document.head;return f.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            ${x}px !important;
            ${g}px !important;
          }
        `),()=>{f.contains(y)&&f.removeChild(y)}},[t]),(0,s.jsx)(p,{isPresent:t,childRef:d,sizeRef:h,pop:l,children:!1===l?e:r.cloneElement(e,{ref:x})})}let u=({children:e,initial:t,isPresent:a,onExitComplete:i,custom:l,presenceAffectsLayout:d,mode:c,anchorX:m,anchorY:p,root:u})=>{let g=(0,n.h)(x),y=(0,r.useId)(),f=!0,b=(0,r.useMemo)(()=>(f=!1,{id:y,initial:t,isPresent:a,custom:l,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;i&&i()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[a,g,i]);return d&&f&&(b={...b}),(0,r.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[a]),r.useEffect(()=>{a||g.size||!i||i()},[a]),e=(0,s.jsx)(h,{pop:"popLayout"===c,isPresent:a,anchorX:m,anchorY:p,root:u,children:e}),(0,s.jsx)(o.O.Provider,{value:b,children:e})};function x(){return new Map}var g=a(6933);let y=e=>e.key||"";function f(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let b=({children:e,custom:t,initial:a=!0,onExitComplete:o,presenceAffectsLayout:d=!0,mode:c="sync",propagate:m=!1,anchorX:p="left",anchorY:h="top",root:x})=>{let[b,j]=(0,g.oO)(m),v=(0,r.useMemo)(()=>f(e),[e]),S=m&&!b?[]:v.map(y),w=(0,r.useRef)(!0),N=(0,r.useRef)(v),k=(0,n.h)(()=>new Map),C=(0,r.useRef)(new Set),[P,z]=(0,r.useState)(v),[D,A]=(0,r.useState)(v);(0,l.L)(()=>{w.current=!1,N.current=v;for(let e=0;e<D.length;e++){let t=y(D[e]);S.includes(t)?(k.delete(t),C.current.delete(t)):!0!==k.get(t)&&k.set(t,!1)}},[D,S.length,S.join("-")]);let B=[];if(v!==P){let e=[...v];for(let t=0;t<D.length;t++){let a=D[t],s=y(a);S.includes(s)||(e.splice(t,0,a),B.push(a))}return"wait"===c&&B.length&&(e=B),A(f(e)),z(v),null}let{forceRender:_}=(0,r.useContext)(i.p);return(0,s.jsx)(s.Fragment,{children:D.map(e=>{let r=y(e),i=(!m||!!b)&&(v===D||S.includes(r));return(0,s.jsx)(u,{isPresent:i,initial:(!w.current||!!a)&&void 0,custom:t,presenceAffectsLayout:d,mode:c,root:x,onExitComplete:i?void 0:()=>{if(C.current.has(r)||(C.current.add(r),!k.has(r)))return;k.set(r,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(_?.(),A(N.current),m&&j?.(),o&&o())},anchorX:p,anchorY:h,children:e},r)})})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[276,516,733],()=>a(6283));module.exports=s})();