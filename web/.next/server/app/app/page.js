(()=>{var e={};e.id=191,e.ids=[191],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6283:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),t(8893),t(9889),t(2001),t(784),t(1888);var s=t(3191),r=t(8716),i=t(7922),n=t.n(i),l=t(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(a,o);let d=["",{children:["app",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8893)),"/Users/nd/Documents/contextcache/web/app/app/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9889)),"/Users/nd/Documents/contextcache/web/app/layout.js"],template:[()=>Promise.resolve().then(t.bind(t,2001)),"/Users/nd/Documents/contextcache/web/app/template.js"],error:[()=>Promise.resolve().then(t.bind(t,784)),"/Users/nd/Documents/contextcache/web/app/error.js"],"not-found":[()=>Promise.resolve().then(t.bind(t,1888)),"/Users/nd/Documents/contextcache/web/app/not-found.js"]}],c=["/Users/nd/Documents/contextcache/web/app/app/page.js"],m="/app/page",p={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/page",pathname:"/app",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1467:(e,a,t)=>{Promise.resolve().then(t.bind(t,2362))},2362:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>j,dynamic:()=>p});var s=t(326),r=t(7577),i=t(5047),n=t(1207),l=t(9776),o=t(874),d=t(982),c=t(9086);let m=["decision","finding","definition","note","link","todo","chat","doc","code"],p="force-dynamic",h={decision:{color:"#00D4FF",bg:"rgba(0,212,255,0.12)"},finding:{color:"#A78BFA",bg:"rgba(167,139,250,0.12)"},definition:{color:"#00E5A0",bg:"rgba(0,229,160,0.12)"},note:{color:"#FFB800",bg:"rgba(255,184,0,0.12)"},link:{color:"#FF6B6B",bg:"rgba(255,107,107,0.12)"},todo:{color:"#F472B6",bg:"rgba(244,114,182,0.12)"}};function u(e){try{let a=new Date(e),t=Date.now()-a.getTime();if(t<6e4)return"just now";if(t<36e5)return`${Math.floor(t/6e4)}m ago`;if(t<864e5)return`${Math.floor(t/36e5)}h ago`;if(t<6048e5)return`${Math.floor(t/864e5)}d ago`;return a.toLocaleDateString()}catch{return""}}function g({type:e,size:a="sm"}){let t=h[e]||{color:"var(--muted)",bg:"var(--panel-2)"};return s.jsx("span",{style:{color:t.color,background:t.bg,border:`1px solid ${t.color}30`,padding:"sm"===a?"1px 7px":"2px 9px",borderRadius:999,fontSize:"sm"===a?"0.7rem":"0.78rem",fontWeight:700,letterSpacing:"0.04em",fontFamily:"var(--mono)",whiteSpace:"nowrap",flexShrink:0},children:e})}let x={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},y={hidden:{opacity:0,y:15},show:{opacity:1,y:0,transition:{type:"spring",stiffness:400,damping:30}}};function b({usage:e,isUnlimited:a}){let t=e?.limits??{},r=[{label:"memories",used:e?.memories_created??0,max:t.memories_per_day??0,color:"#00D4FF"},{label:"recalls",used:e?.recall_queries??0,max:t.recalls_per_day??0,color:"#A78BFA"},{label:"projects",used:e?.projects_created??0,max:t.projects_per_day??0,color:"#00E5A0"}];return(0,s.jsxs)("div",{style:{padding:"10px 12px",borderTop:"1px solid var(--line)",marginTop:"auto"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[s.jsx("span",{style:{fontSize:"0.62rem",letterSpacing:"0.1em",color:"var(--muted)",fontFamily:"var(--mono)",fontWeight:700},children:"TODAY'S USAGE"}),a&&s.jsx("span",{style:{fontSize:"0.62rem",color:"var(--ok)",fontFamily:"var(--mono)",letterSpacing:"0.06em"},children:"∞ unlimited"})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:r.map(({label:e,used:t,max:r,color:i})=>{let n=r>0&&!a?Math.min(100,t/r*100):0,l=n>=80,o=n>=100,d=a?`${e}: ${t} / unlimited`:r>0?`${e}: ${t} / ${r}`:`${e}: ${t} (no configured limit)`;return(0,s.jsxs)("div",{title:d,children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.68rem",color:"var(--ink-2)",fontFamily:"var(--mono)",marginBottom:3},children:[s.jsx("span",{children:e}),s.jsx("span",{style:{color:o?"var(--danger)":l?"var(--warn)":"var(--muted)"},children:a?`${t} / ∞`:r>0?`${t} / ${r}`:`${t}`})]}),r>0&&!a&&s.jsx("div",{style:{height:3,borderRadius:99,background:"var(--panel-3)",overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",borderRadius:99,width:`${n}%`,background:o?"#ef4444":l?"#f59e0b":"#00D4FF",transition:"width 0.4s ease"}})})]},e)})})]})}function j(){let e=(0,i.useRouter)(),a=(0,l.p)(),[t,p]=(0,r.useState)(!0),[j,f]=(0,r.useState)(null),[v,S]=(0,r.useState)(null),[N,w]=(0,r.useState)([]),[k,C]=(0,r.useState)([]),[P,z]=(0,r.useState)(""),[B,_]=(0,r.useState)(""),[D,A]=(0,r.useState)("compose"),[F,$]=(0,r.useState)(""),[T,O]=(0,r.useState)(""),[R,L]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!1),[M,U]=(0,r.useState)(""),[q,G]=(0,r.useState)(!1),[W,K]=(0,r.useState)(!1),[H,J]=(0,r.useState)("decision"),[V,X]=(0,r.useState)("manual"),[Y,Q]=(0,r.useState)(""),[Z,ee]=(0,r.useState)(""),[ea,et]=(0,r.useState)(""),[es,er]=(0,r.useState)({url:"",file_path:"",language:"",model:""}),[ei,en]=(0,r.useState)(!1),[el,eo]=(0,r.useState)([]),[ed,ec]=(0,r.useState)(!1),[em,ep]=(0,r.useState)(""),[eh,eu]=(0,r.useState)([]),[eg,ex]=(0,r.useState)(""),[ey,eb]=(0,r.useState)(!1),[ej,ef]=(0,r.useState)([]),[ev,eS]=(0,r.useState)(!1),[eN,ew]=(0,r.useState)(!1),[ek,eC]=(0,r.useState)(""),[eP,ez]=(0,r.useState)("");function eB(t){if(t instanceof n.MS){if("auth"===t.kind){e.replace("/auth?reason=expired");return}if("forbidden"===t.kind){a.error("You don't have permission for this action.");return}if("rate_limit"===t.kind){a.warn("Too many requests. Please wait a moment.");return}if("network"===t.kind){a.error("Backend unreachable. Check server status.");return}}a.error(t.message||"Something went wrong.")}async function e_(e){if(e&&e!==P){z(e),_(""),w([]),eo([]),eu([]),ex(""),ep(""),A("compose");try{let[e,t]=await Promise.all([(0,n.SC)("/projects"),(0,n.SC)("/me/usage").catch(()=>null)]);w(e),e.length&&_(String(e[0].id)),t&&S(t),a.success("Switched organization.")}catch(e){z(P),eB(e)}}}async function eD(){eS(!0);try{let e=await (0,n.SC)(`/orgs/${P}/api-keys`);ef(e)}catch(e){eB(e)}finally{eS(!1)}}async function eA(e){if(e.preventDefault(),P&&!eN&&eP.trim()){ew(!0),eC("");try{let e=await (0,n.SC)(`/orgs/${P}/api-keys`,{method:"POST",body:JSON.stringify({name:eP.trim(),expires_in_days:90})});eC(e.api_key),ez(""),a.success("API key generated successfully."),await eD()}catch(e){eB(e)}finally{ew(!1)}}}async function eF(e){if(confirm("Are you sure you want to revoke this key? Any AI agents using it will be instantly disconnected."))try{await (0,n.SC)(`/orgs/${P}/api-keys/${e}/revoke`,{method:"POST"}),a.success("API key revoked."),await eD()}catch(e){eB(e)}}async function e$(){ec(!0);try{let e=await (0,n.SC)(`/projects/${B}/memories`);eo(e)}catch(e){eB(e)}finally{ec(!1)}}function eT(e){e!==B&&(_(e),A("compose"),eu([]),ex(""),ep(""),ee(""),Q(""),et(""),er({url:"",file_path:"",language:"",model:""}))}async function eO(e){if(e.preventDefault(),T.trim()&&!R){L(!0);try{let e=await (0,n.SC)("/projects",{method:"POST",body:JSON.stringify({name:T.trim()})});a.success(`Project "${e.name}" created.`),O(""),I(!1);let t=await (0,n.SC)("/projects");w(t),eT(String(e.id))}catch(e){eB(e)}finally{L(!1)}}}async function eR(e){if(e.preventDefault(),M.trim()&&!q){G(!0);try{let e=await (0,n.SC)("/orgs",{method:"POST",body:JSON.stringify({name:M.trim()})});a.success(`Organization "${e.name}" created.`),U(""),K(!1);let t=await (0,n.SC)("/me/orgs");C(t||[]),e_(String(e.id))}catch(e){eB(e)}finally{G(!1)}}}async function eL(e){if(e.preventDefault(),!Z.trim()||!B||ei)return;en(!0);let t=Object.fromEntries(Object.entries(es).filter(([,e])=>e.trim())),s=ea.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean);try{await (0,n.SC)(`/projects/${B}/memories`,{method:"POST",body:JSON.stringify({type:H,source:V,title:Y.trim()||null,content:Z.trim(),metadata:t,tags:s})}),a.success("Memory saved."),ee(""),Q(""),et(""),er({url:"",file_path:"",language:"",model:""}),await e$()}catch(e){eB(e)}finally{en(!1)}}async function eE(e){if(e?.preventDefault(),B&&!ey){eb(!0),eu([]),ex("");try{let e=await (0,n.SC)(`/projects/${B}/recall?query=${encodeURIComponent(em)}&limit=10`);eu(e.items||[]),ex(e.memory_pack_text||""),e.items?.length||a.info("No memories matched — showing recent instead.")}catch(e){eB(e)}finally{eb(!1)}}}async function eI(){if(eg)try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(eg);else{let e=Object.assign(document.createElement("textarea"),{value:eg,style:"position:fixed;left:-9999px;top:-9999px"});document.body.appendChild(e),e.select();let a=document.execCommand("copy");if(document.body.removeChild(e),!a)throw Error()}a.success("Memory pack copied to clipboard.")}catch{a.error("Copy failed — use Download instead, or switch to HTTPS.")}}let eM=N.find(e=>String(e.id)===B),eU=N.filter(e=>!F||e.name.toLowerCase().includes(F.toLowerCase()));return t?(0,s.jsxs)("div",{className:"app-layout",children:[(0,s.jsxs)("aside",{className:"sidebar",children:[s.jsx(o.O,{height:"1rem",width:"80px",style:{marginBottom:8}}),[1,2,3].map(e=>s.jsx(o.O,{height:"36px",radius:"8px"},e))]}),(0,s.jsxs)("div",{className:"main-content",children:[s.jsx(o.A,{rows:4}),s.jsx(o.A,{rows:3})]})]}):(0,s.jsxs)("div",{className:"app-layout",children:[(0,s.jsxs)("aside",{className:"sidebar","aria-label":"Projects",children:[(0,s.jsxs)("div",{className:"sidebar-header",children:[(0,s.jsxs)("div",{style:{paddingBottom:8},children:[s.jsx("label",{htmlFor:"org-switch",style:{fontSize:"0.72rem",marginBottom:4,color:"var(--muted)"},children:"Organization Scope"}),s.jsx("select",{id:"org-switch",value:P,onChange:e=>e_(e.target.value),style:{fontSize:"0.82rem",padding:"6px 10px"},disabled:0===k.length,children:0===k.length?s.jsx("option",{value:"",children:"No organizations available"}):k.map(e=>s.jsx("option",{value:String(e.id),children:e.name},e.id))}),(0,s.jsxs)("div",{className:"muted row spread",style:{fontSize:"0.7rem",marginTop:5},children:[s.jsx("span",{children:k.length>1?"Switch org to view its projects and memories.":"Project list is scoped to this organization."}),s.jsx("button",{className:"btn text xs",style:{padding:0},onClick:()=>K(e=>!e),children:W?"Cancel":"+ New Org"})]})]}),W&&(0,s.jsxs)("form",{onSubmit:eR,className:"stack-sm",style:{paddingBottom:16},children:[s.jsx("input",{autoFocus:!0,value:M,onChange:e=>U(e.target.value),placeholder:"Organization Name",required:!0,maxLength:200,style:{fontSize:"0.85rem",padding:"7px 10px"},disabled:q}),s.jsx("button",{type:"submit",className:"btn primary sm",disabled:!M.trim()||q,"aria-busy":q,style:{width:"100%"},children:q?s.jsx("span",{className:"spinner"}):"Create Organization"})]}),(0,s.jsxs)("div",{className:"row spread",style:{paddingBottom:6},children:[(0,s.jsxs)("span",{className:"sidebar-section-label",children:["Projects",N.length>0&&(0,s.jsxs)("span",{style:{color:"var(--muted)",fontWeight:400,marginLeft:5},children:["(",N.length,")"]})]}),s.jsx("button",{className:"btn ghost sm",onClick:()=>I(e=>!e),"aria-label":E?"Cancel":"New project",title:"New project",style:{padding:"2px 10px",fontSize:"1.1rem",lineHeight:1},children:E?"\xd7":"+"})]}),E&&(0,s.jsxs)("form",{onSubmit:eO,className:"stack-sm",style:{paddingBottom:8},children:[s.jsx("input",{autoFocus:!0,value:T,onChange:e=>O(e.target.value),placeholder:"Project name",required:!0,maxLength:200,style:{fontSize:"0.85rem",padding:"7px 10px"},disabled:R}),(0,s.jsxs)("div",{className:"row",style:{gap:6},children:[s.jsx("button",{type:"submit",className:"btn primary sm",disabled:!T.trim()||R,"aria-busy":R,style:{flex:1},children:R?s.jsx("span",{className:"spinner"}):"Create"}),s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>{I(!1),O("")},children:"Cancel"})]})]}),N.length>6&&s.jsx("div",{style:{paddingBottom:6},children:s.jsx("input",{value:F,onChange:e=>$(e.target.value),placeholder:"Filter projects…",style:{fontSize:"0.82rem",padding:"6px 10px"},"aria-label":"Filter projects"})})]}),s.jsx("div",{className:"sidebar-projects",children:0===N.length?s.jsx("p",{className:"muted",style:{fontSize:"0.82rem",padding:"8px 4px"},children:"No projects yet. Hit + to create one."}):0===eU.length?(0,s.jsxs)("p",{className:"muted",style:{fontSize:"0.82rem",padding:"8px 4px"},children:["No projects match “",F,"”."]}):eU.map(e=>(0,s.jsxs)("button",{className:`project-item${String(e.id)===B?" active":""}`,onClick:()=>eT(String(e.id)),title:e.name,children:[s.jsx("span",{className:"proj-dot"}),s.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1,textAlign:"left"},children:e.name})]},e.id))}),v&&s.jsx(b,{usage:v,isUnlimited:j?.is_unlimited})]}),s.jsx("main",{className:"main-content",children:B?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"card",style:{marginBottom:14},children:(0,s.jsxs)("div",{className:"row spread",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:eM?.name||"Project"}),s.jsx("p",{className:"muted",style:{fontSize:"0.78rem",marginTop:2},children:el.length>0?`${el.length} memor${1===el.length?"y":"ies"}`:"No memories yet"})]}),s.jsx("span",{className:"badge badge-brand",style:{fontFamily:"var(--display)",letterSpacing:"0.06em"},children:"Brain"})]})}),s.jsx("div",{className:"tab-bar",role:"tablist",children:[{id:"compose",label:"Compose"},{id:"memories",label:`Memories${el.length?` (${el.length})`:""}`},{id:"recall",label:"Recall"},{id:"api",label:"Integrations & API"}].map(({id:e,label:a})=>(0,s.jsxs)("button",{role:"tab","aria-selected":D===e,className:`tab${D===e?" active":""}`,onClick:()=>A(e),style:{position:"relative"},children:[a,D===e&&s.jsx(d.E.div,{layoutId:"activeAppTabIndicator",style:{position:"absolute",bottom:-2,left:0,right:0,height:2,backgroundColor:"var(--brand)",borderRadius:"2px 2px 0 0"},transition:{type:"spring",stiffness:300,damping:30}})]},e))}),(0,s.jsxs)(c.M,{mode:"wait",children:["compose"===D&&s.jsx(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,s.jsxs)("form",{onSubmit:eL,className:"stack card",style:{padding:32,background:"rgba(14, 18, 30, 0.4)",backdropFilter:"blur(40px)",borderColor:"rgba(0,229,255,0.1)",boxShadow:"0 24px 64px rgba(0,0,0,0.6)"},children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:16},children:[(0,s.jsxs)("h2",{style:{fontSize:"1.1rem",margin:0,display:"flex",alignItems:"center",gap:10},children:[s.jsx("span",{className:"brand-logo",style:{width:16,height:16},children:"⌘"}),"New Memory"]}),s.jsx("div",{className:"memory-type-grid",role:"group","aria-label":"Memory type",style:{display:"flex",gap:6},children:m.map(e=>s.jsx("button",{type:"button",className:`type-chip${H===e?" selected":""}`,onClick:()=>J(e),"aria-pressed":H===e,style:H===e?{background:h[e]?.bg,borderColor:h[e]?.color,color:h[e]?.color,padding:"4px 10px",fontSize:"0.75rem",borderRadius:999}:{padding:"4px 10px",fontSize:"0.75rem",borderRadius:999},children:e},e))})]}),s.jsx("div",{className:"field",children:s.jsx("textarea",{id:"memory-content",value:Z,onChange:e=>ee(e.target.value),placeholder:"What should future AI conversations remember about this project?",required:!0,disabled:ei,maxLength:1e4,style:{minHeight:140,fontSize:"1.05rem",background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:12,padding:20}})}),(0,s.jsxs)("div",{className:"grid-2",style:{gap:16,marginTop:8},children:[s.jsx("div",{className:"field",style:{marginBottom:0},children:s.jsx("input",{id:"memory-title",type:"text",value:Y,onChange:e=>Q(e.target.value),placeholder:"Short title (optional)",disabled:ei,maxLength:500,style:{background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)"}})}),s.jsx("div",{className:"field",style:{marginBottom:0},children:s.jsx("input",{id:"memory-tags",type:"text",value:ea,onChange:e=>et(e.target.value),placeholder:"Tags (comma-separated)",disabled:ei,style:{background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)"}})})]}),(0,s.jsxs)("details",{className:"advanced-accordion",style:{background:"transparent",border:"1px solid rgba(255,255,255,0.05)",marginTop:8},children:[s.jsx("summary",{className:"advanced-summary",style:{padding:"12px 16px"},children:"Advanced metadata (URLs, Files)"}),s.jsx("div",{className:"stack-sm",style:{paddingTop:10},children:(0,s.jsxs)("div",{className:"grid-2",style:{gap:12},children:[(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-url",children:"URL"}),s.jsx("input",{id:"meta-url",type:"url",value:es.url,onChange:e=>er(a=>({...a,url:e.target.value})),placeholder:"https://…",disabled:ei})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-file",children:"File path"}),s.jsx("input",{id:"meta-file",type:"text",value:es.file_path,onChange:e=>er(a=>({...a,file_path:e.target.value})),placeholder:"src/app/auth.py",disabled:ei})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-lang",children:"Language"}),s.jsx("input",{id:"meta-lang",type:"text",value:es.language,onChange:e=>er(a=>({...a,language:e.target.value})),placeholder:"python, typescript…",disabled:ei})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-model",children:"Model / tool"}),s.jsx("input",{id:"meta-model",type:"text",value:es.model,onChange:e=>er(a=>({...a,model:e.target.value})),placeholder:"gpt-4o, claude-3-5-sonnet…",disabled:ei})]})]})})]}),(0,s.jsxs)("div",{className:"row",style:{gap:8},children:[(0,s.jsxs)("button",{type:"submit",className:"btn primary",disabled:!Z.trim()||ei,"aria-busy":ei,children:[ei&&s.jsx("span",{className:"spinner"}),ei?"Saving…":"Publish memory"]}),(Z||Y||ea)&&s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>{ee(""),Q(""),et(""),er({url:"",file_path:"",language:"",model:""})},children:"Clear"})]})]})},"compose"),"memories"===D&&(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:14},children:[(0,s.jsxs)("h2",{style:{margin:0,fontSize:"1rem"},children:["All memories",el.length>0&&s.jsx("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:el.length})]}),s.jsx("button",{className:"btn secondary sm",onClick:e$,disabled:ed,children:ed?s.jsx("span",{className:"spinner"}):"Refresh"})]}),ed?s.jsx("div",{className:"stack",children:[1,2,3].map(e=>s.jsx(o.O,{height:"64px",radius:"8px"},e))}):0===el.length?(0,s.jsxs)("div",{className:"empty-state",children:[s.jsx("span",{className:"empty-icon",children:"\uD83D\uDCAD"}),s.jsx("p",{children:"No memories yet. Go to Compose to add the first one."}),s.jsx("button",{className:"btn primary sm",onClick:()=>A("compose"),style:{marginTop:8},children:"Add memory"})]}):s.jsx(d.E.div,{className:"memory-list stack-sm",role:"list",variants:x,initial:"hidden",animate:"show",children:el.map(e=>(0,s.jsxs)(d.E.div,{variants:y,className:"memory-row card",role:"listitem",style:{display:"flex",flexWrap:"wrap",gap:12,padding:"16px 20px",background:"rgba(20, 26, 43, 0.4)",border:"1px solid rgba(0, 229, 255, 0.05)"},children:[(0,s.jsxs)("div",{className:"row",style:{gap:8,flexShrink:0,alignItems:"flex-start",marginTop:2},children:[s.jsx(g,{type:e.type}),e.source&&"manual"!==e.source&&s.jsx("span",{style:{fontSize:"0.68rem",color:"var(--muted)",fontFamily:"var(--mono)",textTransform:"uppercase"},children:e.source})]}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0},children:[e.title&&s.jsx("p",{style:{fontSize:"0.9rem",fontWeight:600,color:"var(--ink)",margin:"0 0 6px",letterSpacing:"0.01em"},children:e.title}),s.jsx("span",{className:"memory-row-content",style:{color:"var(--ink-2)",fontSize:"0.88rem",lineHeight:1.6},children:e.content}),e.tags?.length>0&&s.jsx("div",{className:"row",style:{gap:6,marginTop:10,flexWrap:"wrap"},children:e.tags.map(e=>s.jsx("span",{style:{fontSize:"0.7rem",color:"var(--brand)",background:"var(--brand-light)",border:"1px solid rgba(0,229,255,0.15)",borderRadius:999,padding:"2px 10px",fontFamily:"var(--mono)"},children:e},e))})]}),s.jsx("span",{className:"memory-row-time",title:new Date(e.created_at).toLocaleString(),style:{fontSize:"0.75rem",color:"var(--muted)",fontFamily:"var(--mono)"},children:u(e.created_at)})]},e.id))})]},"memories"),"recall"===D&&(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack",children:[(0,s.jsxs)("div",{className:"card",children:[s.jsx("h2",{style:{marginBottom:12,fontSize:"1rem"},children:"Recall context"}),(0,s.jsxs)("form",{onSubmit:eE,className:"stack",children:[(0,s.jsxs)("div",{className:"field",children:[s.jsx("label",{htmlFor:"recall-q",children:"What do you need context on?"}),s.jsx("input",{id:"recall-q",value:em,onChange:e=>ep(e.target.value),placeholder:"e.g. database migrations, auth model, performance…",disabled:ey,autoComplete:"off"}),s.jsx("span",{className:"field-hint",children:"Leave blank to get the most recent memories."})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("button",{type:"submit",className:"btn primary",disabled:ey,"aria-busy":ey,children:[ey&&s.jsx("span",{className:"spinner"}),ey?"Recalling…":"Run recall"]}),em&&s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>ep(""),children:"Clear"})]})]})]}),(eh.length>0||eg)&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,s.jsxs)("h2",{style:{margin:0,fontSize:"1rem"},children:["Results",eh.length>0&&s.jsx("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:eh.length})]}),(0,s.jsxs)("div",{className:"row",style:{gap:6},children:[s.jsx("button",{className:"btn secondary sm",onClick:eI,disabled:!eg,children:"Copy"}),s.jsx("button",{className:"btn secondary sm",onClick:function(){if(!eg)return;let e=URL.createObjectURL(new Blob([eg],{type:"text/plain;charset=utf-8"}));Object.assign(document.createElement("a"),{href:e,download:`memory-pack-${B}.txt`}).click(),URL.revokeObjectURL(e),a.success("Memory pack downloaded.")},disabled:!eg,children:"Download .txt"})]})]}),s.jsx("div",{className:"recall-result",style:{marginBottom:16},children:eh.map(e=>(0,s.jsxs)("div",{className:"recall-item",children:[(0,s.jsxs)("div",{className:"recall-item-header",children:[s.jsx(g,{type:e.type,size:"xs"}),null!=e.rank_score&&(0,s.jsxs)("span",{className:"recall-rank",title:"FTS relevance score",children:["★ ",e.rank_score.toFixed(3)]}),s.jsx("span",{className:"memory-row-time",title:new Date(e.created_at).toLocaleString(),children:u(e.created_at)})]}),s.jsx("p",{style:{fontSize:"0.88rem",color:"var(--ink-2)",lineHeight:1.55,margin:0},children:e.content})]},e.id))}),s.jsx("label",{className:"label",style:{marginBottom:6},children:"Memory pack (paste-ready)"}),s.jsx("pre",{className:"pre",children:eg})]})]},"recall"),"api"===D&&s.jsx(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("h2",{style:{marginBottom:8,fontSize:"1.1rem",display:"flex",gap:8,alignItems:"center"},children:[s.jsx("span",{className:"badge badge-brand",children:"New"})," AI Agent Integrations"]}),s.jsx("p",{style:{fontSize:"0.85rem",color:"var(--ink-2)",marginBottom:16},children:"Connect thecontextcache™ directly to ChatGPT, Claude Desktop, and local IDEs like Cursor or VS Code."}),(0,s.jsxs)("div",{className:"grid-2",style:{gap:16,marginBottom:24},children:[(0,s.jsxs)("div",{className:"card-sm",style:{background:"var(--panel-2)",border:"1px solid var(--line)",padding:16},children:[s.jsx("h3",{style:{color:"var(--brand)",marginBottom:4},children:"\uD83E\uDDE0 ChatGPT Custom GPTs"}),s.jsx("p",{style:{fontSize:"0.8rem",color:"var(--muted)",margin:"0 0 12px"},children:"Add the OpenAPI schema as an Action so ChatGPT can Recall project context mid-conversation."}),s.jsx("a",{href:`${apiBase}/openapi.json`,target:"_blank",className:"btn secondary sm",style:{width:"100%"},children:"View OpenAPI Schema ↗"})]}),(0,s.jsxs)("div",{className:"card-sm",style:{background:"var(--panel-2)",border:"1px solid var(--line)",padding:16},children:[s.jsx("h3",{style:{color:"var(--violet)",marginBottom:4},children:"\uD83E\uDD16 Claude MCP Server"}),s.jsx("p",{style:{fontSize:"0.8rem",color:"var(--muted)",margin:"0 0 12px"},children:"Connect Claude Desktop using the Model Context Protocol to dynamically pull architecture docs."}),s.jsx("button",{className:"btn secondary sm",style:{width:"100%"},onClick:()=>a.info("MCP plugin coming soon."),children:"View Setup Guide →"})]})]}),s.jsx("hr",{className:"divider",style:{margin:"24px 0"}}),s.jsx("h2",{style:{marginBottom:12,fontSize:"1rem"},children:"API Keys"}),s.jsx("p",{style:{fontSize:"0.82rem",color:"var(--muted)",marginBottom:16},children:"Generate a Personal Access Token to authenticate external agents as yourself. Keep these secret."}),(0,s.jsxs)("form",{onSubmit:eA,className:"row",style:{gap:8,marginBottom:24},children:[s.jsx("div",{className:"field",style:{flex:1,marginBottom:0},children:s.jsx("input",{type:"text",value:eP,onChange:e=>ez(e.target.value),placeholder:"e.g. ChatGPT Personal Key",disabled:eN,maxLength:100})}),s.jsx("button",{type:"submit",className:"btn primary",disabled:!eP.trim()||eN,"aria-busy":eN,children:eN?s.jsx("span",{className:"spinner"}):"Generate Key"})]}),ek&&(0,s.jsxs)("div",{className:"alert ok",style:{marginBottom:24,padding:"16px 20px",display:"flex",flexDirection:"column",gap:8},children:[s.jsx("strong",{children:"Save this key now!"}),s.jsx("p",{style:{fontSize:"0.82rem",color:"var(--ink)"},children:"It will not be shown again. Use it as a Bearer token in the `X-Api-Key` or `Authorization` header."}),s.jsx("div",{className:"row",children:s.jsx("code",{style:{flex:1,padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--ok-light)",userSelect:"all",wordBreak:"break-all"},children:ek})})]}),(0,s.jsxs)("div",{className:"stack-sm",children:[(0,s.jsxs)("label",{className:"label",children:["Active Keys for ",eM?.name||"this org"]}),ev?s.jsx(o.O,{height:40}):0===ej.length?s.jsx("p",{className:"muted",style:{fontSize:"0.85rem"},children:"No active API keys found."}):ej.map(e=>(0,s.jsxs)("div",{className:"row spread card-sm",style:{background:"var(--bg-2)",border:"1px solid var(--line-2)"},children:[(0,s.jsxs)("div",{children:[s.jsx("div",{style:{fontSize:"0.88rem",fontWeight:600,color:"var(--ink)"},children:e.name||"Unnamed Key"}),(0,s.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--muted)",fontFamily:"var(--mono)",marginTop:2},children:[e.prefix,"... • Expires ",new Date(e.expires_at).toLocaleDateString()]})]}),s.jsx("button",{className:"btn ghost sm",onClick:()=>eF(e.id),style:{color:"var(--danger)"},children:"Revoke"})]},e.id))]})]})},"api")]})]}):s.jsx("div",{className:"card",children:(0,s.jsxs)("div",{className:"empty-state",children:[s.jsx("span",{className:"empty-icon",children:"\uD83D\uDCC1"}),s.jsx("h2",{style:{marginBottom:6},children:"No project selected"}),s.jsx("p",{children:"Create your first project to start capturing memories."}),s.jsx("button",{className:"btn primary sm",onClick:()=>I(!0),style:{marginTop:8},children:"New project"})]})})})]})}},874:(e,a,t)=>{"use strict";t.d(a,{A:()=>i,O:()=>r});var s=t(326);function r({height:e="1rem",width:a="100%",radius:t="8px",className:r=""}){return s.jsx("div",{className:`skeleton ${r}`,style:{height:e,width:a,borderRadius:t},"aria-hidden":"true"})}function i({rows:e=3}){return(0,s.jsxs)("div",{className:"card","aria-busy":"true","aria-label":"Loading…",children:[s.jsx(r,{height:"1.1rem",width:"40%",radius:"6px"}),s.jsx("div",{style:{marginTop:12,display:"grid",gap:8},children:Array.from({length:e}).map((a,t)=>s.jsx(r,{height:"0.85rem",width:t===e-1?"70%":"100%"},t))})]})}},8893:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i,dynamic:()=>r});var s=t(8570);let r=(0,s.createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/page.js#dynamic`),i=(0,s.createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/page.js#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[276,300,240],()=>t(6283));module.exports=s})();