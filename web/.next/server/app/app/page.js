(()=>{var e={};e.id=191,e.ids=[191],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6283:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.Z,__next_app__:()=>m,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>o}),a(8893),a(643),a(9833),a(9889),a(2001),a(784),a(1888);var s=a(3191),r=a(8716),i=a(7506),n=a(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(t,l);let o=["",{children:["app",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8893)),"/Users/nd/Documents/contextcache/web/app/app/page.js"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,643)),"/Users/nd/Documents/contextcache/web/app/app/layout.js"],error:[()=>Promise.resolve().then(a.bind(a,9833)),"/Users/nd/Documents/contextcache/web/app/app/error.js"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,9889)),"/Users/nd/Documents/contextcache/web/app/layout.js"],template:[()=>Promise.resolve().then(a.bind(a,2001)),"/Users/nd/Documents/contextcache/web/app/template.js"],error:[()=>Promise.resolve().then(a.bind(a,784)),"/Users/nd/Documents/contextcache/web/app/error.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,1888)),"/Users/nd/Documents/contextcache/web/app/not-found.js"]}],d=["/Users/nd/Documents/contextcache/web/app/app/page.js"],c="/app/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/page",pathname:"/app",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8602:(e,t,a)=>{Promise.resolve().then(a.bind(a,1644)),Promise.resolve().then(a.bind(a,3633))},9631:(e,t,a)=>{Promise.resolve().then(a.bind(a,1587))},1467:(e,t,a)=>{Promise.resolve().then(a.bind(a,2362))},1644:(e,t,a)=>{"use strict";a.d(t,{ActiveLink:()=>d});var s=a(326),r=a(434),i=a(7577),n=a(5047);function l({href:e,exact:t,icon:a,label:i}){let l=(0,n.usePathname)(),o=t?l===e:l.startsWith(e);return(0,s.jsxs)(r.default,{href:e,style:{display:"flex",alignItems:"center",gap:10,padding:"8px 12px",borderRadius:8,textDecoration:"none",fontSize:"0.88rem",fontWeight:o?600:400,color:o?"var(--ink, #e2eef9)":"var(--muted, #94adc8)",background:o?"var(--panel-2, rgba(255,255,255,0.06))":"transparent",transition:"background 0.15s, color 0.15s"},children:[s.jsx("span",{style:{width:20,textAlign:"center",flexShrink:0,fontSize:"1rem"},children:a}),i]})}function o({href:e,icon:t,label:a}){return(0,s.jsxs)(r.default,{href:e,style:{display:"flex",alignItems:"center",gap:10,padding:"8px 12px",borderRadius:8,textDecoration:"none",fontSize:"0.88rem",fontWeight:400,color:"var(--muted, #94adc8)"},children:[s.jsx("span",{style:{width:20,textAlign:"center",flexShrink:0,fontSize:"1rem"},children:t}),a]})}function d({href:e,exact:t,icon:a,label:r}){return s.jsx(i.Suspense,{fallback:s.jsx(o,{href:e,icon:a,label:r}),children:s.jsx(l,{href:e,exact:t,icon:a,label:r})})}},3633:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var s=a(326),r=a(7577);function i(){let[e,t]=(0,r.useState)("");return e?(0,s.jsxs)("div",{style:{padding:"0 16px 14px",borderBottom:"1px solid var(--line, rgba(255,255,255,0.08))",marginBottom:8},children:[s.jsx("div",{style:{fontSize:"0.62rem",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",color:"var(--muted, #94adc8)",marginBottom:3},children:"Workspace"}),s.jsx("div",{style:{fontSize:"0.82rem",fontWeight:600,color:"var(--ink, #e2eef9)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e})]}):null}},1587:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(326);a(7577);var r=a(434);function i({error:e,reset:t}){return(0,s.jsxs)("div",{style:{minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 24px",textAlign:"center",gap:16},children:[s.jsx("div",{style:{fontSize:40},children:"⚠️"}),s.jsx("h2",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Something went wrong"}),s.jsx("p",{style:{margin:0,color:"var(--muted)",fontSize:"0.88rem",maxWidth:380},children:e?.message||"An unexpected error occurred in the application."}),(0,s.jsxs)("div",{style:{display:"flex",gap:10},children:[s.jsx("button",{onClick:t,className:"btn primary sm",style:{padding:"8px 20px"},children:"Try again"}),s.jsx(r.default,{href:"/",className:"btn ghost sm",style:{padding:"8px 20px"},children:"Go home"})]})]})}},2362:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u,dynamic:()=>m});var s=a(326),r=a(7577),i=a(5047),n=a(434),l=a(1207),o=a(9776),d=a(874);let c=["decision","finding","definition","note","link","todo","chat","doc","code"],m="force-dynamic",p={decision:{color:"#00D4FF",bg:"rgba(0,212,255,0.12)"},finding:{color:"#A78BFA",bg:"rgba(167,139,250,0.12)"},definition:{color:"#00E5A0",bg:"rgba(0,229,160,0.12)"},note:{color:"#FFB800",bg:"rgba(255,184,0,0.12)"},link:{color:"#FF6B6B",bg:"rgba(255,107,107,0.12)"},todo:{color:"#F472B6",bg:"rgba(244,114,182,0.12)"}};function h({type:e,size:t="sm"}){let a=p[e]||{color:"var(--muted)",bg:"var(--panel-2)"};return s.jsx("span",{style:{color:a.color,background:a.bg,border:`1px solid ${a.color}30`,padding:"sm"===t?"1px 7px":"2px 9px",borderRadius:999,fontSize:"sm"===t?"0.7rem":"0.78rem",fontWeight:700,letterSpacing:"0.04em",fontFamily:"var(--mono)",whiteSpace:"nowrap",flexShrink:0},children:e})}function x({usage:e,isUnlimited:t}){let a=e?.limits??{},r=[{label:"memories",used:e?.memories_created??0,max:a.memories_per_day??0,color:"#00D4FF"},{label:"recalls",used:e?.recall_queries??0,max:a.recalls_per_day??0,color:"#A78BFA"},{label:"projects",used:e?.projects_created??0,max:a.projects_per_day??0,color:"#00E5A0"}];return(0,s.jsxs)("div",{style:{padding:"10px 12px",borderTop:"1px solid var(--line)",marginTop:"auto"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[s.jsx("span",{style:{fontSize:"0.62rem",letterSpacing:"0.1em",color:"var(--muted)",fontFamily:"var(--mono)",fontWeight:700},children:"TODAY'S USAGE"}),t&&s.jsx("span",{style:{fontSize:"0.62rem",color:"var(--ok)",fontFamily:"var(--mono)",letterSpacing:"0.06em"},children:"∞ unlimited"})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:r.map(({label:e,used:a,max:r,color:i})=>{let n=r>0&&!t?Math.min(100,a/r*100):0,l=n>=80,o=n>=100,d=t?`${e}: ${a} / unlimited`:r>0?`${e}: ${a} / ${r}`:`${e}: ${a} (no configured limit)`;return(0,s.jsxs)("div",{title:d,children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.68rem",color:"var(--ink-2)",fontFamily:"var(--mono)",marginBottom:3},children:[s.jsx("span",{children:e}),s.jsx("span",{style:{color:o?"var(--danger)":l?"var(--warn)":"var(--muted)"},children:t?`${a} / ∞`:r>0?`${a} / ${r}`:`${a}`})]}),r>0&&!t&&s.jsx("div",{style:{height:3,borderRadius:99,background:"var(--panel-3)",overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",borderRadius:99,width:`${n}%`,background:o?"#ef4444":l?"#f59e0b":"#00D4FF",transition:"width 0.4s ease"}})})]},e)})})]})}function u(){let e=(0,i.useRouter)(),t=(0,o.p)(),[a,m]=(0,r.useState)(!0),[u,g]=(0,r.useState)(null),[y,b]=(0,r.useState)(null),[f,j]=(0,r.useState)([]),[v,S]=(0,r.useState)([]),[N,w]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[D,z]=(0,r.useState)("compose"),[P,A]=(0,r.useState)(""),[B,_]=(0,r.useState)(""),[F,T]=(0,r.useState)(!1),[O,$]=(0,r.useState)(!1),[R,I]=(0,r.useState)(""),[L,U]=(0,r.useState)(!1),[W,E]=(0,r.useState)(!1),[M,G]=(0,r.useState)("decision"),[q,H]=(0,r.useState)("manual"),[K,J]=(0,r.useState)(""),[V,X]=(0,r.useState)(""),[Y,Z]=(0,r.useState)(""),[Q,ee]=(0,r.useState)({url:"",file_path:"",language:"",model:""}),[et,ea]=(0,r.useState)(!1),[es,er]=(0,r.useState)([]),[ei,en]=(0,r.useState)(!1),[el,eo]=(0,r.useState)(""),[ed,ec]=(0,r.useState)([]),[em,ep]=(0,r.useState)(""),[eh,ex]=(0,r.useState)(!1),[eu,eg]=(0,r.useState)("text"),[ey,eb]=(0,r.useState)([]),[ef,ej]=(0,r.useState)(!1),[ev,eS]=(0,r.useState)(!1),[eN,ew]=(0,r.useState)(""),[ek,eC]=(0,r.useState)("");function eD(a){if(a instanceof l.MS){if("auth"===a.kind){e.replace("/auth?reason=expired");return}if("forbidden"===a.kind){t.error("You don't have permission for this action.");return}if("rate_limit"===a.kind){t.warn("Too many requests. Please wait a moment.");return}if("network"===a.kind){t.error("Backend unreachable. Check server status.");return}}t.error(a.message||"Something went wrong.")}async function ez(e){if(e&&e!==N){w(e),C(""),j([]),er([]),ec([]),ep(""),eo(""),z("compose");try{let[e,a]=await Promise.all([(0,l.SC)("/projects"),(0,l.SC)("/me/usage").catch(()=>null)]);j(e),e.length&&C(String(e[0].id)),a&&b(a),t.success("Switched organization.")}catch(e){w(N),eD(e)}}}async function eP(){ej(!0);try{let e=await (0,l.SC)(`/orgs/${N}/api-keys`);eb(e)}catch(e){eD(e)}finally{ej(!1)}}async function eA(e){if(e.preventDefault(),N&&!ev&&ek.trim()){eS(!0),ew("");try{let e=await (0,l.SC)(`/orgs/${N}/api-keys`,{method:"POST",body:JSON.stringify({name:ek.trim(),expires_in_days:90})});ew(e.api_key),eC(""),t.success("API key generated successfully."),await eP()}catch(e){eD(e)}finally{eS(!1)}}}async function eB(e){if(confirm("Are you sure you want to revoke this key? Any AI agents using it will be instantly disconnected."))try{await (0,l.SC)(`/orgs/${N}/api-keys/${e}/revoke`,{method:"POST"}),t.success("API key revoked."),await eP()}catch(e){eD(e)}}async function e_(){en(!0);try{let e=await (0,l.SC)(`/projects/${k}/memories`);er(e)}catch(e){eD(e)}finally{en(!1)}}function eF(e){e!==k&&(C(e),z("compose"),ec([]),ep(""),eo(""),X(""),J(""),Z(""),ee({url:"",file_path:"",language:"",model:""}))}async function eT(e){if(e.preventDefault(),B.trim()&&!F){T(!0);try{let e=await (0,l.SC)("/projects",{method:"POST",body:JSON.stringify({name:B.trim()})});t.success(`Project "${e.name}" created.`),_(""),$(!1);let a=await (0,l.SC)("/projects");j(a),eF(String(e.id))}catch(e){eD(e)}finally{T(!1)}}}async function eO(e){if(e.preventDefault(),R.trim()&&!L){U(!0);try{let e=await (0,l.SC)("/orgs",{method:"POST",body:JSON.stringify({name:R.trim()})});t.success(`Organization "${e.name}" created.`),I(""),E(!1);let a=await (0,l.SC)("/me/orgs");S(a||[]),ez(String(e.id))}catch(e){eD(e)}finally{U(!1)}}}async function e$(e){if(e.preventDefault(),!V.trim()||!k||et)return;ea(!0);let a=Object.fromEntries(Object.entries(Q).filter(([,e])=>e.trim())),s=Y.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean);try{await (0,l.SC)(`/projects/${k}/memories`,{method:"POST",body:JSON.stringify({type:M,source:q,title:K.trim()||null,content:V.trim(),metadata:a,tags:s})}),t.success("Memory saved."),X(""),J(""),Z(""),ee({url:"",file_path:"",language:"",model:""}),await e_()}catch(e){eD(e)}finally{ea(!1)}}async function eR(e,a){if(e?.preventDefault(),!k||eh)return;let s=a||eu||"text";ex(!0),ec([]),ep("");try{let e=await (0,l.SC)(`/projects/${k}/recall?query=${encodeURIComponent(el)}&limit=10&format=${s}`);ec(e.items||[]),ep(e.memory_pack_text||""),e.items?.length||t.info("No memories matched — showing recent instead.")}catch(e){eD(e)}finally{ex(!1)}}async function eI(){if(em)try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(em);else{let e=Object.assign(document.createElement("textarea"),{value:em,style:"position:fixed;left:-9999px;top:-9999px"});document.body.appendChild(e),e.select();let t=document.execCommand("copy");if(document.body.removeChild(e),!t)throw Error()}t.success("Memory pack copied to clipboard.")}catch{t.error("Copy failed — use Download instead, or switch to HTTPS.")}}let eL=f.find(e=>String(e.id)===k),eU=f.filter(e=>!P||e.name.toLowerCase().includes(P.toLowerCase()));return a?(0,s.jsxs)("div",{className:"app-layout",children:[(0,s.jsxs)("aside",{className:"sidebar",children:[s.jsx(d.O,{height:"1rem",width:"80px",style:{marginBottom:8}}),[1,2,3].map(e=>s.jsx(d.O,{height:"36px",radius:"8px"},e))]}),(0,s.jsxs)("div",{className:"main-content",children:[s.jsx(d.A,{rows:4}),s.jsx(d.A,{rows:3})]})]}):(0,s.jsxs)("div",{className:"app-layout",children:[(0,s.jsxs)("aside",{className:"sidebar","aria-label":"Projects",children:[(0,s.jsxs)("div",{className:"sidebar-header",children:[(0,s.jsxs)("div",{style:{paddingBottom:8},children:[s.jsx("label",{htmlFor:"org-switch",style:{fontSize:"0.72rem",marginBottom:4,color:"var(--muted)"},children:"Organization Scope"}),s.jsx("select",{id:"org-switch",value:N,onChange:e=>ez(e.target.value),style:{fontSize:"0.82rem",padding:"6px 10px"},disabled:0===v.length,children:0===v.length?s.jsx("option",{value:"",children:"No organizations available"}):v.map(e=>s.jsx("option",{value:String(e.id),children:e.name},e.id))}),(0,s.jsxs)("div",{className:"muted row spread",style:{fontSize:"0.7rem",marginTop:5},children:[s.jsx("span",{children:v.length>1?"Switch org to view its projects and memories.":"Project list is scoped to this organization."}),s.jsx("button",{className:"btn text xs",style:{padding:0},onClick:()=>E(e=>!e),children:W?"Cancel":"+ New Org"})]})]}),W&&(0,s.jsxs)("form",{onSubmit:eO,className:"stack-sm",style:{paddingBottom:16},children:[s.jsx("input",{autoFocus:!0,value:R,onChange:e=>I(e.target.value),placeholder:"Organization Name",required:!0,maxLength:200,style:{fontSize:"0.85rem",padding:"7px 10px"},disabled:L}),s.jsx("button",{type:"submit",className:"btn primary sm",disabled:!R.trim()||L,"aria-busy":L,style:{width:"100%"},children:L?s.jsx("span",{className:"spinner"}):"Create Organization"})]}),(0,s.jsxs)("div",{className:"row spread",style:{paddingBottom:6},children:[(0,s.jsxs)("span",{className:"sidebar-section-label",children:["Projects",f.length>0&&(0,s.jsxs)("span",{style:{color:"var(--muted)",fontWeight:400,marginLeft:5},children:["(",f.length,")"]})]}),s.jsx("button",{className:"btn ghost sm",onClick:()=>$(e=>!e),"aria-label":O?"Cancel":"New project",title:"New project",style:{padding:"2px 10px",fontSize:"1.1rem",lineHeight:1},children:O?"\xd7":"+"})]}),O&&(0,s.jsxs)("form",{onSubmit:eT,className:"stack-sm",style:{paddingBottom:8},children:[s.jsx("input",{autoFocus:!0,value:B,onChange:e=>_(e.target.value),placeholder:"Project name",required:!0,maxLength:200,style:{fontSize:"0.85rem",padding:"7px 10px"},disabled:F}),(0,s.jsxs)("div",{className:"row",style:{gap:6},children:[s.jsx("button",{type:"submit",className:"btn primary sm",disabled:!B.trim()||F,"aria-busy":F,style:{flex:1},children:F?s.jsx("span",{className:"spinner"}):"Create"}),s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>{$(!1),_("")},children:"Cancel"})]})]}),f.length>6&&s.jsx("div",{style:{paddingBottom:6},children:s.jsx("input",{value:P,onChange:e=>A(e.target.value),placeholder:"Filter projects…",style:{fontSize:"0.82rem",padding:"6px 10px"},"aria-label":"Filter projects"})})]}),s.jsx("div",{className:"sidebar-projects",children:0===f.length?s.jsx("p",{className:"muted",style:{fontSize:"0.82rem",padding:"8px 4px"},children:"No projects yet. Hit + to create one."}):0===eU.length?(0,s.jsxs)("p",{className:"muted",style:{fontSize:"0.82rem",padding:"8px 4px"},children:["No projects match “",P,"”."]}):eU.map(e=>(0,s.jsxs)("button",{className:`project-item${String(e.id)===k?" active":""}`,onClick:()=>eF(String(e.id)),title:e.name,children:[s.jsx("span",{className:"proj-dot"}),s.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1,textAlign:"left"},children:e.name})]},e.id))}),y&&s.jsx(x,{usage:y,isUnlimited:u?.is_unlimited})]}),s.jsx("main",{className:"main-content",children:k?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"card",style:{marginBottom:14},children:(0,s.jsxs)("div",{className:"row spread",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:eL?.name||"Project"}),s.jsx("p",{className:"muted",style:{fontSize:"0.78rem",marginTop:2},children:es.length>0?`${es.length} memor${1===es.length?"y":"ies"}`:"No memories yet"})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx(n.default,{href:`/app/projects/${k}/inbox`,style:{display:"inline-flex",alignItems:"center",gap:5,padding:"4px 12px",borderRadius:8,border:"1px solid var(--border)",background:"var(--surface-1)",color:"var(--text)",fontSize:12,fontWeight:600,textDecoration:"none",whiteSpace:"nowrap"},title:"Review AI-suggested memory drafts",children:"\uD83D\uDCE5 Inbox"}),s.jsx("span",{className:"badge badge-brand",style:{fontFamily:"var(--display)",letterSpacing:"0.06em"},children:"Brain"})]})]})}),s.jsx("div",{className:"tab-bar",role:"tablist",children:[{id:"compose",label:"Compose"},{id:"memories",label:`Memories${es.length?` (${es.length})`:""}`},{id:"recall",label:"Recall"},{id:"api",label:"Integrations & API"}].map(({id:e,label:t})=>(0,s.jsxs)("button",{role:"tab","aria-selected":D===e,className:`tab${D===e?" active":""}`,onClick:()=>z(e),style:{position:"relative"},children:[t,D===e&&s.jsx("div",{style:{position:"absolute",bottom:-2,left:0,right:0,height:2,backgroundColor:"var(--brand)",borderRadius:"2px 2px 0 0"}})]},e))}),(0,s.jsxs)("div",{className:"tab-content",style:{position:"relative"},children:["compose"===D&&s.jsx("div",{className:"animate-fade-in",children:(0,s.jsxs)("form",{onSubmit:e$,className:"stack card",style:{padding:32,background:"rgba(14, 18, 30, 0.4)",backdropFilter:"blur(40px)",borderColor:"rgba(0,229,255,0.1)",boxShadow:"0 24px 64px rgba(0,0,0,0.6)"},children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:16},children:[(0,s.jsxs)("h2",{style:{fontSize:"1.1rem",margin:0,display:"flex",alignItems:"center",gap:10},children:[s.jsx("span",{className:"brand-logo",style:{width:16,height:16},children:"⌘"}),"New Memory"]}),s.jsx("div",{className:"memory-type-grid",role:"group","aria-label":"Memory type",style:{display:"flex",gap:6},children:c.map(e=>s.jsx("button",{type:"button",className:`type-chip${M===e?" selected":""}`,onClick:()=>G(e),"aria-pressed":M===e,style:M===e?{background:p[e]?.bg,borderColor:p[e]?.color,color:p[e]?.color,padding:"4px 10px",fontSize:"0.75rem",borderRadius:999}:{padding:"4px 10px",fontSize:"0.75rem",borderRadius:999},children:e},e))})]}),s.jsx("div",{className:"field",children:s.jsx("textarea",{id:"memory-content",value:V,onChange:e=>X(e.target.value),placeholder:"What should future AI conversations remember about this project?",required:!0,disabled:et,maxLength:1e4,style:{minHeight:140,fontSize:"1.05rem",background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:12,padding:20}})}),(0,s.jsxs)("div",{className:"grid-2",style:{gap:16,marginTop:8},children:[s.jsx("div",{className:"field",style:{marginBottom:0},children:s.jsx("input",{id:"memory-title",type:"text",value:K,onChange:e=>J(e.target.value),placeholder:"Short title (optional)",disabled:et,maxLength:500,style:{background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)"}})}),s.jsx("div",{className:"field",style:{marginBottom:0},children:s.jsx("input",{id:"memory-tags",type:"text",value:Y,onChange:e=>Z(e.target.value),placeholder:"Tags (comma-separated)",disabled:et,style:{background:"rgba(5,7,12,0.6)",border:"1px solid rgba(255,255,255,0.05)"}})})]}),(0,s.jsxs)("details",{className:"advanced-accordion",style:{background:"transparent",border:"1px solid rgba(255,255,255,0.05)",marginTop:8},children:[s.jsx("summary",{className:"advanced-summary",style:{padding:"12px 16px"},children:"Advanced metadata (URLs, Files)"}),s.jsx("div",{className:"stack-sm",style:{paddingTop:10},children:(0,s.jsxs)("div",{className:"grid-2",style:{gap:12},children:[(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-url",children:"URL"}),s.jsx("input",{id:"meta-url",type:"url",value:Q.url,onChange:e=>ee(t=>({...t,url:e.target.value})),placeholder:"https://…",disabled:et})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-file",children:"File path"}),s.jsx("input",{id:"meta-file",type:"text",value:Q.file_path,onChange:e=>ee(t=>({...t,file_path:e.target.value})),placeholder:"src/app/auth.py",disabled:et})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-lang",children:"Language"}),s.jsx("input",{id:"meta-lang",type:"text",value:Q.language,onChange:e=>ee(t=>({...t,language:e.target.value})),placeholder:"python, typescript…",disabled:et})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-model",children:"Model / tool"}),s.jsx("input",{id:"meta-model",type:"text",value:Q.model,onChange:e=>ee(t=>({...t,model:e.target.value})),placeholder:"gpt-4o, claude-3-5-sonnet…",disabled:et})]})]})})]}),(0,s.jsxs)("div",{className:"row",style:{gap:8},children:[(0,s.jsxs)("button",{type:"submit",className:"btn primary",disabled:!V.trim()||et,"aria-busy":et,children:[et&&s.jsx("span",{className:"spinner"}),et?"Saving…":"Publish memory"]}),(V||K||Y)&&s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>{X(""),J(""),Z(""),ee({url:"",file_path:"",language:"",model:""})},children:"Clear"})]})]})},"compose"),"memories"===D&&(0,s.jsxs)("div",{className:"card animate-fade-in",children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:14},children:[(0,s.jsxs)("h2",{style:{margin:0,fontSize:"1rem"},children:["All memories",es.length>0&&s.jsx("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:es.length})]}),s.jsx("button",{className:"btn secondary sm",onClick:e_,disabled:ei,children:ei?s.jsx("span",{className:"spinner"}):"Refresh"})]}),ei?s.jsx("div",{className:"stack",children:[1,2,3].map(e=>s.jsx(d.O,{height:"64px",radius:"8px"},e))}):0===es.length?(0,s.jsxs)("div",{className:"empty-state",children:[s.jsx("span",{className:"empty-icon",children:"\uD83D\uDCAD"}),s.jsx("p",{children:"No memories yet. Go to Compose to add the first one."}),s.jsx("button",{className:"btn primary sm",onClick:()=>z("compose"),style:{marginTop:8},children:"Add memory"})]}):s.jsx("div",{className:"memory-list stack-sm animate-fade-in",role:"list",children:es.map((e,t)=>(0,s.jsxs)("div",{className:"memory-row card animate-fade-in",role:"listitem",style:{display:"flex",flexWrap:"wrap",gap:12,padding:"16px 20px",background:"rgba(20, 26, 43, 0.4)",border:"1px solid rgba(0, 229, 255, 0.05)",animationDelay:`${.05*t}s`,animationFillMode:"both"},children:[(0,s.jsxs)("div",{className:"row",style:{gap:8,flexShrink:0,alignItems:"flex-start",marginTop:2},children:[s.jsx(h,{type:e.type}),e.source&&"manual"!==e.source&&s.jsx("span",{style:{fontSize:"0.68rem",color:"var(--muted)",fontFamily:"var(--mono)",textTransform:"uppercase"},children:e.source})]}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0},children:[e.title&&s.jsx("p",{style:{fontSize:"0.9rem",fontWeight:600,color:"var(--ink)",margin:"0 0 6px",letterSpacing:"0.01em"},children:e.title}),s.jsx("span",{className:"memory-row-content",style:{color:"var(--ink-2)",fontSize:"0.88rem",lineHeight:1.6},children:e.content}),e.tags?.length>0&&s.jsx("div",{className:"row",style:{gap:6,marginTop:10,flexWrap:"wrap"},children:e.tags.map(e=>s.jsx("span",{style:{fontSize:"0.7rem",color:"var(--brand)",background:"var(--brand-light)",border:"1px solid rgba(0,229,255,0.15)",borderRadius:999,padding:"2px 10px",fontFamily:"var(--mono)"},children:e},e))})]}),s.jsx("span",{className:"memory-row-time",title:new Date(e.created_at).toLocaleString(),style:{fontSize:"0.75rem",color:"var(--muted)",fontFamily:"var(--mono)"},children:(e.created_at,"")})]},e.id))})]},"memories"),"recall"===D&&(0,s.jsxs)("div",{className:"stack animate-fade-in",children:[(0,s.jsxs)("div",{className:"card",children:[s.jsx("h2",{style:{marginBottom:12,fontSize:"1rem"},children:"Recall context"}),(0,s.jsxs)("form",{onSubmit:eR,className:"stack",children:[(0,s.jsxs)("div",{className:"field",children:[s.jsx("label",{htmlFor:"recall-q",children:"What do you need context on?"}),s.jsx("input",{id:"recall-q",value:el,onChange:e=>eo(e.target.value),placeholder:"e.g. database migrations, auth model, performance…",disabled:eh,autoComplete:"off"}),s.jsx("span",{className:"field-hint",children:"Leave blank to get the most recent memories."})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[s.jsx("span",{style:{fontSize:11,fontWeight:600,color:"var(--muted)",textTransform:"uppercase",letterSpacing:.5},children:"Output format"}),[{id:"text",label:"Text",title:"Human-readable grouped format"},{id:"toon",label:"TOON",title:"Token-Oriented Object Notation — compact format for AI agents"}].map(e=>s.jsx("button",{type:"button",title:e.title,onClick:()=>eg(e.id),style:{padding:"4px 12px",borderRadius:7,border:"none",background:eu===e.id?"var(--violet)":"var(--surface-1)",color:eu===e.id?"#fff":"var(--muted)",border:eu===e.id?"none":"1px solid var(--border)",cursor:"pointer",fontSize:12,fontWeight:600},children:e.label},e.id)),"toon"===eu&&s.jsx("span",{style:{fontSize:11,color:"var(--muted-2)"},children:"~40% fewer tokens — ideal for agents"})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("button",{type:"submit",className:"btn primary",disabled:eh,"aria-busy":eh,children:[eh&&s.jsx("span",{className:"spinner"}),eh?"Recalling…":"Run recall"]}),el&&s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>eo(""),children:"Clear"})]})]})]}),(ed.length>0||em)&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,s.jsxs)("h2",{style:{margin:0,fontSize:"1rem"},children:["Results",ed.length>0&&s.jsx("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:ed.length})]}),(0,s.jsxs)("div",{className:"row",style:{gap:6},children:[s.jsx("button",{className:"btn secondary sm",onClick:eI,disabled:!em,children:"Copy"}),s.jsx("button",{className:"btn secondary sm",onClick:function(){if(!em)return;let e=URL.createObjectURL(new Blob([em],{type:"text/plain;charset=utf-8"}));Object.assign(document.createElement("a"),{href:e,download:`memory-pack-${k}.txt`}).click(),URL.revokeObjectURL(e),t.success("Memory pack downloaded.")},disabled:!em,children:"Download .txt"})]})]}),s.jsx("div",{className:"recall-result",style:{marginBottom:16},children:ed.map(e=>(0,s.jsxs)("div",{className:"recall-item",children:[(0,s.jsxs)("div",{className:"recall-item-header",children:[s.jsx(h,{type:e.type,size:"xs"}),null!=e.rank_score&&(0,s.jsxs)("span",{className:"recall-rank",title:"FTS relevance score",children:["★ ",e.rank_score.toFixed(3)]}),s.jsx("span",{className:"memory-row-time",title:new Date(e.created_at).toLocaleString(),children:(e.created_at,"")})]}),s.jsx("p",{style:{fontSize:"0.88rem",color:"var(--ink-2)",lineHeight:1.55,margin:0},children:e.content})]},e.id))}),s.jsx("label",{className:"label",style:{marginBottom:6},children:"Memory pack (paste-ready)"}),s.jsx("pre",{className:"pre",children:em})]})]},"recall"),"api"===D&&s.jsx("div",{className:"stack animate-fade-in",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("h2",{style:{marginBottom:8,fontSize:"1.1rem",display:"flex",gap:8,alignItems:"center"},children:[s.jsx("span",{className:"badge badge-brand",children:"New"})," AI Agent Integrations"]}),s.jsx("p",{style:{fontSize:"0.85rem",color:"var(--ink-2)",marginBottom:16},children:"Connect thecontextcache™ directly to ChatGPT, Claude Desktop, and local IDEs like Cursor or VS Code."}),(0,s.jsxs)("div",{className:"grid-2",style:{gap:16,marginBottom:24},children:[(0,s.jsxs)("div",{className:"card-sm",style:{background:"var(--panel-2)",border:"1px solid var(--line)",padding:16},children:[s.jsx("h3",{style:{color:"var(--brand)",marginBottom:4},children:"\uD83E\uDDE0 ChatGPT Custom GPTs"}),s.jsx("p",{style:{fontSize:"0.8rem",color:"var(--muted)",margin:"0 0 12px"},children:"Add the OpenAPI schema as an Action so ChatGPT can Recall project context mid-conversation."}),s.jsx("a",{href:`${apiBase}/openapi.json`,target:"_blank",className:"btn secondary sm",style:{width:"100%"},children:"View OpenAPI Schema ↗"})]}),(0,s.jsxs)("div",{className:"card-sm",style:{background:"var(--panel-2)",border:"1px solid var(--line)",padding:16},children:[s.jsx("h3",{style:{color:"var(--violet)",marginBottom:4},children:"\uD83E\uDD16 Claude MCP Server"}),s.jsx("p",{style:{fontSize:"0.8rem",color:"var(--muted)",margin:"0 0 12px"},children:"Connect Claude Desktop using the Model Context Protocol to dynamically pull architecture docs."}),s.jsx("button",{className:"btn secondary sm",style:{width:"100%"},onClick:()=>t.info("MCP plugin coming soon."),children:"View Setup Guide →"})]})]}),s.jsx("hr",{className:"divider",style:{margin:"24px 0"}}),s.jsx("h2",{style:{marginBottom:12,fontSize:"1rem"},children:"API Keys"}),s.jsx("p",{style:{fontSize:"0.82rem",color:"var(--muted)",marginBottom:16},children:"Generate a Personal Access Token to authenticate external agents as yourself. Keep these secret."}),(0,s.jsxs)("form",{onSubmit:eA,className:"row",style:{gap:8,marginBottom:24},children:[s.jsx("div",{className:"field",style:{flex:1,marginBottom:0},children:s.jsx("input",{type:"text",value:ek,onChange:e=>eC(e.target.value),placeholder:"e.g. ChatGPT Personal Key",disabled:ev,maxLength:100})}),s.jsx("button",{type:"submit",className:"btn primary",disabled:!ek.trim()||ev,"aria-busy":ev,children:ev?s.jsx("span",{className:"spinner"}):"Generate Key"})]}),eN&&(0,s.jsxs)("div",{className:"alert ok",style:{marginBottom:24,padding:"16px 20px",display:"flex",flexDirection:"column",gap:8},children:[s.jsx("strong",{children:"Save this key now!"}),s.jsx("p",{style:{fontSize:"0.82rem",color:"var(--ink)"},children:"It will not be shown again. Use it as a Bearer token in the `X-Api-Key` or `Authorization` header."}),s.jsx("div",{className:"row",children:s.jsx("code",{style:{flex:1,padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--ok-light)",userSelect:"all",wordBreak:"break-all"},children:eN})})]}),(0,s.jsxs)("div",{className:"stack-sm",children:[(0,s.jsxs)("label",{className:"label",children:["Active Keys for ",eL?.name||"this org"]}),ef?s.jsx(d.O,{height:40}):0===ey.length?s.jsx("p",{className:"muted",style:{fontSize:"0.85rem"},children:"No active API keys found."}):ey.map(e=>(0,s.jsxs)("div",{className:"row spread card-sm",style:{background:"var(--bg-2)",border:"1px solid var(--line-2)"},children:[(0,s.jsxs)("div",{children:[s.jsx("div",{style:{fontSize:"0.88rem",fontWeight:600,color:"var(--ink)"},children:e.name||"Unnamed Key"}),(0,s.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--muted)",fontFamily:"var(--mono)",marginTop:2},children:[e.prefix,"... • Expires ",e.expires_at?new Date(e.expires_at).toLocaleDateString("en-GB"):"—"]})]}),s.jsx("button",{className:"btn ghost sm",onClick:()=>eB(e.id),style:{color:"var(--danger)"},children:"Revoke"})]},e.id))]})]})},"api")]})]}):s.jsx("div",{className:"card",children:(0,s.jsxs)("div",{className:"empty-state",children:[s.jsx("span",{className:"empty-icon",children:"\uD83D\uDCC1"}),s.jsx("h2",{style:{marginBottom:6},children:"No project selected"}),s.jsx("p",{children:"Create your first project to start capturing memories."}),s.jsx("button",{className:"btn primary sm",onClick:()=>$(!0),style:{marginTop:8},children:"New project"})]})})})]})}},874:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,O:()=>r});var s=a(326);function r({height:e="1rem",width:t="100%",radius:a="8px",className:r=""}){return s.jsx("div",{className:`skeleton ${r}`,style:{height:e,width:t,borderRadius:a},"aria-hidden":"true"})}function i({rows:e=3}){return(0,s.jsxs)("div",{className:"card","aria-busy":"true","aria-label":"Loading…",children:[s.jsx(r,{height:"1.1rem",width:"40%",radius:"6px"}),s.jsx("div",{style:{marginTop:12,display:"grid",gap:8},children:Array.from({length:e}).map((t,a)=>s.jsx(r,{height:"0.85rem",width:a===e-1?"70%":"100%"},a))})]})}},9833:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/error.js#default`)},643:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(9510),r=a(8570);let i=(0,r.createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/OrgBadge.js#default`),n=(0,r.createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/ActiveLink.js#ActiveLink`),l=[{href:"/app",icon:"⬡",label:"Dashboard",exact:!0},{href:"/app/api-keys",icon:"\uD83D\uDD11",label:"API Keys"},{href:"/app/orgs",icon:"\uD83C\uDFE2",label:"Organisation"}];function o({children:e}){return(0,s.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,s.jsxs)("aside",{style:{width:200,flexShrink:0,borderRight:"1px solid var(--line, rgba(255,255,255,0.08))",display:"flex",flexDirection:"column",paddingTop:20,paddingBottom:20},children:[s.jsx(i,{}),s.jsx("nav",{style:{padding:"0 8px",display:"flex",flexDirection:"column",gap:2},children:l.map(({href:e,icon:t,label:a,exact:r})=>s.jsx(n,{href:e,exact:r,icon:t,label:a},e))})]}),s.jsx("div",{style:{flex:1,minWidth:0},children:e})]})}},8893:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i,dynamic:()=>r});var s=a(8570);let r=(0,s.createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/page.js#dynamic`),i=(0,s.createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/page.js#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[276,895,139],()=>a(6283));module.exports=s})();