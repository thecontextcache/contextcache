(()=>{var e={};e.id=191,e.ids=[191],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6283:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),a(8893),a(9889),a(2001),a(784),a(1888);var s=a(3191),r=a(8716),i=a(7922),n=a.n(i),l=a(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["app",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8893)),"/Users/nd/Documents/contextcache/web/app/app/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9889)),"/Users/nd/Documents/contextcache/web/app/layout.js"],template:[()=>Promise.resolve().then(a.bind(a,2001)),"/Users/nd/Documents/contextcache/web/app/template.js"],error:[()=>Promise.resolve().then(a.bind(a,784)),"/Users/nd/Documents/contextcache/web/app/error.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,1888)),"/Users/nd/Documents/contextcache/web/app/not-found.js"]}],d=["/Users/nd/Documents/contextcache/web/app/app/page.js"],m="/app/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/page",pathname:"/app",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1467:(e,t,a)=>{Promise.resolve().then(a.bind(a,2362))},2362:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(326),r=a(7577),i=a(5047),n=a(1207),l=a(9776),o=a(874),c=a(2720),d=a(9086);let m=["decision","finding","definition","note","link","todo","chat","doc","code"],p=["manual","chatgpt","claude","cursor","codex","api"],h={decision:{color:"#00D4FF",bg:"rgba(0,212,255,0.12)"},finding:{color:"#A78BFA",bg:"rgba(167,139,250,0.12)"},definition:{color:"#00E5A0",bg:"rgba(0,229,160,0.12)"},note:{color:"#FFB800",bg:"rgba(255,184,0,0.12)"},link:{color:"#FF6B6B",bg:"rgba(255,107,107,0.12)"},todo:{color:"#F472B6",bg:"rgba(244,114,182,0.12)"}};function u(e){try{let t=new Date(e),a=Date.now()-t.getTime();if(a<6e4)return"just now";if(a<36e5)return`${Math.floor(a/6e4)}m ago`;if(a<864e5)return`${Math.floor(a/36e5)}h ago`;if(a<6048e5)return`${Math.floor(a/864e5)}d ago`;return t.toLocaleDateString()}catch{return""}}function x({type:e,size:t="sm"}){let a=h[e]||{color:"var(--muted)",bg:"var(--panel-2)"};return s.jsx("span",{style:{color:a.color,background:a.bg,border:`1px solid ${a.color}30`,padding:"sm"===t?"1px 7px":"2px 9px",borderRadius:999,fontSize:"sm"===t?"0.7rem":"0.78rem",fontWeight:700,letterSpacing:"0.04em",fontFamily:"var(--mono)",whiteSpace:"nowrap",flexShrink:0},children:e})}function g({usage:e,isUnlimited:t}){let a=e?.limits??{},r=[{label:"memories",used:e?.memories_created??0,max:a.memories_per_day??0,color:"#00D4FF"},{label:"recalls",used:e?.recall_queries??0,max:a.recalls_per_day??0,color:"#A78BFA"},{label:"projects",used:e?.projects_created??0,max:a.projects_per_day??0,color:"#00E5A0"}];return(0,s.jsxs)("div",{style:{padding:"10px 12px",borderTop:"1px solid var(--line)",marginTop:"auto"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[s.jsx("span",{style:{fontSize:"0.62rem",letterSpacing:"0.1em",color:"var(--muted)",fontFamily:"var(--mono)",fontWeight:700},children:"TODAY'S USAGE"}),t&&s.jsx("span",{style:{fontSize:"0.62rem",color:"var(--ok)",fontFamily:"var(--mono)",letterSpacing:"0.06em"},children:"∞ unlimited"})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:r.map(({label:e,used:a,max:r,color:i})=>{let n=r>0&&!t?Math.min(100,a/r*100):0,l=n>=80,o=n>=100,c=t?`${e}: ${a} / unlimited`:r>0?`${e}: ${a} / ${r}`:`${e}: ${a} (no configured limit)`;return(0,s.jsxs)("div",{title:c,children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.68rem",color:"var(--ink-2)",fontFamily:"var(--mono)",marginBottom:3},children:[s.jsx("span",{children:e}),s.jsx("span",{style:{color:o?"var(--danger)":l?"var(--warn)":"var(--muted)"},children:t?`${a} / ∞`:r>0?`${a} / ${r}`:`${a}`})]}),r>0&&!t&&s.jsx("div",{style:{height:3,borderRadius:99,background:"var(--panel-3)",overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",borderRadius:99,width:`${n}%`,background:o?"#ef4444":l?"#f59e0b":"#00D4FF",transition:"width 0.4s ease"}})})]},e)})})]})}function f(){let e=(0,i.useRouter)(),t=(0,l.p)(),[a,f]=(0,r.useState)(!0),[y,j]=(0,r.useState)(null),[b,v]=(0,r.useState)(null),[N,S]=(0,r.useState)([]),[w,C]=(0,r.useState)([]),[k,$]=(0,r.useState)(""),[_,F]=(0,r.useState)(""),[P,B]=(0,r.useState)("compose"),[R,z]=(0,r.useState)(""),[D,A]=(0,r.useState)(""),[E,L]=(0,r.useState)(!1),[T,M]=(0,r.useState)(!1),[O,U]=(0,r.useState)("decision"),[q,W]=(0,r.useState)("manual"),[I,H]=(0,r.useState)(""),[G,Y]=(0,r.useState)(""),[X,J]=(0,r.useState)(""),[V,K]=(0,r.useState)({url:"",file_path:"",language:"",model:""}),[Q,Z]=(0,r.useState)(!1),[ee,et]=(0,r.useState)([]),[ea,es]=(0,r.useState)(!1),[er,ei]=(0,r.useState)(""),[en,el]=(0,r.useState)([]),[eo,ec]=(0,r.useState)(""),[ed,em]=(0,r.useState)(!1);function ep(a){if(a instanceof n.MS){if("auth"===a.kind){e.replace("/auth?reason=expired");return}if("forbidden"===a.kind){t.error("You don't have permission for this action.");return}if("rate_limit"===a.kind){t.warn("Too many requests. Please wait a moment.");return}if("network"===a.kind){t.error("Backend unreachable. Check server status.");return}}t.error(a.message||"Something went wrong.")}async function eh(e){if(e&&e!==k){$(e),F(""),S([]),et([]),el([]),ec(""),ei(""),B("compose");try{let[e,a]=await Promise.all([(0,n.SC)("/projects"),(0,n.SC)("/me/usage").catch(()=>null)]);S(e),e.length&&F(String(e[0].id)),a&&v(a),t.success("Switched organization.")}catch(e){$(k),ep(e)}}}async function eu(){es(!0);try{let e=await (0,n.SC)(`/projects/${_}/memories`);et(e)}catch(e){ep(e)}finally{es(!1)}}function ex(e){e!==_&&(F(e),B("compose"),el([]),ec(""),ei(""),Y(""),H(""),J(""),K({url:"",file_path:"",language:"",model:""}))}async function eg(e){if(e.preventDefault(),D.trim()&&!E){L(!0);try{let e=await (0,n.SC)("/projects",{method:"POST",body:JSON.stringify({name:D.trim()})});t.success(`Project "${e.name}" created.`),A(""),M(!1);let a=await (0,n.SC)("/projects");S(a),ex(String(e.id))}catch(e){ep(e)}finally{L(!1)}}}async function ef(e){if(e.preventDefault(),!G.trim()||!_||Q)return;Z(!0);let a=Object.fromEntries(Object.entries(V).filter(([,e])=>e.trim())),s=X.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean);try{await (0,n.SC)(`/projects/${_}/memories`,{method:"POST",body:JSON.stringify({type:O,source:q,title:I.trim()||null,content:G.trim(),metadata:a,tags:s})}),t.success("Memory saved."),Y(""),H(""),J(""),K({url:"",file_path:"",language:"",model:""}),await eu()}catch(e){ep(e)}finally{Z(!1)}}async function ey(e){if(e?.preventDefault(),_&&!ed){em(!0),el([]),ec("");try{let e=await (0,n.SC)(`/projects/${_}/recall?query=${encodeURIComponent(er)}&limit=10`);el(e.items||[]),ec(e.memory_pack_text||""),e.items?.length||t.info("No memories matched — showing recent instead.")}catch(e){ep(e)}finally{em(!1)}}}async function ej(){if(eo)try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(eo);else{let e=Object.assign(document.createElement("textarea"),{value:eo,style:"position:fixed;left:-9999px;top:-9999px"});document.body.appendChild(e),e.select();let t=document.execCommand("copy");if(document.body.removeChild(e),!t)throw Error()}t.success("Memory pack copied to clipboard.")}catch{t.error("Copy failed — use Download instead, or switch to HTTPS.")}}let eb=N.find(e=>String(e.id)===_),ev=N.filter(e=>!R||e.name.toLowerCase().includes(R.toLowerCase()));return a?(0,s.jsxs)("div",{className:"app-layout",children:[(0,s.jsxs)("aside",{className:"sidebar",children:[s.jsx(o.O,{height:"1rem",width:"80px",style:{marginBottom:8}}),[1,2,3].map(e=>s.jsx(o.O,{height:"36px",radius:"8px"},e))]}),(0,s.jsxs)("div",{className:"main-content",children:[s.jsx(o.A,{rows:4}),s.jsx(o.A,{rows:3})]})]}):(0,s.jsxs)("div",{className:"app-layout",children:[(0,s.jsxs)("aside",{className:"sidebar","aria-label":"Projects",children:[(0,s.jsxs)("div",{className:"sidebar-header",children:[(0,s.jsxs)("div",{style:{paddingBottom:8},children:[s.jsx("label",{htmlFor:"org-switch",style:{fontSize:"0.72rem",marginBottom:4,color:"var(--muted)"},children:"Organization Scope"}),s.jsx("select",{id:"org-switch",value:k,onChange:e=>eh(e.target.value),style:{fontSize:"0.82rem",padding:"6px 10px"},disabled:0===w.length,children:0===w.length?s.jsx("option",{value:"",children:"No organizations available"}):w.map(e=>(0,s.jsxs)("option",{value:String(e.id),children:[e.name," \xb7 id=",e.id,e.role?` \xb7 ${e.role}`:""]},e.id))}),s.jsx("div",{className:"muted",style:{fontSize:"0.7rem",marginTop:5},children:w.length>1?"Switch org to view its projects and memories.":"Project list is scoped to this organization."})]}),(0,s.jsxs)("div",{className:"row spread",style:{paddingBottom:6},children:[(0,s.jsxs)("span",{className:"sidebar-section-label",children:["Projects",N.length>0&&(0,s.jsxs)("span",{style:{color:"var(--muted)",fontWeight:400,marginLeft:5},children:["(",N.length,")"]})]}),s.jsx("button",{className:"btn ghost sm",onClick:()=>M(e=>!e),"aria-label":T?"Cancel":"New project",title:"New project",style:{padding:"2px 10px",fontSize:"1.1rem",lineHeight:1},children:T?"\xd7":"+"})]}),T&&(0,s.jsxs)("form",{onSubmit:eg,className:"stack-sm",style:{paddingBottom:8},children:[s.jsx("input",{autoFocus:!0,value:D,onChange:e=>A(e.target.value),placeholder:"Project name",required:!0,maxLength:200,style:{fontSize:"0.85rem",padding:"7px 10px"},disabled:E}),(0,s.jsxs)("div",{className:"row",style:{gap:6},children:[s.jsx("button",{type:"submit",className:"btn primary sm",disabled:!D.trim()||E,"aria-busy":E,style:{flex:1},children:E?s.jsx("span",{className:"spinner"}):"Create"}),s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>{M(!1),A("")},children:"Cancel"})]})]}),N.length>6&&s.jsx("div",{style:{paddingBottom:6},children:s.jsx("input",{value:R,onChange:e=>z(e.target.value),placeholder:"Filter projects…",style:{fontSize:"0.82rem",padding:"6px 10px"},"aria-label":"Filter projects"})})]}),s.jsx("div",{className:"sidebar-projects",children:0===N.length?s.jsx("p",{className:"muted",style:{fontSize:"0.82rem",padding:"8px 4px"},children:"No projects yet. Hit + to create one."}):0===ev.length?(0,s.jsxs)("p",{className:"muted",style:{fontSize:"0.82rem",padding:"8px 4px"},children:["No projects match “",R,"”."]}):ev.map(e=>(0,s.jsxs)("button",{className:`project-item${String(e.id)===_?" active":""}`,onClick:()=>ex(String(e.id)),title:e.name,children:[s.jsx("span",{className:"proj-dot"}),s.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1,textAlign:"left"},children:e.name})]},e.id))}),b&&s.jsx(g,{usage:b,isUnlimited:y?.is_unlimited})]}),s.jsx("main",{className:"main-content",children:_?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"card",style:{marginBottom:14},children:(0,s.jsxs)("div",{className:"row spread",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:eb?.name||"Project"}),s.jsx("p",{className:"muted",style:{fontSize:"0.78rem",marginTop:2},children:ee.length>0?`${ee.length} memor${1===ee.length?"y":"ies"}`:"No memories yet"})]}),s.jsx("span",{className:"badge badge-brand",style:{fontFamily:"var(--display)",letterSpacing:"0.06em"},children:"Brain"})]})}),s.jsx("div",{className:"tab-bar",role:"tablist",children:[{id:"compose",label:"Compose"},{id:"memories",label:`Memories${ee.length?` (${ee.length})`:""}`},{id:"recall",label:"Recall"}].map(({id:e,label:t})=>(0,s.jsxs)("button",{role:"tab","aria-selected":P===e,className:`tab${P===e?" active":""}`,onClick:()=>B(e),style:{position:"relative"},children:[t,P===e&&s.jsx(c.E.div,{layoutId:"activeAppTabIndicator",style:{position:"absolute",bottom:-2,left:0,right:0,height:2,backgroundColor:"var(--brand)",borderRadius:"2px 2px 0 0"},transition:{type:"spring",stiffness:300,damping:30}})]},e))}),(0,s.jsxs)(d.M,{mode:"wait",children:["compose"===P&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[s.jsx("h2",{style:{marginBottom:14,fontSize:"1rem"},children:"Add a memory"}),(0,s.jsxs)("form",{onSubmit:ef,className:"stack",children:[(0,s.jsxs)("div",{className:"field",children:[s.jsx("label",{children:"Memory type"}),s.jsx("div",{className:"memory-type-grid",role:"group","aria-label":"Memory type",children:m.map(e=>s.jsx("button",{type:"button",className:`type-chip${O===e?" selected":""}`,onClick:()=>U(e),"aria-pressed":O===e,style:O===e?{background:h[e]?.bg,borderColor:h[e]?.color,color:h[e]?.color}:{},children:e},e))})]}),(0,s.jsxs)("div",{className:"grid-2",style:{gap:12},children:[(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"memory-source",children:"Source"}),s.jsx("select",{id:"memory-source",value:q,onChange:e=>W(e.target.value),disabled:Q,children:p.map(e=>s.jsx("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[(0,s.jsxs)("label",{htmlFor:"memory-title",children:["Title ",s.jsx("span",{className:"muted",children:"(optional)"})]}),s.jsx("input",{id:"memory-title",type:"text",value:I,onChange:e=>H(e.target.value),placeholder:"Short descriptive title",disabled:Q,maxLength:500})]})]}),(0,s.jsxs)("div",{className:"field",children:[s.jsx("label",{htmlFor:"memory-content",children:"Content"}),s.jsx("textarea",{id:"memory-content",value:G,onChange:e=>Y(e.target.value),placeholder:"What should future AI conversations remember about this project?",required:!0,disabled:Q,maxLength:1e4,style:{minHeight:120}}),s.jsx("span",{className:"field-hint",children:G.length>0?`${G.length.toLocaleString()} / 10,000`:"Up to 10,000 characters"})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsxs)("label",{htmlFor:"memory-tags",children:["Tags ",s.jsx("span",{className:"muted",children:"(comma-separated)"})]}),s.jsx("input",{id:"memory-tags",type:"text",value:X,onChange:e=>J(e.target.value),placeholder:"e.g. auth, postgres, api-design",disabled:Q}),s.jsx("span",{className:"field-hint",children:"Tags are shared across the project and clickable in search."})]}),(0,s.jsxs)("details",{className:"advanced-accordion",children:[s.jsx("summary",{className:"advanced-summary",children:"Advanced metadata"}),s.jsx("div",{className:"stack-sm",style:{paddingTop:10},children:(0,s.jsxs)("div",{className:"grid-2",style:{gap:12},children:[(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-url",children:"URL"}),s.jsx("input",{id:"meta-url",type:"url",value:V.url,onChange:e=>K(t=>({...t,url:e.target.value})),placeholder:"https://…",disabled:Q})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-file",children:"File path"}),s.jsx("input",{id:"meta-file",type:"text",value:V.file_path,onChange:e=>K(t=>({...t,file_path:e.target.value})),placeholder:"src/app/auth.py",disabled:Q})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-lang",children:"Language"}),s.jsx("input",{id:"meta-lang",type:"text",value:V.language,onChange:e=>K(t=>({...t,language:e.target.value})),placeholder:"python, typescript…",disabled:Q})]}),(0,s.jsxs)("div",{className:"field",style:{marginBottom:0},children:[s.jsx("label",{htmlFor:"meta-model",children:"Model / tool"}),s.jsx("input",{id:"meta-model",type:"text",value:V.model,onChange:e=>K(t=>({...t,model:e.target.value})),placeholder:"gpt-4o, claude-3-5-sonnet…",disabled:Q})]})]})})]}),(0,s.jsxs)("div",{className:"row",style:{gap:8},children:[(0,s.jsxs)("button",{type:"submit",className:"btn primary",disabled:!G.trim()||Q,"aria-busy":Q,children:[Q&&s.jsx("span",{className:"spinner"}),Q?"Saving…":"Publish memory"]}),(G||I||X)&&s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>{Y(""),H(""),J(""),K({url:"",file_path:"",language:"",model:""})},children:"Clear"})]})]})]},"compose"),"memories"===P&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card",children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:14},children:[(0,s.jsxs)("h2",{style:{margin:0,fontSize:"1rem"},children:["All memories",ee.length>0&&s.jsx("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:ee.length})]}),s.jsx("button",{className:"btn secondary sm",onClick:eu,disabled:ea,children:ea?s.jsx("span",{className:"spinner"}):"Refresh"})]}),ea?s.jsx("div",{className:"stack",children:[1,2,3].map(e=>s.jsx(o.O,{height:"64px",radius:"8px"},e))}):0===ee.length?(0,s.jsxs)("div",{className:"empty-state",children:[s.jsx("span",{className:"empty-icon",children:"\uD83D\uDCAD"}),s.jsx("p",{children:"No memories yet. Go to Compose to add the first one."}),s.jsx("button",{className:"btn primary sm",onClick:()=>B("compose"),style:{marginTop:8},children:"Add memory"})]}):s.jsx("div",{className:"memory-list",role:"list",children:ee.map(e=>(0,s.jsxs)("div",{className:"memory-row",role:"listitem",style:{flexWrap:"wrap",gap:8},children:[(0,s.jsxs)("div",{className:"row",style:{gap:6,flexShrink:0,alignItems:"center"},children:[s.jsx(x,{type:e.type}),e.source&&"manual"!==e.source&&s.jsx("span",{style:{fontSize:"0.68rem",color:"var(--muted)",fontFamily:"var(--mono)"},children:e.source})]}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0},children:[e.title&&s.jsx("p",{style:{fontSize:"0.8rem",fontWeight:600,color:"var(--ink)",margin:"0 0 2px"},children:e.title}),s.jsx("span",{className:"memory-row-content",children:e.content}),e.tags?.length>0&&s.jsx("div",{className:"row",style:{gap:4,marginTop:5,flexWrap:"wrap"},children:e.tags.map(e=>s.jsx("span",{style:{fontSize:"0.68rem",color:"var(--brand)",background:"var(--brand-light)",border:"1px solid rgba(0,212,255,0.2)",borderRadius:999,padding:"1px 7px",fontFamily:"var(--mono)"},children:e},e))})]}),s.jsx("span",{className:"memory-row-time",title:new Date(e.created_at).toLocaleString(),children:u(e.created_at)})]},e.id))})]},"memories"),"recall"===P&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"stack",children:[(0,s.jsxs)("div",{className:"card",children:[s.jsx("h2",{style:{marginBottom:12,fontSize:"1rem"},children:"Recall context"}),(0,s.jsxs)("form",{onSubmit:ey,className:"stack",children:[(0,s.jsxs)("div",{className:"field",children:[s.jsx("label",{htmlFor:"recall-q",children:"What do you need context on?"}),s.jsx("input",{id:"recall-q",value:er,onChange:e=>ei(e.target.value),placeholder:"e.g. database migrations, auth model, performance…",disabled:ed,autoComplete:"off"}),s.jsx("span",{className:"field-hint",children:"Leave blank to get the most recent memories."})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("button",{type:"submit",className:"btn primary",disabled:ed,"aria-busy":ed,children:[ed&&s.jsx("span",{className:"spinner"}),ed?"Recalling…":"Run recall"]}),er&&s.jsx("button",{type:"button",className:"btn ghost sm",onClick:()=>ei(""),children:"Clear"})]})]})]}),(en.length>0||eo)&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"row spread",style:{marginBottom:12},children:[(0,s.jsxs)("h2",{style:{margin:0,fontSize:"1rem"},children:["Results",en.length>0&&s.jsx("span",{className:"badge badge-brand",style:{marginLeft:8,verticalAlign:"middle"},children:en.length})]}),(0,s.jsxs)("div",{className:"row",style:{gap:6},children:[s.jsx("button",{className:"btn secondary sm",onClick:ej,disabled:!eo,children:"Copy"}),s.jsx("button",{className:"btn secondary sm",onClick:function(){if(!eo)return;let e=URL.createObjectURL(new Blob([eo],{type:"text/plain;charset=utf-8"}));Object.assign(document.createElement("a"),{href:e,download:`memory-pack-${_}.txt`}).click(),URL.revokeObjectURL(e),t.success("Memory pack downloaded.")},disabled:!eo,children:"Download .txt"})]})]}),s.jsx("div",{className:"recall-result",style:{marginBottom:16},children:en.map(e=>(0,s.jsxs)("div",{className:"recall-item",children:[(0,s.jsxs)("div",{className:"recall-item-header",children:[s.jsx(x,{type:e.type,size:"xs"}),null!=e.rank_score&&(0,s.jsxs)("span",{className:"recall-rank",title:"FTS relevance score",children:["★ ",e.rank_score.toFixed(3)]}),s.jsx("span",{className:"memory-row-time",title:new Date(e.created_at).toLocaleString(),children:u(e.created_at)})]}),s.jsx("p",{style:{fontSize:"0.88rem",color:"var(--ink-2)",lineHeight:1.55,margin:0},children:e.content})]},e.id))}),s.jsx("label",{className:"label",style:{marginBottom:6},children:"Memory pack (paste-ready)"}),s.jsx("pre",{className:"pre",children:eo})]})]},"recall")]})]}):s.jsx("div",{className:"card",children:(0,s.jsxs)("div",{className:"empty-state",children:[s.jsx("span",{className:"empty-icon",children:"\uD83D\uDCC1"}),s.jsx("h2",{style:{marginBottom:6},children:"No project selected"}),s.jsx("p",{children:"Create your first project to start capturing memories."}),s.jsx("button",{className:"btn primary sm",onClick:()=>M(!0),style:{marginTop:8},children:"New project"})]})})})]})}},874:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,O:()=>r});var s=a(326);function r({height:e="1rem",width:t="100%",radius:a="8px",className:r=""}){return s.jsx("div",{className:`skeleton ${r}`,style:{height:e,width:t,borderRadius:a},"aria-hidden":"true"})}function i({rows:e=3}){return(0,s.jsxs)("div",{className:"card","aria-busy":"true","aria-label":"Loading…",children:[s.jsx(r,{height:"1.1rem",width:"40%",radius:"6px"}),s.jsx("div",{style:{marginTop:12,display:"grid",gap:8},children:Array.from({length:e}).map((t,a)=>s.jsx(r,{height:"0.85rem",width:a===e-1?"70%":"100%"},a))})]})}},8893:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/Users/nd/Documents/contextcache/web/app/app/page.js#default`)},9086:(e,t,a)=>{"use strict";a.d(t,{M:()=>j});var s=a(326),r=a(7577),i=a(339),n=a(4749),l=a(2482),o=a(295),c=a(9539),d=a(3965);function m(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class p extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,a=(0,c.R)(e)&&e.offsetWidth||0,s=(0,c.R)(e)&&e.offsetHeight||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=a-r.width-r.left,r.bottom=s-r.height-r.top}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:t,anchorX:a,anchorY:i,root:n,pop:l}){let o=(0,r.useId)(),c=(0,r.useRef)(null),h=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=(0,r.useContext)(d._),x=function(...e){return r.useCallback(function(...e){return t=>{let a=!1,s=e.map(e=>{let s=m(e,t);return a||"function"!=typeof s||(a=!0),s});if(a)return()=>{for(let t=0;t<s.length;t++){let a=s[t];"function"==typeof a?a():m(e[t],null)}}}}(...e),e)}(c,e.props?.ref??e?.ref);return(0,r.useInsertionEffect)(()=>{let{width:e,height:s,top:r,left:d,right:m,bottom:p}=h.current;if(t||!1===l||!c.current||!e||!s)return;let x="left"===a?`left: ${d}`:`right: ${m}`,g="bottom"===i?`bottom: ${p}`:`top: ${r}`;c.current.dataset.motionPopId=o;let f=document.createElement("style");u&&(f.nonce=u);let y=n??document.head;return y.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            ${x}px !important;
            ${g}px !important;
          }
        `),()=>{y.contains(f)&&y.removeChild(f)}},[t]),(0,s.jsx)(p,{isPresent:t,childRef:c,sizeRef:h,pop:l,children:!1===l?e:r.cloneElement(e,{ref:x})})}let u=({children:e,initial:t,isPresent:a,onExitComplete:i,custom:l,presenceAffectsLayout:c,mode:d,anchorX:m,anchorY:p,root:u})=>{let g=(0,n.h)(x),f=(0,r.useId)(),y=!0,j=(0,r.useMemo)(()=>(y=!1,{id:f,initial:t,isPresent:a,custom:l,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;i&&i()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[a,g,i]);return c&&y&&(j={...j}),(0,r.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[a]),r.useEffect(()=>{a||g.size||!i||i()},[a]),e=(0,s.jsx)(h,{pop:"popLayout"===d,isPresent:a,anchorX:m,anchorY:p,root:u,children:e}),(0,s.jsx)(o.O.Provider,{value:j,children:e})};function x(){return new Map}var g=a(6933);let f=e=>e.key||"";function y(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let j=({children:e,custom:t,initial:a=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:m=!1,anchorX:p="left",anchorY:h="top",root:x})=>{let[j,b]=(0,g.oO)(m),v=(0,r.useMemo)(()=>y(e),[e]),N=m&&!j?[]:v.map(f),S=(0,r.useRef)(!0),w=(0,r.useRef)(v),C=(0,n.h)(()=>new Map),k=(0,r.useRef)(new Set),[$,_]=(0,r.useState)(v),[F,P]=(0,r.useState)(v);(0,l.L)(()=>{S.current=!1,w.current=v;for(let e=0;e<F.length;e++){let t=f(F[e]);N.includes(t)?(C.delete(t),k.current.delete(t)):!0!==C.get(t)&&C.set(t,!1)}},[F,N.length,N.join("-")]);let B=[];if(v!==$){let e=[...v];for(let t=0;t<F.length;t++){let a=F[t],s=f(a);N.includes(s)||(e.splice(t,0,a),B.push(a))}return"wait"===d&&B.length&&(e=B),P(y(e)),_(v),null}let{forceRender:R}=(0,r.useContext)(i.p);return(0,s.jsx)(s.Fragment,{children:F.map(e=>{let r=f(e),i=(!m||!!j)&&(v===F||N.includes(r));return(0,s.jsx)(u,{isPresent:i,initial:(!S.current||!!a)&&void 0,custom:t,presenceAffectsLayout:c,mode:d,root:x,onExitComplete:i?void 0:()=>{if(k.current.has(r)||(k.current.add(r),!C.has(r)))return;C.set(r,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(R?.(),P(w.current),m&&b?.(),o&&o())},anchorX:p,anchorY:h,children:e},r)})})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[62,240],()=>a(6283));module.exports=s})();