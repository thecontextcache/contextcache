
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Project Brain for AI-assisted teams — capture decisions, recall context packs.">
      
      
      
      
        <link rel="prev" href="../07-security/">
      
      
        <link rel="next" href="../11-branding/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>Integrations - TheContextCache™</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#integrations-mcp-style-capture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="TheContextCache™" class="md-header__button md-logo" aria-label="TheContextCache™" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TheContextCache™
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Integrations
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../00-overview/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../02-architecture/" class="md-tabs__link">
          
  
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../06-deployment/" class="md-tabs__link">
          
  
  
  Operations

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Integrations

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../11-branding/" class="md-tabs__link">
        
  
  
    
  
  Branding

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../09-cli-sdk/" class="md-tabs__link">
        
  
  
    
  
  CLI & SDK

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../08-roadmap/" class="md-tabs__link">
        
  
  
    
  
  Roadmap

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../legal/" class="md-tabs__link">
        
  
  
    
  
  Legal

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="TheContextCache™" class="md-nav__button md-logo" aria-label="TheContextCache™" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    TheContextCache™
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-mvp-scope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MVP Scope
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-dev-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dev Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-data-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-api-contract/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Contract
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Operations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#external-llm-capture-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        External LLM Capture Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="External LLM Capture Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-web-based-llms-chatgpt-claude-gemini" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Web-based LLMs (ChatGPT, Claude, Gemini)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-programmatic-llms-langchain-ollama-cli-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Programmatic LLMs (LangChain, Ollama, CLI tools)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auth
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#request-shape" class="md-nav__link">
    <span class="md-ellipsis">
      
        Request shape
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vs-code-save-hook-minimal-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        VS Code save hook (minimal example)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#browser-bookmarklet-save-current-page" class="md-nav__link">
    <span class="md-ellipsis">
      
        Browser bookmarklet (save current page)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dummy-slack-bot-handler-python" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dummy Slack bot handler (Python)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Notes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cag-rag-retrieval-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        CAG + RAG retrieval flow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CAG + RAG retrieval flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cag-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        CAG environment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cocoindex-ingestion-baseline" class="md-nav__link">
    <span class="md-ellipsis">
      
        CocoIndex ingestion baseline
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ollama-integration-env" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ollama integration env
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        CLI examples
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sqlalchemy-seed-utility" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQLAlchemy seed utility
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-branding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Branding
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-cli-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI & SDK
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../legal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Legal
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#external-llm-capture-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        External LLM Capture Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="External LLM Capture Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-web-based-llms-chatgpt-claude-gemini" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Web-based LLMs (ChatGPT, Claude, Gemini)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-programmatic-llms-langchain-ollama-cli-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Programmatic LLMs (LangChain, Ollama, CLI tools)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auth
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#request-shape" class="md-nav__link">
    <span class="md-ellipsis">
      
        Request shape
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vs-code-save-hook-minimal-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        VS Code save hook (minimal example)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#browser-bookmarklet-save-current-page" class="md-nav__link">
    <span class="md-ellipsis">
      
        Browser bookmarklet (save current page)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dummy-slack-bot-handler-python" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dummy Slack bot handler (Python)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Notes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cag-rag-retrieval-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        CAG + RAG retrieval flow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CAG + RAG retrieval flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cag-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        CAG environment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cocoindex-ingestion-baseline" class="md-nav__link">
    <span class="md-ellipsis">
      
        CocoIndex ingestion baseline
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ollama-integration-env" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ollama integration env
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        CLI examples
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sqlalchemy-seed-utility" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQLAlchemy seed utility
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="integrations-mcp-style-capture">Integrations (MCP-style capture)<a class="headerlink" href="#integrations-mcp-style-capture" title="Permanent link">&para;</a></h1>
<p>ContextCache supports a simple ingestion API for external tools:</p>
<ul>
<li><code>POST /integrations/memories</code></li>
<li><code>GET /integrations/memories</code></li>
<li><code>POST /projects/{project_id}/memories</code> (equivalent direct route)</li>
</ul>
<p>Both routes enforce the same auth, RBAC, and usage limits.</p>
<h2 id="external-llm-capture-architecture">External LLM Capture Architecture<a class="headerlink" href="#external-llm-capture-architecture" title="Permanent link">&para;</a></h2>
<p>Integrating with external LLM tools requires specific architectural patterns due to security and environment constraints. The core web application cannot "reach into" other websites (like ChatGPT) due to browser CORS policies.</p>
<h3 id="1-web-based-llms-chatgpt-claude-gemini">1. Web-based LLMs (ChatGPT, Claude, Gemini)<a class="headerlink" href="#1-web-based-llms-chatgpt-claude-gemini" title="Permanent link">&para;</a></h3>
<p>To automatically capture chats from browser-based LLMs, you must build a <strong>Browser Extension</strong>.
- <strong>Mechanism:</strong> The extension injects a content script into the LLM's page scope.
- <strong>Action:</strong> It observes the DOM (e.g., using <code>MutationObserver</code> on chat message lists) or intercepts network requests.
- <strong>Ingestion:</strong> When a significant answer is generated, the extension formats the payload and sends a <code>POST</code> request to <code>https://api.thecontextcache.com/integrations/memories</code>.
- <strong>Auth:</strong> The extension should allow the user to input their <code>CONTEXTCACHE_API_KEY</code> and <code>CONTEXTCACHE_ORG_ID</code> in its options page.</p>
<h3 id="2-programmatic-llms-langchain-ollama-cli-tools">2. Programmatic LLMs (LangChain, Ollama, CLI tools)<a class="headerlink" href="#2-programmatic-llms-langchain-ollama-cli-tools" title="Permanent link">&para;</a></h3>
<p>To capture programmatic LLM generations, you must build an <strong>SDK Proxy Middleware</strong> or use lifecycle hooks.
- <strong>Mechanism:</strong> Create a wrapper around the LLM generation call.
- <strong>Action:</strong> Instead of just calling <code>llm.generate(prompt)</code>, call a wrapped function that first hits the LLM, then asynchronously sends the prompt/response pair to ContextCache.
- <strong>Ingestion:</strong> Emit a <code>POST</code> to <code>/integrations/memories</code> using the environment's stored API keys.
- <strong>Auth:</strong> Read <code>CONTEXTCACHE_API_KEY</code> directly from the environment variables.</p>
<h2 id="auth">Auth<a class="headerlink" href="#auth" title="Permanent link">&para;</a></h2>
<p>Use either:</p>
<ul>
<li>Session cookie (<code>/auth/verify</code> login flow)</li>
<li>API key header: <code>X-API-Key: &lt;key&gt;</code> (+ <code>X-Org-Id</code> when needed)</li>
</ul>
<h2 id="request-shape">Request shape<a class="headerlink" href="#request-shape" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">  </span><span class="nt">&quot;project_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;note&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;extension&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Optional title&quot;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Captured memory text&quot;</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://example.com&quot;</span><span class="p">},</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">  </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;capture&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;browser&quot;</span><span class="p">]</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="p">}</span>
</code></pre></div>
<p>Optional request signing:</p>
<ul>
<li>Header: <code>X-Integration-Signature: sha256=&lt;hmac&gt;</code></li>
<li>HMAC input: raw HTTP body bytes</li>
<li>Secret source: <code>INTEGRATION_SIGNING_SECRET</code></li>
<li>When secret is unset, signature enforcement is disabled.</li>
</ul>
<h2 id="vs-code-save-hook-minimal-example">VS Code save hook (minimal example)<a class="headerlink" href="#vs-code-save-hook-minimal-example" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">vscode</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;vscode&quot;</span><span class="p">;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">pushMemory</span><span class="p">(</span><span class="nx">projectId</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s2">&quot;https://api.thecontextcache.com/integrations/memories&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">      </span><span class="s2">&quot;Content-Type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">      </span><span class="s2">&quot;X-API-Key&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CONTEXTCACHE_API_KEY</span><span class="p">,</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">      </span><span class="s2">&quot;X-Org-Id&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CONTEXTCACHE_ORG_ID</span><span class="p">,</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">      </span><span class="nx">project_id</span><span class="o">:</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="nx">projectId</span><span class="p">),</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">      </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">      </span><span class="nx">source</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;extension&quot;</span><span class="p">,</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">      </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="nx">text</span><span class="p">,</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">      </span><span class="nx">metadata</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">tool</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;vscode&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;onSave&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">      </span><span class="nx">tags</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;autosave&quot;</span><span class="p">],</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="p">}),</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">  </span><span class="p">});</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="p">}</span>
</code></pre></div>
<h2 id="browser-bookmarklet-save-current-page">Browser bookmarklet (save current page)<a class="headerlink" href="#browser-bookmarklet-save-current-page" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nx">javascript</span><span class="o">:</span><span class="p">(</span><span class="k">async</span><span class="p">()=&gt;{</span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="o">=</span><span class="s2">&quot;https://api.thecontextcache.com/integrations/memories&quot;</span><span class="p">;</span><span class="kd">const</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;X-API-Key&quot;</span><span class="p">);</span><span class="kd">const</span><span class="w"> </span><span class="nx">org</span><span class="o">=</span><span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;X-Org-Id&quot;</span><span class="p">);</span><span class="kd">const</span><span class="w"> </span><span class="nx">project</span><span class="o">=</span><span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;Project ID&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">key</span><span class="o">||!</span><span class="nx">project</span><span class="p">){</span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Missing key or project&quot;</span><span class="p">);</span><span class="k">return</span><span class="p">;}</span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">api</span><span class="p">,{</span><span class="nx">method</span><span class="o">:</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="nx">headers</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="o">:</span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span><span class="s2">&quot;X-API-Key&quot;</span><span class="o">:</span><span class="nx">key</span><span class="p">,</span><span class="s2">&quot;X-Org-Id&quot;</span><span class="o">:</span><span class="nx">org</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">},</span><span class="nx">body</span><span class="o">:</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">project_id</span><span class="o">:</span><span class="nb">Number</span><span class="p">(</span><span class="nx">project</span><span class="p">),</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;web&quot;</span><span class="p">,</span><span class="nx">source</span><span class="o">:</span><span class="s2">&quot;extension&quot;</span><span class="p">,</span><span class="nx">title</span><span class="o">:</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span><span class="nx">content</span><span class="o">:</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="o">+</span><span class="s2">&quot;\\n&quot;</span><span class="o">+</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span><span class="nx">metadata</span><span class="o">:</span><span class="p">{</span><span class="nx">url</span><span class="o">:</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">},</span><span class="nx">tags</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;bookmarklet&quot;</span><span class="p">]})});</span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Saved to ContextCache&quot;</span><span class="p">);})();</span><span class="w"> </span>
</code></pre></div>
<h2 id="dummy-slack-bot-handler-python">Dummy Slack bot handler (Python)<a class="headerlink" href="#dummy-slack-bot-handler-python" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">handle_slack_message</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">project_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">org_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>        <span class="s2">&quot;https://api.thecontextcache.com/integrations/memories&quot;</span><span class="p">,</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>        <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-API-Key&quot;</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span> <span class="s2">&quot;X-Org-Id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">org_id</span><span class="p">)},</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>        <span class="n">json</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>            <span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="n">project_id</span><span class="p">,</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;chat&quot;</span><span class="p">,</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;api&quot;</span><span class="p">,</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">text</span><span class="p">,</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;tool&quot;</span><span class="p">:</span> <span class="s2">&quot;slack-bot&quot;</span><span class="p">},</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;slack&quot;</span><span class="p">],</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>        <span class="p">},</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>        <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>    <span class="p">)</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</code></pre></div>
<h2 id="notes">Notes<a class="headerlink" href="#notes" title="Permanent link">&para;</a></h2>
<ul>
<li>For public beta scale, this API is enough for IDE plugins, bots, and scripts.</li>
<li>Future hardening: signed webhooks, per-integration keys, and Redis-backed global rate limits.</li>
</ul>
<h2 id="cag-rag-retrieval-flow">CAG + RAG retrieval flow<a class="headerlink" href="#cag-rag-retrieval-flow" title="Permanent link">&para;</a></h2>
<p>Recall uses a two-stage decision:</p>
<ol>
<li><strong>CAG pre-check</strong>: query is matched against a static golden-knowledge cache (docs + built-ins) preloaded in memory.</li>
<li>CAG scoring uses in-memory embedding similarity (<code>CAG_EMBEDDING_MODEL_NAME</code>).</li>
<li>Default provider is deterministic hash embeddings for speed/stability; optional sentence-transformers can be enabled.</li>
<li><strong>RAG fallback</strong>: if CAG confidence is low, run hybrid retrieval over project memories:</li>
<li>PostgreSQL FTS (<code>websearch_to_tsquery</code>)</li>
<li>Hilbert prefilter (<code>hilbert_index</code> range) + pgvector cosine similarity</li>
<li>recency boost</li>
</ol>
<p>This means global/product answers can return instantly, while project-specific queries still use memory retrieval.</p>
<h3 id="cag-environment">CAG environment<a class="headerlink" href="#cag-environment" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>CAG_ENABLED=true
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>CAG_MODE=local
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>CAG_MAX_TOKENS=180000
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>CAG_MATCH_THRESHOLD=0.58
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>CAG_EMBEDDING_MODEL_NAME=all-MiniLM-L6-v2
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>CAG_EMBEDDING_PROVIDER=hash
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>CAG_EMBEDDING_DIMS=384
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>CAG_CACHE_MAX_ITEMS=512
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>CAG_PHEROMONE_HIT_BOOST=0.15
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>CAG_PHEROMONE_EVAPORATION=0.95
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>CAG_EVAPORATION_INTERVAL_SECONDS=600
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>CAG_KV_STUB_ENABLED=true
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>CAG_SOURCE_FILES=docs/00-overview.md,docs/01-mvp-scope.md,docs/04-api-contract.md,docs/legal.md
</code></pre></div>
<p>Phase 3 cache behavior:
- CAG entries reinforce <code>pheromone_level</code> on hits.
- A background evaporation loop decays pheromone every 10 minutes.
- Eviction removes the lowest pheromone entries, then least-recently-accessed ties.</p>
<h2 id="cocoindex-ingestion-baseline">CocoIndex ingestion baseline<a class="headerlink" href="#cocoindex-ingestion-baseline" title="Permanent link">&para;</a></h2>
<p>The backend now includes <code>api/app/ingestion/</code> with:</p>
<ul>
<li><code>cocoindex_flow.py</code> (flow definition scaffolding)</li>
<li><code>pipeline.py</code> incremental file ingestion</li>
</ul>
<p><code>ingest_path_incremental</code> stores metadata per chunk:</p>
<ul>
<li><code>source_filename</code></li>
<li><code>source_last_modified</code></li>
<li><code>ingestion_chunk_index</code></li>
</ul>
<p>and writes embeddings to <code>memories.embedding_vector</code> / <code>memories.search_vector</code>.</p>
<p>Hashing + reprocessing rules:
- chunk hash is based on <code>project_id + chunk_content</code> (not file mtime)
- file <code>mtime</code> is used only to decide whether the file needs re-checking
- if content is unchanged but mtime changes, chunks are rechecked but not re-embedded</p>
<h2 id="ollama-integration-env">Ollama integration env<a class="headerlink" href="#ollama-integration-env" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>EMBEDDING_PROVIDER=ollama
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>OLLAMA_BASE_URL=http://ollama:11434
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>OLLAMA_EMBED_MODEL=nomic-embed-text
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>OLLAMA_CONTEXT_MODEL=llama3.1
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>OLLAMA_EMBED_ENDPOINT=http://ollama:11434/api/embeddings
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>OLLAMA_CHAT_ENDPOINT=http://ollama:11434/api/generate
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>ANALYZER_MODE=ollama
</code></pre></div>
<p>Sensitive keys/URLs are read from env only and are never returned by API responses.</p>
<h2 id="cli-examples">CLI examples<a class="headerlink" href="#cli-examples" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Upload via integration endpoint</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>python<span class="w"> </span>cli/cc.py<span class="w"> </span>integrations<span class="w"> </span>upload<span class="w"> </span>--project<span class="w"> </span><span class="m">1</span><span class="w"> </span>--type<span class="w"> </span>note<span class="w"> </span>--text<span class="w"> </span><span class="s2">&quot;Captured from CLI&quot;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="c1"># Upload from file</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>python<span class="w"> </span>cli/cc.py<span class="w"> </span>integrations<span class="w"> </span>upload<span class="w"> </span>--project<span class="w"> </span><span class="m">1</span><span class="w"> </span>--type<span class="w"> </span>doc<span class="w"> </span>--file<span class="w"> </span>./notes.md
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="c1"># List integration memories</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>python<span class="w"> </span>cli/cc.py<span class="w"> </span>integrations<span class="w"> </span>list<span class="w"> </span>--project<span class="w"> </span><span class="m">1</span><span class="w"> </span>--limit<span class="w"> </span><span class="m">20</span><span class="w"> </span>--offset<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="c1"># Contextualize memory with Ollama worker</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>python<span class="w"> </span>cli/cc.py<span class="w"> </span>integrations<span class="w"> </span>contextualize<span class="w"> </span>--memory-id<span class="w"> </span><span class="m">42</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="c1"># Seed demo projects/memories via HTTP integration API (uses SDK)</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>python<span class="w"> </span>cli/cc.py<span class="w"> </span>seed-mock-data<span class="w"> </span>--num-projects<span class="w"> </span><span class="m">5</span><span class="w"> </span>--memories-per-project<span class="w"> </span><span class="m">8</span>
</code></pre></div>
<p>Seed flags:
- <code>--num-projects</code> (default <code>3</code>)
- <code>--memories-per-project</code> (default <code>2</code>)</p>
<h2 id="sqlalchemy-seed-utility">SQLAlchemy seed utility<a class="headerlink" href="#sqlalchemy-seed-utility" title="Permanent link">&para;</a></h2>
<p>For direct DB-side seeding (admin/demo setup), use:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>docker<span class="w"> </span>compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>api<span class="w"> </span>uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>app.seed_mock_data
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1"># Host wrapper (only when DATABASE_URL is reachable from host)</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>python<span class="w"> </span>scripts/seed_mock_data.py
</code></pre></div>
<p>This script:
- ensures <code>dn@thecontextcache.com</code> exists and is admin (target auth user id <code>2</code>)
- ensures a demo org + ownership membership
- creates mock projects (<code>Alpha Launch</code>, <code>Q2 Planning</code>, <code>Research Roadmap</code>)
- creates typed memories with metadata/tags over multiple dates
- writes <code>memory_embeddings</code> rows and vector fields via SQLAlchemy</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../07-security/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Security Model">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Security Model
              </div>
            </div>
          </a>
        
        
          
          <a href="../11-branding/" class="md-footer__link md-footer__link--next" aria-label="Next: Branding">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Branding
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="mailto:support@thecontextcache.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "navigation.footer", "content.code.copy", "content.code.annotate", "search.highlight", "search.suggest"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.4.0/dist/mermaid.min.js"></script>
      
    
  </body>
</html>